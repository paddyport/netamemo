(function(t){function e(e){for(var n,c,s=e[0],l=e[1],o=e[2],d=0,u=[];d<s.length;d++)c=s[d],Object.prototype.hasOwnProperty.call(r,c)&&r[c]&&u.push(r[c][0]),r[c]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);g&&g(e);while(u.length)u.shift()();return i.push.apply(i,o||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],n=!0,s=1;s<a.length;s++){var l=a[s];0!==r[l]&&(n=!1)}n&&(i.splice(e--,1),t=c(c.s=a[0]))}return t}var n={},r={app:0},i=[];function c(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.m=t,c.c=n,c.d=function(t,e,a){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)c.d(a,n,function(e){return t[e]}.bind(null,n));return a},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var o=0;o<s.length;o++)e(s[o]);var g=l;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var n=a("85ec"),r=a.n(n);r.a},"04e7":function(t,e,a){"use strict";var n=a("374c"),r=a.n(n);r.a},"06ba":function(t,e,a){},"0e9a":function(t,e,a){},"131e":function(t,e,a){},2139:function(t,e,a){"use strict";var n=a("06ba"),r=a.n(n);r.a},"374c":function(t,e,a){},"46e3":function(t,e,a){"use strict";var n=a("a0d9"),r=a.n(n);r.a},"4a8f":function(t,e,a){"use strict";var n=a("131e"),r=a.n(n);r.a},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:[t.deviceType],attrs:{id:"App"}},[a("calendar-container",{ref:"calendar",attrs:{db:t.db,currentYYMM:{year:t.currentYear,month:t.currentMonth},changeMonthBtnFlg:t.changeMonthBtnFlg,changeMonthFlg:t.changeMonthFlg},on:{ANsetCalendarData:t.setCalendarData,ANsetChangeMonth:t.setChangeMonth,ANswitchChangeMonth:t.switchChangeMonth,ANopenPosts:t.openPosts,ANopenAnewDcm:t.openAnewDcm,ANopenAnewCtg:t.openAnewCtg,ANswitchLoader:t.switchLoader}}),a("menu-container",{ref:"menu",attrs:{db:t.db,menuListBtnFlg:t.menuListBtnFlg,menuListFlg:t.menuListFlg},on:{ANswitchMenuList:t.switchMenuList,ANopenViewDcm:t.openViewDcm,ANopenViewCtg:t.openViewCtg,ANswitchLoader:t.switchLoader}}),a("posts-container",{ref:"posts",attrs:{db:t.db,currentYYMM:{year:t.currentYear,month:t.currentMonth},postsFlg:t.postsFlg},on:{ANclosePosts:t.closePosts,ANopenEditDcm:t.openEditDcm,ANopenEditCtg:t.openEditCtg,ANopenViewDcm:t.openViewDcm,ANopenViewCtg:t.openViewCtg,ANconfirmRem:t.confirmRem,ANswitchLoader:t.switchLoader}}),a("view-container",{ref:"view",attrs:{db:t.db,viewFlg:t.viewFlg},on:{ANopenViewDcm:t.openViewDcm,ANopenEditDcm:t.openEditDcm,ANopenEditCtg:t.openEditCtg,ANconfirmRem:t.confirmRem,ANcloseView:t.closeView,ANswitchLoader:t.switchLoader}}),a("edit-container",{ref:"edit",attrs:{db:t.db,editFlg:t.editFlg},on:{ANcloseEditDcm:t.closeEditDcm,ANcloseEditCtg:t.closeEditCtg,ANswitchLoader:t.switchLoader}}),a("anew-container",{ref:"anew",attrs:{db:t.db,anewFlg:t.anewFlg},on:{ANcloseAnew:t.closeAnew,ANswitchLoader:t.switchLoader}}),t.dialogFlg?a("dialog-container",{attrs:{btnClass:t.dialogBtnClass},on:{ANcloseDialog:t.closeDialog,ANremoveItem:t.removeItem,ANswitchLoader:t.switchLoader}}):t._e(),t.loaderFlg?a("loader-container"):t._e()],1)},i=[],c=(a("a630"),a("c975"),a("fb6a"),a("a9e3"),a("b64b"),a("d3b7"),a("ac1f"),a("6062"),a("3ca3"),a("5319"),a("ddb0"),a("96cf"),a("1da1")),s=a("4dec"),l=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},o=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"loader",attrs:{id:"Loader"}},[a("div",[a("div"),a("div"),a("div"),a("div")])])}],g={name:"LoaderContainer"},d=g,u=(a("dd40"),a("2877")),m=Object(u["a"])(d,l,o,!1,null,"571dbb7c",null),h=m.exports,C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dialog",attrs:{id:"Dialog"}},[a("div",{staticClass:"content"},[a("p",[t._v("選択したデータを削除しますか？")]),a("p",[a("button",{class:["btnText","def",t.btnClass,"rem","widMD"],attrs:{type:"button"},on:{click:t.removeItem}},[t._m(0)]),a("button",{staticClass:"btnText def nml widMD",attrs:{type:"button"},on:{click:t.closeDialog}},[t._m(1)])])])])},v=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("i"),t._v("削除")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("span",[t._v("キャンセル")])])}],f={name:"DialogContainer",props:{btnClass:String},methods:{closeDialog:function(){this.$emit("ANcloseDialog")},removeItem:function(){this.$emit("ANswitchLoader"),this.$emit("ANremoveItem")}}},w=f,D=(a("908f"),Object(u["a"])(w,C,v,!1,null,null,null)),p=D.exports,b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"calendar",attrs:{id:"Calendar"}},[a("calendar-head",{attrs:{currentYYMM:t.currentYYMM,changeMonthBtnFlg:t.changeMonthBtnFlg},on:{GPCallswitchChangeMonth:t.$listeners["ANswitchChangeMonth"]}}),a("calendar-change",{attrs:{changeMonthFlg:t.changeMonthFlg,changeMonthObj:t.changeMonthObj}}),a("calendar-body",{attrs:{currentDates:t.currentDates,currentFirstDay:t.currentFirstDay},on:{GPCallopenPosts:t.$listeners["ANopenPosts"],GPCallswitchLoader:t.$listeners["ANswitchLoader"]}}),a("calendar-foot",{on:{GPCallopenAnewDcm:t.$listeners["ANopenAnewDcm"],GPCallopenAnewCtg:t.$listeners["ANopenAnewCtg"]}})],1)},A=[],T=a("ade3"),_=a("b85c"),y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",{staticClass:"head"},[a("button",{class:["btnIcon","def","nml","cng",t.changeMonthBtnFlg?"":"isNoActive"],attrs:{type:"button"},on:{click:function(e){return t.onClick()}}},[a("span",[t._v("替")])]),a("h1",[t._v(t._s(t.currentYYMM.year)+"年"+t._s(t.currentYYMM.month+1)+"月")])])},O=[],j={name:"CalendarHead",props:{currentYYMM:Object,changeMonthBtnFlg:Boolean},methods:{onClick:function(){this.$emit("GPCallswitchChangeMonth")}}},F=j,$=Object(u["a"])(F,y,O,!1,null,null,null),P=$.exports,N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:["change",t.changeMonthFlg?"isShown":""]},[a("ul",t._l(t.changeMonthObj,(function(e,n,r){return a("li",{key:r},[a("a",{attrs:{"data-year":n.slice(0,4),"data-month":Number(n.slice(5))+1},on:{click:t.onClick}},[a("i",[t._v("右")]),a("strong",[t._v(t._s(n.slice(0,4))+"年"+t._s(Number(n.slice(5))+1)+"月")]),a("span",{staticClass:"dcm"},[t._v(t._s(e.did.length))]),a("span",{staticClass:"ctg"},[t._v(t._s(e.cid.length))])])])})),0)])},k=[],E={name:"CalendarChange",props:{changeMonthFlg:Boolean,changeMonthObj:Object},methods:{onClick:function(){this.$emit("buttonClick")}}},x=E,M=Object(u["a"])(x,N,k,!1,null,null,null),L=M.exports,S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"body"},[a("div",{staticClass:"month"},t._l(t.currentDates,(function(e,n){return a("div",{key:n,staticClass:"day"},[e.dcm.length||e.ctg.length?a("a",{staticClass:"content",attrs:{"data-date":e.date},on:{click:t.callopenPosts}},[e.dcm.length?a("p",{staticClass:"dcm"},[t._v("文")]):t._e(),e.ctg.length?a("p",{staticClass:"ctg"},[t._v("類")]):t._e()]):t._e(),e.date?a("div",{staticClass:"index"},[t._v(t._s(e.number))]):t._e()])})),0)])},B=[],G={name:"CalendarBody",props:{currentDates:Array,currentFirstDay:Number},methods:{callopenPosts:function(t){var e=t.target,a=Number(e.dataset.date),n=a-1+this.currentFirstDay;this.$emit("GPCallswitchLoader"),this.$emit("GPCallopenPosts",{date:a,idx:n})}}},V=G,Y=Object(u["a"])(V,S,B,!1,null,null,null),R=Y.exports,I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("footer",{staticClass:"footer"},[a("button",{staticClass:"btnText def dcm widLG",attrs:{type:"button"},on:{click:t.callopenAnewDcm}},[t._m(0)]),a("button",{staticClass:"btnText def ctg widLG",attrs:{type:"button"},on:{click:t.callopenAnewCtg}},[t._m(1)])])},H=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("i"),t._v("新規作成")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("i"),t._v("新規作成")])}],W={name:"CalendarFoot",methods:{callopenAnewDcm:function(){this.$emit("GPCallopenAnewDcm")},callopenAnewCtg:function(){this.$emit("GPCallopenAnewCtg")}}},z=W,X=Object(u["a"])(z,I,H,!1,null,null,null),J=X.exports,q={name:"CalendarContainer",props:{db:Object,currentYYMM:Object,changeMonthBtnFlg:Boolean,changeMonthFlg:Boolean},data:function(){return{dayArray:["sun","mon","tue","wed","thu","fri","sat"],currentFirstDay:0,currentDatesCnt:0,currentWeeks:0,currentDates:[],changeMonthObj:{}}},components:{CalendarHead:P,CalendarChange:L,CalendarBody:R,CalendarFoot:J},created:function(){this.setCalendar()},methods:{setCalendar:function(){this.changeMonthObj={},this.currentFirstDay=new Date(this.currentYYMM.year,this.currentYYMM.month).getDay(),this.currentDatesCnt=this.$parent.getCurrentDates(this.currentYYMM.year,this.currentYYMM.month),this.currentWeeks=Math.ceil((this.currentFirstDay+this.currentDatesCnt)/7),this.currentDates=this.setCalendarArr(),this.setCalendarData()},setCalendarArr:function(){for(var t=[],e=0;e<this.currentWeeks;e++)for(var a=0;a<this.dayArray.length;a++){var n=void 0,r=!e&&a<this.currentFirstDay?null:e*this.dayArray.length+(a+1)-this.currentFirstDay,i=new Date(this.currentYYMM.year,this.currentYYMM.month,r).getTime();r=r&&this.currentDatesCnt<r?null:r,n={date:r,number:r?this.$parent.zeroPad(r,2):null,time:i,dcm:[],ctg:[],ddid:[]},t.push(n)}return t},setCalendarData:function(){var t=this,e=new Date(t.currentYYMM.year,t.currentYYMM.month).getTime(),a=new Date(t.currentYYMM.year,t.currentYYMM.month+1).getTime();t.db.dcm.toArray().then((function(n){var r,i=Object(_["a"])(n);try{for(i.s();!(r=i.n()).done;){var c=r.value,s=new Date(c.date),l=s.getTime(),o=s.getFullYear(),g=s.getMonth(),d=o+"-"+g;if(e<=l&&l<a){var u=s.getDate()+t.currentFirstDay-1;t.currentDates[u].dcm.push(c.did),t.currentDates[u].dcm=t.$parent.compileArrtoArr(t.currentDates[u].dcm),t.currentDates[u].ddid.push(c.did),t.currentDates[u].ddid=t.$parent.compileArrtoArr(t.currentDates[u].ddid)}t.changeMonthObj[d]?t.changeMonthObj[d].did?(t.changeMonthObj[d].did.push(c.did),t.changeMonthObj[d].did=t.$parent.compileArrtoArr(t.changeMonthObj[d].did)):(t.changeMonthObj[d]={did:[c.did]},t.changeMonthObj[d].cid||(t.changeMonthObj[d]={cid:[]})):t.changeMonthObj=Object(T["a"])({},d,{did:[c.did],cid:[]})}}catch(m){i.e(m)}finally{i.f()}t.$emit("ANsetCalendarData",t.currentDates),t.$emit("ANsetChangeMonth",t.changeMonthObj)})),t.db.ctg.toArray().then((function(n){var r,i=Object(_["a"])(n);try{for(i.s();!(r=i.n()).done;){var c=r.value,s=new Date(c.date),l=s.getTime(),o=s.getFullYear(),g=s.getMonth(),d=o+"-"+g;if(e<=l&&l<a){var u=s.getDate()+t.currentFirstDay-1;t.currentDates[u].ctg.indexOf(c.cid)<0&&t.currentDates[u].ctg.push(c.cid)}t.changeMonthObj[d]?t.changeMonthObj[d].cid?(t.changeMonthObj[d].cid.push(c.cid),t.changeMonthObj[d].cid=t.$parent.compileArrtoArr(t.changeMonthObj[d].cid)):(t.changeMonthObj[d]={cid:[c.cid]},t.changeMonthObj[d].did||(t.changeMonthObj[d]={did:[]})):t.changeMonthObj=Object(T["a"])({},d,{cid:[c.cid],did:[]})}}catch(m){i.e(m)}finally{i.f()}t.$emit("ANsetCalendarData",t.currentDates),t.$emit("ANsetChangeMonth",t.changeMonthObj)}))}}},K=q,Q=(a("04e7"),Object(u["a"])(K,b,A,!1,null,null,null)),U=Q.exports,Z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"menu",attrs:{id:"Menu"}},[a("ul",{class:["list",t.menuListFlg?"isShown":""]},[t._m(0),t._m(1),a("menu-anew",{attrs:{dcmNewArr:t.dcmNewArr},on:{GPCallopenViewDcm:t.$listeners["ANopenViewDcm"],GPCallswitchMenuList:t.$listeners["ANswitchMenuList"],GPCallswitchLoader:t.$listeners["ANswitchLoader"]}}),a("menu-edit",{attrs:{dcmEdtArr:t.dcmEdtArr},on:{GPCallopenViewDcm:t.$listeners["ANopenViewDcm"],GPCallswitchMenuList:t.$listeners["ANswitchMenuList"],GPCallswitchLoader:t.$listeners["ANswitchLoader"]}}),a("menu-document",{attrs:{dcmArr:t.dcmArr},on:{GPCallopenViewDcm:t.$listeners["ANopenViewDcm"],GPCallswitchMenuList:t.$listeners["ANswitchMenuList"],GPCallswitchLoader:t.$listeners["ANswitchLoader"]}}),a("menu-category",{attrs:{ctgArr:t.ctgArr},on:{GPCallopenViewCtg:t.$listeners["ANopenViewCtg"],GPCallswitchMenuList:t.$listeners["ANswitchMenuList"],GPCallswitchLoader:t.$listeners["ANswitchLoader"]}})],1),a("button",{class:["btnIcon","def","nml","menuList",t.menuListBtnFlg?"":"isNoActive"],attrs:{type:"button"},on:{click:t.callswitchMenuList}},[a("span",[t._v("メニュー")])])])},tt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",[a("a",{staticClass:"listItem sch trs"},[a("span",[t._v("フリーワード検索")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",[a("a",{staticClass:"listItem tag trs"},[a("span",[t._v("タグ検索")])])])}],et=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",[a("a",{class:["listItem","hst","acc",t.dcmNewArr.length?"":"isNoActive"],on:{click:t.callaccordionNext}},[a("span",[t._v("最近新規作成したテキスト")])]),t.dcmNewArr.length?a("ul",{staticClass:"child"},t._l(t.dcmNewArr,(function(e,n){return a("li",{key:n},[a("a",{staticClass:"listItem trs",attrs:{"data-did":e.did},on:{click:t.callopenViewDcm}},[a("p",[t._v(t._s(e.head))])])])})),0):t._e()])},at=[],nt={name:"MenuAnew",props:{dcmNewArr:Array},methods:{callaccordionNext:function(t){this.$parent.accordionNext(t)},callopenViewDcm:function(t){var e=t.target,a=Number(e.dataset.did);this.$emit("GPCallopenViewDcm",a),this.$emit("GPCallswitchMenuList"),this.$emit("GPCallswitchLoader")}}},rt=nt,it=Object(u["a"])(rt,et,at,!1,null,null,null),ct=it.exports,st=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",[a("a",{class:["listItem","edt","acc",t.dcmEdtArr.length?"":"isNoActive"],on:{click:t.callaccordionNext}},[a("span",[t._v("最近編集したテキスト")])]),t.dcmEdtArr.length?a("ul",{staticClass:"child"},t._l(t.dcmEdtArr,(function(e,n){return a("li",{key:n},[a("a",{staticClass:"listItem trs",attrs:{"data-did":e.did},on:{click:t.callopenViewDcm}},[a("p",[t._v(t._s(e.head))])])])})),0):t._e()])},lt=[],ot={name:"MenuEdit",props:{dcmEdtArr:Array},methods:{callaccordionNext:function(t){this.$parent.accordionNext(t)},callopenViewDcm:function(t){var e=t.target,a=Number(e.dataset.did);this.$emit("GPCallopenViewDcm",a),this.$emit("GPCallswitchMenuList"),this.$emit("GPCallswitchLoader")}}},gt=ot,dt=Object(u["a"])(gt,st,lt,!1,null,null,null),ut=dt.exports,mt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",[a("a",{class:["listItem","dcm","acc",t.dcmArr.length?"":"isNoActive"],on:{click:t.callaccordionNext}},[a("span",[t._v("テキスト一覧")])]),t.dcmArr.length?a("ul",{staticClass:"child"},t._l(t.dcmArr,(function(e,n){return a("li",{key:n},[a("a",{staticClass:"listItem trs",attrs:{"data-did":e.did},on:{click:t.callopenViewDcm}},[a("p",[t._v(t._s(e.head))])])])})),0):t._e()])},ht=[],Ct={name:"MenuDocument",props:{dcmArr:Array},methods:{callaccordionNext:function(t){this.$parent.accordionNext(t)},callopenViewDcm:function(t){var e=t.target,a=Number(e.dataset.did);this.$emit("GPCallopenViewDcm",a),this.$emit("GPCallswitchMenuList"),this.$emit("GPCallswitchLoader")}}},vt=Ct,ft=Object(u["a"])(vt,mt,ht,!1,null,null,null),wt=ft.exports,Dt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",[a("a",{class:["listItem","ctg","acc",t.ctgArr.length?"":"isNoActive"],on:{click:t.callaccordionNext}},[a("span",[t._v("カテゴリ一覧")])]),t.ctgArr.length?a("ul",{staticClass:"child"},t._l(t.ctgArr,(function(e,n){return a("li",{key:n},[a("a",{staticClass:"listItem trs",attrs:{"data-cid":e.cid},on:{click:t.callopenViewCtg}},[a("p",[t._v(t._s(e.head))])])])})),0):t._e()])},pt=[],bt={name:"MenuCategory",props:{ctgArr:Array},methods:{callaccordionNext:function(t){this.$parent.accordionNext(t)},callopenViewCtg:function(t){var e=t.target,a=Number(e.dataset.cid);this.$emit("GPCallopenViewCtg",a),this.$emit("GPCallswitchMenuList"),this.$emit("GPCallswitchLoader")}}},At=bt,Tt=Object(u["a"])(At,Dt,pt,!1,null,null,null),_t=Tt.exports,yt={name:"MenuContainer",props:{db:Object,menuListBtnFlg:Boolean,menuListFlg:Boolean},data:function(){return{dcmNewArr:[],dcmEdtArr:[],dcmArr:[],ctgArr:[]}},components:{MenuAnew:ct,MenuEdit:ut,MenuDocument:wt,MenuCategory:_t},created:function(){this.setMenuData()},methods:{accordionNext:function(t){var e=t.target,a=e.nextElementSibling;if(e.classList.contains("isOpen"))a.removeAttribute("style"),e.classList.remove("isOpen");else{var n=a.children.length*e.clientHeight;a.style.height=n+"px",e.classList.add("isOpen")}},setMenuData:function(){var t=this;t.dcmArr=[],t.ctgArr=[],t.dcmNewArr=[],t.dcmEdtArr=[],t.db.dcm.toArray().then((function(e){var a,n=Object(_["a"])(e);try{for(n.s();!(a=n.n()).done;){var r=a.value,i=r;t.dcmArr.push(r),i.datetime=new Date(r.date).getTime(),i.lasttime=new Date(r.last).getTime(),t.dcmNewArr.push(i),t.dcmNewArr.sort(t.$parent.sortDESC("datetime")),t.dcmEdtArr.push(i),t.dcmEdtArr.sort(t.$parent.sortDESC("lasttime"))}}catch(c){n.e(c)}finally{n.f()}e.length===t.dcmArr.length&&(t.dcmNewArr.slice(0,4),t.dcmEdtArr.slice(0,4))})),t.db.ctg.toArray().then((function(e){var a,n=Object(_["a"])(e);try{for(n.s();!(a=n.n()).done;){var r=a.value;t.ctgArr.push(r)}}catch(i){n.e(i)}finally{n.f()}}))},callswitchMenuList:function(){this.$emit("ANswitchMenuList")}}},Ot=yt,jt=(a("4a8f"),Object(u["a"])(Ot,Z,tt,!1,null,null,null)),Ft=jt.exports,$t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.postsFlg?a("div",{staticClass:"posts",attrs:{id:"Posts"}},[a("div",{staticClass:"content"},[a("posts-document",{attrs:{markDcmArr:t.markDcmArr},on:{GPopenEditDcm:t.openEditDcm,GPCallopenViewDcm:t.$listeners["ANopenViewDcm"],GPCallconfirmRem:t.$listeners["ANconfirmRem"],GPCallswitchLoader:t.$listeners["ANswitchLoader"]}}),a("posts-category",{attrs:{markCtgArr:t.markCtgArr},on:{GPopenEditCtg:t.openEditCtg,GPCallopenViewCtg:t.$listeners["ANopenViewCtg"],GPCallconfirmRem:t.$listeners["ANconfirmRem"],GPCallswitchLoader:t.$listeners["ANswitchLoader"]}}),t.markDcmArr.length||t.markCtgArr.length?t._e():a("p",{staticClass:"note"},[t._v("登録されていません。")])],1),a("posts-head",{attrs:{currentYYMM:t.currentYYMM,markDate:t.markDate}}),a("button",{staticClass:"icn",attrs:{type:"button"},on:{click:t.callclosePosts}},[t._v("消")])],1):t._e()},Pt=[],Nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"head"},[a("h1",[t._v(t._s(t.currentYYMM.year)+"年"+t._s(t.currentYYMM.month+1)+"月"+t._s(t.markDate)+"日")])])},kt=[],Et={name:"PostsHead",props:{currentYYMM:Object,markDate:Number}},xt=Et,Mt=Object(u["a"])(xt,Nt,kt,!1,null,null,null),Lt=Mt.exports,St=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.markDcmArr.length?a("ul",{staticClass:"list"},t._l(t.markDcmArr,(function(e,n){return a("li",{key:n},[a("div",{staticClass:"cardItem"},[e.cid?a("i",{style:{color:e.color}}):t._e(),a("h2",[t._v(t._s(e.head))]),a("time",{staticClass:"date"},[t._v(t._s(new Date(e.date).getFullYear())+"年"+t._s(new Date(e.date).getMonth()+1)+"月"+t._s(new Date(e.date).getDate())+"日")]),a("time",{staticClass:"last"},[t._v(t._s(new Date(e.last).getFullYear())+"年"+t._s(new Date(e.last).getMonth()+1)+"月"+t._s(new Date(e.last).getDate())+"日")]),a("p",{attrs:{"data-did":e.did}},[a("button",{staticClass:"btnIcon def dcm edt",attrs:{type:"button"},on:{click:t.callopenEditDcm}},[a("span",[t._v("編集")])]),a("button",{staticClass:"btnIcon def dcm viw",attrs:{type:"button"},on:{click:t.callopenViewDcm}},[a("span",[t._v("確認")])]),a("button",{staticClass:"btnIcon def dcm rem",attrs:{type:"button"},on:{click:t.callconfirmRem}},[a("span",[t._v("削除")])])])])])})),0):t._e()},Bt=[],Gt={name:"PostsText",props:{markDcmArr:Array},methods:{callopenEditDcm:function(t){var e=t.target,a=Number(e.parentNode.dataset.did);this.$emit("GPCallswitchLoader"),this.$parent.openEditDcm(a)},callopenViewDcm:function(t){var e=t.target,a=Number(e.parentNode.dataset.did);this.$emit("GPCallswitchLoader"),this.$emit("GPCallopenViewDcm",a)},callconfirmRem:function(t){var e=t.target;e.parentNode.classList.add("isRemove"),this.$emit("GPCallconfirmRem","dcm")}}},Vt=Gt,Yt=Object(u["a"])(Vt,St,Bt,!1,null,null,null),Rt=Yt.exports,It=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.markCtgArr.length?a("ul",{staticClass:"list"},t._l(t.markCtgArr,(function(e,n){return a("li",{key:n},[a("div",{staticClass:"cardItem"},[a("i",{style:{color:e.color}}),a("h2",[t._v(t._s(e.head))]),a("time",{staticClass:"date"},[t._v(t._s(new Date(e.date).getFullYear())+"年"+t._s(new Date(e.date).getMonth()+1)+"月"+t._s(new Date(e.date).getDate())+"日")]),a("p",{attrs:{"data-cid":e.cid}},[a("button",{staticClass:"btnIcon def ctg edt",attrs:{type:"button"},on:{click:t.callopenEditCtg}},[a("span",[t._v("編集")])]),a("button",{staticClass:"btnIcon def ctg viw",attrs:{type:"button"},on:{click:t.callopenViewCtg}},[a("span",[t._v("確認")])]),a("button",{staticClass:"btnIcon def ctg rem",attrs:{type:"button"},on:{click:t.callconfirmRem}},[a("span",[t._v("削除")])])])])])})),0):t._e()},Ht=[],Wt={name:"PostsSeries",props:{markCtgArr:Array},methods:{callopenEditCtg:function(t){var e=t.target,a=Number(e.parentNode.dataset.cid);this.$emit("GPCallswitchLoader"),this.$parent.openEditCtg(a)},callopenViewCtg:function(t){var e=t.target,a=Number(e.parentNode.dataset.cid);this.$emit("GPCallswitchLoader"),this.$emit("GPCallopenViewCtg",a)},callconfirmRem:function(t){var e=t.target;e.parentNode.classList.add("isRemove"),this.$emit("GPCallconfirmRem","ctg")}}},zt=Wt,Xt=Object(u["a"])(zt,It,Ht,!1,null,null,null),Jt=Xt.exports,qt={name:"PostsContainer",props:{db:Object,currentYYMM:Object,postsFlg:Boolean},data:function(){return{markDate:0,markDcmArr:[],markCtgArr:[],ctgArr:{}}},components:{PostsHead:Lt,PostsDocument:Rt,PostsCategory:Jt},methods:{compileBrtoNl:function(t){var e=String(t);return e.replace(/<br>/,"\r\n")},setPostsData:function(t){this.markDate=t,this.markDcmArr=[],this.markCtgArr=[],this.ctgArr={};var e=this,a=new Date(e.currentYYMM.year,e.currentYYMM.month,e.markDate).getTime();e.db.ctg.toArray().then((function(t){var n,r=Object(_["a"])(t);try{for(r.s();!(n=r.n()).done;){var i=n.value,c=new Date(i.date).getTime();e.ctgArr[i.cid]=i.color,a===c&&e.markCtgArr.push(i),e.markCtgArr=e.$parent.compileArrtoArr(e.markCtgArr)}}catch(s){r.e(s)}finally{r.f()}})),e.db.dcm.toArray().then((function(t){var n,r=Object(_["a"])(t);try{for(r.s();!(n=r.n()).done;){var i=n.value,c=new Date(i.date).getTime(),s=new Date(i.last).getTime(),l=i;l.color=i.cid?e.ctgArr[i.cid]:"transparent",a===c&&e.markDcmArr.push(l),a===s&&e.markDcmArr.push(l),e.markDcmArr=e.$parent.compileArrtoArr(e.markDcmArr)}}catch(o){r.e(o)}finally{r.f()}}))},callclosePosts:function(){this.$emit("ANclosePosts")},getDataCtg:function(t){var e=this;return new Promise((function(a){e.db.ctg.get(t).then((function(t){a(t)}))}))},openEditDcm:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var n,r,i,c,s,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e,r=Number(t),i={dcm:{},ctg:{},tag:[]},c=Object(_["a"])(n.markDcmArr),a.prev=3,c.s();case 5:if((s=c.n()).done){a.next=20;break}if(l=s.value,l.did!=r){a.next=18;break}if(i.dcm=l,i.dcm.body=n.compileBrtoNl(l.body),i.tag=l.tag,l.cid){a.next=14;break}return n.$emit("ANopenEditDcm",i),a.abrupt("return");case 14:return a.next=16,n.getDataCtg(l.cid);case 16:i.ctg=a.sent,n.$emit("ANopenEditDcm",i);case 18:a.next=5;break;case 20:a.next=25;break;case 22:a.prev=22,a.t0=a["catch"](3),c.e(a.t0);case 25:return a.prev=25,c.f(),a.finish(25);case 28:case"end":return a.stop()}}),a,null,[[3,22,25,28]])})))()},getDataDcm:function(t){var e=this;return new Promise((function(a){e.db.dcm.where({cid:t}).toArray().then((function(t){a(t)}))}))},openEditCtg:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var n,r,i,c,s,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e,r=Number(t),i={dcm:[],ctg:{},tag:[]},c=Object(_["a"])(n.markCtgArr),a.prev=3,c.s();case 5:if((s=c.n()).done){a.next=17;break}if(l=s.value,l.cid!=r){a.next=15;break}return i.ctg=l,i.ctg.body=n.compileBrtoNl(l.body),i.tag=l.tag,a.next=13,n.getDataDcm(l.cid);case 13:i.dcm=a.sent,n.$emit("ANopenEditCtg",i);case 15:a.next=5;break;case 17:a.next=22;break;case 19:a.prev=19,a.t0=a["catch"](3),c.e(a.t0);case 22:return a.prev=22,c.f(),a.finish(22);case 25:case"end":return a.stop()}}),a,null,[[3,19,22,25]])})))()}}},Kt=qt,Qt=(a("46e3"),Object(u["a"])(Kt,$t,Pt,!1,null,null,null)),Ut=Qt.exports,Zt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.viewFlg?a("div",{staticClass:"view",attrs:{id:"View"}},[t.viewDcmFlg?a("view-document-container",{attrs:{viewClass:"dcm"==t.frontFlg&&t.viewCtgFlg?"front":"",viewDcmDcmObj:t.viewDcmDcmObj,viewDcmCtgObj:t.viewDcmCtgObj,viewDcmTagArr:t.viewDcmTagArr,viewDcmBody:t.viewDcmBody},on:{GPCallopenEditDcm:t.$listeners["ANopenEditDcm"],GPCallconfirmRem:t.$listeners["ANconfirmRem"],GPcloseViewDcm:t.closeViewDcm,GPCallswitchLoader:t.$listeners["ANswitchLoader"]}}):t._e(),t.viewCtgFlg?a("view-category-container",{attrs:{viewClass:"ctg"==t.frontFlg&&t.viewDcmFlg?"front":"",viewCtgCtgObj:t.viewCtgCtgObj,viewCtgDcmArr:t.viewCtgDcmArr,viewCtgTagArr:t.viewCtgTagArr,viewCtgBody:t.viewCtgBody},on:{GPCallopenViewDcm:t.$listeners["ANopenViewDcm"],GPCallopenEditCtg:t.$listeners["ANopenEditCtg"],GPCallconfirmRem:t.$listeners["ANconfirmRem"],GPcloseViewCtg:t.closeViewCtg,GPCallswitchLoader:t.$listeners["ANswitchLoader"]}}):t._e()],1):t._e()},te=[],ee=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:["dcm",t.viewClass]},[a("view-document-content",{attrs:{viewDcmHead:t.viewDcmDcmObj.head,viewDcmBody:t.viewDcmBody}}),t.viewDcmDcmObj.cid?a("view-document-ctgname",{attrs:{viewDcmCtgId:t.viewDcmCtgObj.cid,viewDcmCtgName:t.viewDcmCtgObj.head,viewDcmCtgColor:t.viewDcmCtgObj.color}}):t._e(),t.viewDcmDcmObj.tag.length?a("view-document-tags",{attrs:{viewDcmTagArr:t.viewDcmTagArr}}):t._e(),a("view-foot",{attrs:{btnClass:"dcm",id:t.viewDcmDcmObj.did},on:{PTcallopenEdit:t.callopenEditDcm,PTCallconfirmRem:t.$listeners["GPCallconfirmRem"],PTCallswitchLoader:t.$listeners["GPCallswitchLoader"]}}),a("button",{staticClass:"icn",attrs:{type:"button"},on:{click:t.closeViewDcm}},[t._v("消")])],1)},ae=[],ne=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("div",{staticClass:"head"},[a("div",[t._v(t._s(t.viewDcmHead))])]),a("div",{staticClass:"body"},[a("div",[t._v(t._s(t.viewDcmBody))])])])},re=[],ie={name:"ViewDocumentContent",props:{viewDcmHead:String,viewDcmBody:String}},ce=ie,se=Object(u["a"])(ce,ne,re,!1,null,null,null),le=se.exports,oe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"series",attrs:{"data-cid":t.viewDcmCtgId}},[a("i",{style:{color:t.viewDcmCtgColor}}),a("p",[t._v(t._s(t.viewDcmCtgName))])])},ge=[],de={name:"ViewDocumentCtgname",props:{viewDcmCtgId:Number,viewDcmCtgName:String,viewDcmCtgColor:String}},ue=de,me=Object(u["a"])(ue,oe,ge,!1,null,null,null),he=me.exports,Ce=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tag"},[a("p",{class:t.tagFlg?"isShown":""},t._l(t.viewDcmTagArr,(function(e,n){return a("span",{key:n,attrs:{"data-tag":e}},[t._v(t._s(e))])})),0),a("button",{staticClass:"icn tag",attrs:{type:"button"},on:{click:t.switchTag}},[t._v("箋")])])},ve=[],fe={name:"ViewDocumentTags",props:{viewDcmTagArr:Array},data:function(){return{tagFlg:!1}},methods:{switchTag:function(){this.tagFlg=!this.tagFlg}}},we=fe,De=Object(u["a"])(we,Ce,ve,!1,null,null,null),pe=De.exports,be=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"foot",attrs:{"data-did":"dcm"==t.btnClass?t.id:0,"data-cid":"ctg"==t.btnClass?t.id:0}},[a("button",{class:["btnText","def",t.btnClass,"edt","widLG"],attrs:{type:"button"},on:{click:t.callopenEdit}},[t._m(0)]),a("button",{staticClass:"btnText def nml rem widLG",attrs:{type:"button"},on:{click:t.callconfirmRem}},[t._m(1)])])},Ae=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("i"),t._v("編集")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("i"),t._v("削除")])}],Te={name:"ViewFoot",props:{btnClass:String,id:Number},methods:{callopenEdit:function(){this.$emit("PTCallswitchLoader"),this.$emit("PTcallopenEdit")},callconfirmRem:function(t){var e=t.target;e.parentNode.classList.add("isRemove"),this.$emit("PTCallconfirmRem",this.btnClass)}}},_e=Te,ye=Object(u["a"])(_e,be,Ae,!1,null,null,null),Oe=ye.exports,je={name:"ViewDocumentContainer",props:{viewClass:String,viewDcmDcmObj:Object,viewDcmCtgObj:Object,viewDcmTagArr:Array,viewDcmBody:String},components:{ViewDocumentContent:le,ViewDocumentCtgname:he,ViewDocumentTags:pe,ViewFoot:Oe},methods:{callopenEditDcm:function(){this.viewDcmDcmObj.body=this.viewDcmBody;var t={dcm:this.viewDcmDcmObj,ctg:this.viewDcmCtgObj,tag:this.viewDcmTagArr};this.$emit("GPCallopenEditDcm",t)},closeViewDcm:function(){this.$emit("GPcloseViewDcm")}}},Fe=je,$e=Object(u["a"])(Fe,ee,ae,!1,null,null,null),Pe=$e.exports,Ne=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:["ctg",t.viewClass]},[a("view-category-content",{attrs:{viewCtgHead:t.viewCtgCtgObj.head,viewCtgBody:t.viewCtgBody,viewCtgDcmArr:t.viewCtgDcmArr,viewCtgColor:t.viewCtgCtgObj.color},on:{PTCallopenViewDcm:t.$listeners["GPCallopenViewDcm"]}}),a("view-category-ctgname",{attrs:{viewCtgCtgId:t.viewCtgCtgObj.cid,viewCtgCtgName:t.viewCtgCtgObj.head,viewCtgCtgColor:t.viewCtgCtgObj.color}}),t.viewCtgCtgObj.tag?a("view-category-tags",{attrs:{viewCtgTagArr:t.viewCtgTagArr}}):t._e(),a("view-foot",{attrs:{btnClass:"ctg",id:t.viewDcmDcmObj.cid},on:{PTcallopenEdit:t.callopenEditCtg,PTCallconfirmRem:t.$listeners["GPCallconfirmRem"],PTCallswitchLoader:t.$listeners["GPCallswitchLoader"]}}),a("button",{staticClass:"icn",attrs:{type:"button"},on:{click:t.closeViewCtg}},[t._v("消")])],1)},ke=[],Ee=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("div",{staticClass:"head"},[a("div",[t._v(t._s(t.viewCtgHead))])]),a("div",{staticClass:"body"},[a("div",[t._v(t._s(t.viewCtgBody))])]),a("div",{staticClass:"list"},[t.viewCtgDcmArr.length?a("ul",t._l(t.viewCtgDcmArr,(function(e,n){return a("li",{key:n},[a("div",{staticClass:"cardItem"},[a("i",{style:{color:t.viewCtgColor}}),a("h2",[t._v(t._s(e.head))]),a("time",{staticClass:"date"},[t._v(t._s(new Date(e.date).getFullYear())+"年"+t._s(new Date(e.date).getMonth()+1)+"月"+t._s(new Date(e.date).getDate())+"日")]),a("time",{staticClass:"last"},[t._v(t._s(new Date(e.last).getFullYear())+"年"+t._s(new Date(e.last).getMonth()+1)+"月"+t._s(new Date(e.last).getDate())+"日")]),a("p",{attrs:{"data-did":e.did}},[a("button",{staticClass:"btnIcon def dcm viw",attrs:{type:"button"},on:{click:t.callopenViewDcm}},[a("span",[t._v("確認")])])])])])})),0):a("p",[t._v("登録されていません。")])])])},xe=[],Me={name:"ViewCategoryContent",props:{viewCtgHead:String,viewCtgBody:String,viewCtgDcmArr:Array,viewCtgColor:String},methods:{callopenViewDcm:function(t){var e=t.target,a=Number(e.parentNode.dataset.did);this.$emit("PTCallopenViewDcm",a)}}},Le=Me,Se=Object(u["a"])(Le,Ee,xe,!1,null,null,null),Be=Se.exports,Ge=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"series",attrs:{"data-cid":t.viewCtgCtgId}},[a("i",{style:{color:t.viewCtgCtgColor}}),a("p",[t._v(t._s(t.viewCtgCtgName))])])},Ve=[],Ye={name:"ViewCategoryCtgname",props:{viewCtgCtgId:Number,viewCtgCtgName:String,viewCtgCtgColor:String}},Re=Ye,Ie=Object(u["a"])(Re,Ge,Ve,!1,null,null,null),He=Ie.exports,We=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tag"},[a("p",{class:t.tagFlg?"isShown":""},t._l(t.viewCtgTagArr,(function(e,n){return a("span",{key:n,attrs:{"data-tag":e}},[t._v(t._s(e))])})),0),a("button",{staticClass:"icn tag",attrs:{type:"button"},on:{click:t.switchTag}},[t._v("箋")])])},ze=[],Xe={name:"ViewCategoryTags",props:{viewCtgTagArr:Array},data:function(){return{tagFlg:!1}},methods:{switchTag:function(){this.tagFlg=!this.tagFlg}}},Je=Xe,qe=Object(u["a"])(Je,We,ze,!1,null,null,null),Ke=qe.exports,Qe={name:"ViewCategoryContainer",props:{viewClass:String,viewCtgCtgObj:Object,viewCtgDcmArr:Array,viewCtgTagArr:Array,viewCtgBody:String},components:{ViewCategoryContent:Be,ViewCategoryCtgname:He,ViewCategoryTags:Ke,ViewFoot:Oe},methods:{callopenEditCtg:function(){var t={ctg:this.viewCtgCtgObj,dcm:this.viewCtgDcmArr,tag:this.viewCtgTagArr};this.$emit("GPCallopenEditCtg",t)},closeViewCtg:function(){this.$emit("GPcloseViewCtg")}}},Ue=Qe,Ze=Object(u["a"])(Ue,Ne,ke,!1,null,null,null),ta=Ze.exports,ea={name:"ViewContainer",props:{db:Object,viewFlg:Boolean},data:function(){return{frontFlg:"",viewDcmFlg:!1,viewDcmDcmObj:{},viewDcmCtgObj:{},viewDcmTagArr:[],viewDcmBody:"",viewCtgFlg:!1,viewCtgCtgObj:{},viewCtgDcmArr:[],viewCtgTagArr:[],viewCtgBody:""}},components:{ViewDocumentContainer:Pe,ViewCategoryContainer:ta},methods:{compileBrtoNl:function(t){var e=String(t);return e.replace(/<br>/,"\r\n")},setDcmData:function(t,e){var a=this,n={did:t};a.db.dcm.get(n).then((function(t){e?(a.viewDcmCtgObj={},t.cid&&a.setCtgData(Number(t.cid)),a.viewDcmDcmObj=t,a.viewDcmBody=a.compileBrtoNl(t.body),a.viewDcmTagArr=t.tag,a.viewDcmFlg=!0,a.frontFlg="dcm"):a.viewCtgDcmArr.push(t)}))},getCtgDataDcm:function(t){var e=this,a={cid:t};return e.viewCtgDcmArr=[],new Promise((function(t){e.db.dcm.where(a).toArray().then((function(e){t(e)}))}))},setCtgData:function(t,e){var a=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=a,i={cid:t},r.db.ctg.get(i).then((function(t){e?(r.viewSCtgDcmArr=[],r.viewCtgCtgObj=t,r.viewCtgBody=r.compileBrtoNl(t.body),r.viewCtgTagArr=t.tag,r.viewCtgFlg=!0,r.frontFlg="ctg"):r.viewDcmCtgObj=t})),n.next=4,r.getCtgDataDcm(t);case 4:r.viewCtgDcmArr=n.sent;case 5:case"end":return n.stop()}}),n)})))()},checkCloseView:function(){this.viewDcmFlg||this.viewCtgFlg||(this.frontFlg="",this.$emit("ANcloseView"))},closeViewDcm:function(){this.viewDcmDcmObj={},this.viewDcmFlg=!1,this.frontFlg="ctg",this.checkCloseView()},closeViewCtg:function(){this.viewCtgCtgObj={},this.viewCtgFlg=!1,this.frontFlg="dcm",this.checkCloseView()}}},aa=ea,na=(a("2139"),Object(u["a"])(aa,Zt,te,!1,null,"1f180487",null)),ra=na.exports,ia=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.editFlg?a("div",{staticClass:"edit",attrs:{id:"Edit"}},[t.editDcmFlg?a("edit-document-container",{attrs:{db:t.db,editDcmDcmObj:t.editDcmDcmObj,editDcmCtgObj:t.editDcmCtgObj,editDcmTagArr:t.editDcmTagArr},on:{GPcloseEditDcm:t.closeEditDcm,GPCallswitchLoader:t.$listeners["ANswitchLoader"]}}):t._e(),t.editCtgFlg?a("edit-category-container",{attrs:{db:t.db,editCtgDcmArr:t.editCtgDcmArr,editCtgCtgObj:t.editCtgCtgObj,editCtgTagArr:t.editCtgTagArr},on:{GPcloseEditCtg:t.closeEditCtg,GPCallswitchLoader:t.$listeners["ANswitchLoader"]}}):t._e()],1):t._e()},ca=[],sa=(a("d81d"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dcm",attrs:{"data-did":t.editDcmDcmObj.did}},[a("div",{staticClass:"content"},[a("div",{staticClass:"head"},[a("div",{attrs:{contenteditable:"true"},on:{blur:t.changeEditDcmHead}},[t._v(t._s(t.editDcmDcmObj.head))])]),a("edit-document-ctgname",{attrs:{db:t.db,editDcmCtgObj:t.editDcmCtgObj},on:{PTselectEditDcmCtg:t.selectEditDcmCtg}}),a("edit-document-tags",{attrs:{db:t.db,editDcmTagArr:t.editDcmTagArr},on:{PTselectEditDcmTag:t.selectEditDcmTag}}),a("div",{staticClass:"body"},[a("div",{attrs:{contenteditable:"true"},on:{blur:t.changeEditDcmBody}},[t._v(t._s(t.editDcmDcmObj.body))])])],1),a("edit-foot",{attrs:{btnClass:"dcm",saveFlg:t.saveFlg},on:{PTcloseEdit:t.$listeners["GPcloseEditDcm"],PTsaveEdit:t.setSaveData,PTCallswitchLoader:t.$listeners["GPCallswitchLoader"]}})],1)}),la=[],oa=(a("99af"),a("466d"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"series"},[a("button",{class:[Object.keys(t.DeditDcmCtgObj).length||t.selectCtgnameFlg?"btnIcon":"btnWord","def","ctg"],attrs:{type:"button"},on:{click:t.switchFlg}},[Object.keys(t.DeditDcmCtgObj).length||t.selectCtgnameFlg?a("span",[a("i")]):a("span",[a("i"),t._v("編集")])]),Object.keys(t.DeditDcmCtgObj).length&&!t.selectCtgnameFlg?a("p",{attrs:{"data-cid":t.DeditDcmCtgObj.cid}},[t._v(" "+t._s(t.DeditDcmCtgObj.head)+" "),a("button",{staticClass:"icn",attrs:{type:"button"},on:{click:t.remCtgName}},[t._v("消")])]):t._e(),t.selectCtgnameFlg?a("div",{staticClass:"field"},[a("p",[a("input",{attrs:{type:"text",placeholder:"シリーズ"},on:{focus:t.suggestCtgName,keydown:t.suggestCtgName}}),a("button",{class:["btnWord","def","nml","widSM",t.inputCtgnameFlg?"":"isNoActive"],attrs:{type:"button"},on:{click:t.selectCtgName}},[a("span",[t._v("追加")])])]),t.suggestCtgnameArr.length?a("ul",t._l(t.suggestCtgnameArr,(function(e,n){return a("li",{key:n},[a("a",{attrs:{"data-cid":e.cid},on:{click:t.selectCtgName}},[t._v(t._s(e.head))])])})),0):t._e()]):t._e()])}),ga=[],da={name:"EditDocumentCtgname",props:{db:Object,editDcmCtgObj:Object},data:function(){return{DeditDcmCtgObj:this.editDcmCtgObj,selectCtgnameFlg:!1,inputCtgnameFlg:!1,suggestCtgnameArr:[],ctgLength:0}},methods:{switchFlg:function(){this.selectCtgnameFlg=!this.selectCtgnameFlg},suggestCtgName:function(t){var e=this,a=t.target.value;e.db.ctg.toArray().then((function(t){if(a){e.suggestCtgnameArr=[],e.inputCtgnameFlg=!0;var n,r=Object(_["a"])(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.head.indexOf(a)>-1&&e.suggestCtgnameArr.push(i)}}catch(c){r.e(c)}finally{r.f()}}else e.suggestCtgnameArr=t,e.inputCtgnameFlg=!1,e.ctgLength=e.suggestCtgnameArr.length}))},selectCtgName:function(t){var e=t.target,a=e.dataset.cid,n=a?Number(e.dataset.cid):this.ctgLength+1,r=a?e.innerText:e.previousElementSibling.value;this.DeditDcmCtgObj.cid=n,this.DeditDcmCtgObj.head=r;var i,c=Object(_["a"])(this.suggestCtgnameArr);try{for(c.s();!(i=c.n()).done;){var s=i.value;s.head==r&&(this.DeditDcmCtgObj=s)}}catch(l){c.e(l)}finally{c.f()}this.suggestCtgnameArr=[],this.selectCtgnameFlg=!1,this.$emit("PTselectEditDcmCtg",this.DeditDcmCtgObj)},remCtgName:function(){this.DeditDcmCtgObj={},this.$emit("PTselectEditDcmCtg",this.DeditDcmCtgObj)}}},ua=da,ma=Object(u["a"])(ua,oa,ga,!1,null,null,null),ha=ma.exports,Ca=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tags"},[a("button",{class:[t.DeditDcmTagArr.length||t.selectTagFlg?"btnIcon":"btnWord","def","tag"],attrs:{type:"button"},on:{click:t.switchFlg}},[t.DeditDcmTagArr.length||t.selectTagFlg?a("span",[a("i")]):a("span",[a("i"),t._v("編集")])]),t.selectTagFlg?a("div",{staticClass:"field"},[a("p",[a("input",{attrs:{type:"text",placeholder:"タグ"},on:{focus:t.suggestTags,keydown:t.suggestTags}}),a("button",{staticClass:"btnWord def nml widSM",attrs:{type:"button"},on:{click:t.addSelectTag}},[a("span",[t._v("追加")])])]),t.suggestTagArr.length?a("ul",t._l(t.suggestTagArr,(function(e,n){return a("li",{key:n},[a("a",{attrs:{"data-tag":e},on:{click:t.addSelectTag}},[t._v(t._s(e))])])})),0):t._e()]):t._e(),t.DeditDcmTagArr.length?a("div",{staticClass:"area"},[a("ul",t._l(t.DeditDcmTagArr,(function(e,n){return a("li",{key:n},[a("a",{attrs:{"data-tag":e},on:{click:t.remSelectTag}},[t._v(t._s(e))])])})),0)]):t._e()])},va=[],fa=(a("a434"),{name:"EditDocumentTags",props:{db:Object,editDcmTagArr:Array},data:function(){return{DeditDcmTagArr:this.editDcmTagArr,selectTagFlg:!1,inputTagFlg:!1,suggestTagArr:[]}},methods:{switchFlg:function(){this.selectTagFlg=!this.selectTagFlg,this.selectTagFlg||(this.suggestTagArr=[])},suggestTags:function(t){var e=this,a=t.target.value;e.suggestTagArr=[],e.db.tag.toArray().then((function(t){if(a){e.inputTagFlg=!0;var n,r=Object(_["a"])(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;e.editDcmTagArr.indexOf(i.head)<0&&i.head.indexOf(a)>-1&&e.suggestTagArr.push(i.head)}}catch(o){r.e(o)}finally{r.f()}}else{var c,s=Object(_["a"])(t);try{for(s.s();!(c=s.n()).done;){var l=c.value;e.editDcmTagArr.indexOf(l.head)<0&&e.suggestTagArr.push(l.head)}}catch(o){s.e(o)}finally{s.f()}e.inputTagFlg=!1}}))},addSelectTag:function(t){var e=t.target,a=e.dataset.tag,n=a?e.innerText:e.previousElementSibling.value;!n||this.DeditDcmTagArr.indexOf(n)>-1||(this.DeditDcmTagArr.push(n),a||(e.previousElementSibling.value=""),this.suggestTagArr=[],this.$emit("PTselectEditDcmTag",this.DeditDcmTagArr))},remSelectTag:function(t){var e=t.target,a=e.innerText;this.DeditDcmTagArr.splice(this.DeditDcmTagArr.indexOf(a),1),this.$emit("PTselectEditDcmTag",this.DeditDcmTagArr)}}}),wa=fa,Da=Object(u["a"])(wa,Ca,va,!1,null,null,null),pa=Da.exports,ba=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"foot"},[a("button",{staticClass:"btnText def nml widLG",attrs:{type:"button"},on:{click:t.closeEdit}},[t._m(0)]),a("button",{class:["btnText","def",t.btnClass,"widLG",t.saveFlg?"":"isNoActive"],attrs:{type:"button"},on:{click:t.clickSave}},[t._m(1)])])},Aa=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("span",[t._v("キャンセル")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("i"),t._v("保存")])}],Ta={name:"EditFoot",props:{btnClass:String,saveFlg:Boolean},methods:{closeEdit:function(){this.$emit("PTcloseEdit")},clickSave:function(){this.$emit("PTCallswitchLoader"),this.$emit("PTsaveEdit")}}},_a=Ta,ya=Object(u["a"])(_a,ba,Aa,!1,null,null,null),Oa=ya.exports,ja={name:"EditDocumentContainer",props:{db:Object,editDcmDcmObj:Object,editDcmCtgObj:Object,editDcmTagArr:Array},components:{EditDocumentCtgname:ha,EditDocumentTags:pa,EditFoot:Oa},data:function(){return{DeditDcmDcmObj:this.editDcmDcmObj,DeditDcmCtgObj:this.editDcmCtgObj,DeditDcmTagArr:this.editDcmTagArr,saveFlg:!0}},methods:{compileNltoBr:function(t){var e=String(t);return e.replace(/<div>/,"\r\n").replace(/<\/div>/,"")},compileBrtoNl:function(t){var e=String(t);return e.replace(/<br>/,"\r\n")},changeEditDcmHead:function(t){var e=t.target.innerText;this.saveFlg=!(!e||!e.match(/\S/g)),this.DeditDcmDcmObj.head=e&&e.match(/\S/g)?this.compileNltoBr(e):"",t.target.innerText=this.compileBrtoNl(this.DeditDcmDcmObj.head)},changeEditDcmBody:function(t){var e=t.target.innerText;this.DeditDcmDcmObj.body=e&&e.match(/\S/g)?this.compileNltoBr(e):"",t.target.innerText=this.compileBrtoNl(this.DeditDcmDcmObj.body)},selectEditDcmCtg:function(t){this.DeditDcmCtgObj=t},selectEditDcmTag:function(t){var e=t.concat(t);e=new Set(e),this.DeditDcmTagArr=Array.from(e)},setSaveData:function(){var t=this,e=new Date,a=e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate(),n={date:a,color:"",body:""};t.DeditDcmCtgObj.date&&(t.DeditDcmCtgObj=Object.assign(t.DeditDcmCtgObj,n)),t.db.dcm.update(t.DeditDcmDcmObj.did,{cid:t.DeditDcmCtgObj.cid?t.DeditDcmCtgObj.cid:0,tag:t.DeditDcmTagArr,date:t.DeditDcmDcmObj.date,last:a,head:t.DeditDcmDcmObj.head,body:t.DeditDcmDcmObj.body}).then((function(){t.DeditDcmCtgObj.cid&&t.db.ctg.put(t.DeditDcmCtgObj),t.$parent.setSaveTagPromise(t.DeditDcmTagArr),t.$emit("GPcloseEditDcm",t.DeditDcmDcmObj.did),t.$emit("GPCallswitchLoader")}))}}},Fa=ja,$a=Object(u["a"])(Fa,sa,la,!1,null,null,null),Pa=$a.exports,Na=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ctg",attrs:{"data-did":t.editCtgCtgObj.cid}},[a("div",{staticClass:"content"},[a("div",{staticClass:"head"},[a("div",{attrs:{contenteditable:"true"},on:{blur:t.changeEditCtgHead}},[t._v(t._s(t.editCtgCtgObj.head))])]),a("edit-category-color",{attrs:{ctgColor:t.editCtgCtgObj.color},on:{PTchangeCtgColor:t.changeCtgColor}}),a("edit-category-tags",{attrs:{db:t.db,editCtgTagArr:t.editCtgTagArr},on:{PTselectEditCtgTag:t.selectEditCtgTag}}),a("div",{staticClass:"body"},[a("div",{attrs:{contenteditable:"true"},on:{blur:t.changeEditCtgBody}},[t._v(t._s(t.editCtgCtgObj.body))])]),a("edit-category-list",{attrs:{db:t.db,ctgid:t.editCtgCtgObj.cid,ctgColor:t.editCtgCtgObj.color,editCtgDcmArr:t.editCtgDcmArr},on:{PTSelectEditCtgDcm:t.selectEditCtgDcm,PTCallswitchLoader:t.$listeners["GPCallswitchLoader"]}})],1),a("edit-foot",{attrs:{btnClass:"ctg",saveFlg:t.saveFlg},on:{PTcloseEdit:t.$listeners["GPcloseEditCtg"],PTsaveEdit:t.setSaveData,PTCallswitchLoader:t.$listeners["GPCallswitchLoader"]}})],1)},ka=[],Ea=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"color"},[a("button",{class:[t.selectCtgColorFlg||t.selectCtgColor?"btnIcon":"btnWord","def","cpr"],attrs:{type:"button"},on:{click:t.switchCtgPalette}},[t.selectCtgColorFlg||t.selectCtgColor?a("span",[a("i")]):a("span",[a("i"),t._v("選択")])]),a("p",{staticClass:"code"},[a("i",{directives:[{name:"show",rawName:"v-show",value:t.selectCtgColor,expression:"selectCtgColor"}],style:{background:t.selectCtgColor}}),t._v(t._s(t.selectCtgColor))]),a("color-picker",{directives:[{name:"show",rawName:"v-show",value:t.selectCtgColorFlg,expression:"selectCtgColorFlg"}],ref:"picker",on:{EXchangeSwatch:t.changeCtgSwatch}})],1)},xa=[],Ma=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"palette"},[a("div",{staticClass:"swatch"},t._l(t.paletteSwatchArr,(function(e,n){return a("a",{key:n,style:{background:t.paletteSwatchArr[n]["color"]},attrs:{"data-pid":n},on:{click:t.selectSwatch}})})),0),a("div",{staticClass:"bar"},t._l(t.paletteBarArr,(function(e,n){return a("a",{key:n,style:{background:t.paletteBarArr[n]["color"]},attrs:{"data-pid":n},on:{click:t.switchPaletteSwatch}})})),0)])},La=[],Sa=(a("25f0"),a("1276"),{name:"ColorPicker",data:function(){return{paletteBarArr:[{color:"#f50f4b"},{color:"#ef15bc"},{color:"#ce37ff"},{color:"#623ae8"},{color:"#095eef"},{color:"#2099e5"},{color:"#11e0c8"},{color:"#10e051"},{color:"#d5ef12"},{color:"#f5da0e"},{color:"#f5810c"},{color:"#f4430d"}],paletteSwatchArr:[]}},methods:{zeroPad:function(t,e){return("0000"+t).slice(-e)},changeHexRgb:function(t){var e=t.slice(1),a=parseInt(e.slice(0,2),16),n=parseInt(e.slice(2,4),16),r=parseInt(e.slice(4,6),16);return[a,n,r]},changeRgbHex:function(t){var e=t.indexOf("rgb")<0?t:t.slice(4,-1).split(","),a=Number(e[0]),n=a>255?255:a<0?0:a,r=this.zeroPad(n.toString(16),2),i=Number(e[1]),c=i>255?255:i<0?0:i,s=this.zeroPad(c.toString(16),2),l=Number(e[2]),o=l>255?255:l<0?0:l,g=this.zeroPad(o.toString(16),2);return"#"+r+s+g},getPaletteSwatch:function(t){this.paletteSwatchArr=[];for(var e=this.changeHexRgb(t||this.paletteBarArr[0].color),a=.1,n=0;n<10;n++)for(var r=255*(10-n)*a,i=e[0]*n*a,c=e[1]*n*a,s=e[2]*n*a,l=0;l<10;l++){var o=255*l*a,g=this.changeRgbHex([Math.ceil(i+r-o),Math.ceil(c+r-o),Math.ceil(s+r-o)]);n&&l<6&&this.paletteSwatchArr.push({color:g})}},switchPaletteSwatch:function(t){var e=t.target,a=Number(e.dataset.pid);this.getPaletteSwatch(this.paletteBarArr[a].color)},selectSwatch:function(t){var e=t.target,a=Number(e.dataset.pid);this.$emit("EXchangeSwatch",this.paletteSwatchArr[a].color)}}}),Ba=Sa,Ga=(a("7def"),Object(u["a"])(Ba,Ma,La,!1,null,"0d88fc40",null)),Va=Ga.exports,Ya={name:"EditCategoryColor",props:{ctgColor:String},components:{ColorPicker:Va},data:function(){return{selectCtgColorFlg:!1,selectCtgColor:this.ctgColor,selectCtgPalette:""}},methods:{switchCtgPalette:function(){this.selectCtgColorFlg=!this.selectCtgColorFlg,this.selectCtgColorFlg&&this.$refs.picker.getPaletteSwatch(this.selectCtgPalette)},changeCtgSwatch:function(t){this.selectCtgColor=t,this.switchCtgPalette(),this.$emit("PTchangeCtgColor",this.selectCtgColor)}}},Ra=Ya,Ia=Object(u["a"])(Ra,Ea,xa,!1,null,null,null),Ha=Ia.exports,Wa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tags"},[a("button",{class:[t.DeditCtgTagArr.length||t.selectTagFlg?"btnIcon":"btnWord","def","tag"],attrs:{type:"button"},on:{click:t.switchFlg}},[t.DeditCtgTagArr.length||t.selectTagFlg?a("span",[a("i")]):a("span",[a("i"),t._v("編集")])]),t.selectTagFlg?a("div",{staticClass:"field"},[a("p",[a("input",{attrs:{type:"text",placeholder:"タグ"},on:{focus:t.suggestTags,keydown:t.suggestTags}}),a("button",{class:["btnWord","def","nml","widSM",t.inputTagFlg?"isNoActive":""],attrs:{type:"button"},on:{click:t.addSelectTag}},[a("span",[t._v("追加")])])]),t.suggestTagArr.length?a("ul",t._l(t.suggestTagArr,(function(e,n){return a("li",{key:n},[a("a",{attrs:{"data-tag":e},on:{click:t.addSelectTag}},[t._v(t._s(e))])])})),0):t._e()]):t._e(),t.DeditCtgTagArr.length?a("div",{staticClass:"area"},[a("ul",t._l(t.DeditCtgTagArr,(function(e,n){return a("li",{key:n},[a("a",{attrs:{"data-tag":e},on:{click:t.remSelectTag}},[t._v(t._s(e))])])})),0)]):t._e()])},za=[],Xa={name:"EditCategoryTags",props:{db:Object,editCtgTagArr:Array},data:function(){return{DeditCtgTagArr:this.editCtgTagArr,selectTagFlg:!1,inputTagFlg:!1,suggestTagArr:[],tagLength:0}},methods:{switchFlg:function(){this.selectTagFlg=!this.selectTagFlg,this.selectTagFlg||(this.suggestTagArr=[])},suggestTags:function(t){var e=this,a=t.target.value;e.suggestTagArr=[],e.db.tag.toArray().then((function(t){if(a){e.inputTagFlg=!0;var n,r=Object(_["a"])(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;e.editCtgTagArr.indexOf(i.head)<0&&i.head.indexOf(a)>-1&&e.suggestTagArr.push(i.head)}}catch(o){r.e(o)}finally{r.f()}}else{var c,s=Object(_["a"])(t);try{for(s.s();!(c=s.n()).done;){var l=c.value;e.editCtgTagArr.indexOf(l.head)<0&&e.suggestTagArr.push(l.head)}}catch(o){s.e(o)}finally{s.f()}e.inputTagFlg=!1,e.tagLength=e.suggestTagArr.length}}))},addSelectTag:function(t){var e=t.target,a=e.dataset.tag,n=a?e.innerText:e.previousElementSibling.value;!n||this.DeditCtgTagArr.indexOf(n)>-1||(this.DeditCtgTagArr.push(n),a||(e.previousElementSibling.value=""),this.suggestTagArr=[],this.$emit("PTselectEditCtgTag",this.DeditCtgTagArr))},remSelectTag:function(t){var e=t.target,a=e.innerText;this.DeditCtgTagArr.splice(this.DeditCtgTagArr.indexOf(a),1),this.$emit("PTselectEditCtgTag",this.DeditCtgTagArr)}}},Ja=Xa,qa=Object(u["a"])(Ja,Wa,za,!1,null,null,null),Ka=qa.exports,Qa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"list"},[a("ul",t._l(t.addremCtgDcmArr,(function(e,n){return a("li",{directives:[{name:"show",rawName:"v-show",value:!(e.cid&&e.cid!=t.ctgid),expression:"!(art.cid&&art.cid!=ctgid)"}],key:n},[a("div",{staticClass:"cardItem"},[e.color?a("i",{style:{color:e.color}}):t._e(),a("h2",[t._v(t._s(e.head))]),a("time",{staticClass:"date"},[t._v(t._s(new Date(e.date).getFullYear())+"年"+t._s(new Date(e.date).getMonth()+1)+"月"+t._s(new Date(e.date).getDate())+"日")]),a("time",{staticClass:"last"},[t._v(t._s(new Date(e.last).getFullYear())+"年"+t._s(new Date(e.last).getMonth()+1)+"月"+t._s(new Date(e.last).getDate())+"日")]),a("p",{attrs:{"data-did":e.did}},[a("button",{class:["btnIcon","def","nml","pls",t.defaultDcmArr.indexOf(e.did)>-1?"isNoActive":""],attrs:{type:"button"},on:{click:t.addDcmArr}},[a("span",[t._v("増加")])]),a("button",{class:["btnIcon","def","nml","mns",t.defaultDcmArr.indexOf(e.did)<0?"isNoActive":""],attrs:{type:"button"},on:{click:t.remDcmArr}},[a("span",[t._v("削減")])])])])])})),0)])},Ua=[],Za={name:"EditCategoryList",props:{db:Object,ctgid:Number,ctgColor:String,editCtgDcmArr:Array},data:function(){return{DeditCtgDcmArr:this.editCtgDcmArr,defaultDcmArr:[],addremCtgDcmArr:[]}},created:function(){this.$emit("PTCallswitchLoader"),this.setDcmArr(),this.getDataDcmPromise()},methods:{setDcmArr:function(){var t,e=Object(_["a"])(this.editCtgDcmArr);try{for(e.s();!(t=e.n()).done;){var a=t.value;this.defaultDcmArr.push(a.did)}}catch(n){e.e(n)}finally{e.f()}},getDataDcm:function(){var t=this;return new Promise((function(e){t.db.dcm.toArray().then((function(a){t.addremCtgDcmArr=a,e(a)}))}))},getDataDcmPromise:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var a,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t,e.next=3,a.getDataDcm();case 3:for(r in n=function(t){var e=a.addremCtgDcmArr[t].cid;e&&a.db.ctg.get({cid:e}).then((function(e){a.$set(a.addremCtgDcmArr[t],"color",e.color)}))},a.addremCtgDcmArr)n(r);t.$emit("PTCallswitchLoader");case 6:case"end":return e.stop()}}),e)})))()},addDcmArr:function(t){var e=this,a=t.target,n=Number(a.parentNode.dataset.did);for(var r in e.db.dcm.get(n).then((function(t){e.DeditCtgDcmArr.push(t)})),e.addremCtgDcmArr){var i=e.addremCtgDcmArr[r].did;i==n&&(e.defaultDcmArr.push(i),e.$set(e.addremCtgDcmArr[r],"color",e.ctgColor))}e.$emit("PTSelectEditCtgDcm",e.defaultDcmArr)},remDcmArr:function(t){var e=t.target,a=Number(e.parentNode.dataset.did);for(var n in this.DeditCtgDcmArr){var r=this.DeditCtgDcmArr[n].did;r==a&&this.DeditCtgDcmArr.splice(n,1)}for(var i in this.addremCtgDcmArr){var c=this.addremCtgDcmArr[i].did;c==a&&this.$set(this.addremCtgDcmArr[i],"color","")}this.defaultDcmArr.splice(this.defaultDcmArr.indexOf(a),1),this.$emit("PTSelectEditCtgDcm",this.defaultDcmArr)}}},tn=Za,en=Object(u["a"])(tn,Qa,Ua,!1,null,null,null),an=en.exports,nn={name:"EditCategoryContainer",props:{db:Object,editCtgDcmArr:Array,editCtgCtgObj:Object,editCtgTagArr:Array},components:{EditCategoryColor:Ha,EditCategoryTags:Ka,EditCategoryList:an,EditFoot:Oa},data:function(){return{DeditCtgDcmArr:[],DeditCtgCtgObj:this.editCtgCtgObj,DeditCtgTagArr:this.editCtgTagArr,EeditCtgCtgColor:this.editCtgCtgObj.color,saveFlg:!0}},created:function(){this.changeEditCtgDcm(this.editCtgDcmArr)},methods:{compileNltoBr:function(t){var e=String(t);return e.replace(/<div>/,"\r\n").replace(/<\/div>/,"")},compileBrtoNl:function(t){var e=String(t);return e.replace(/<br>/,"\r\n")},changeEditCtgHead:function(t){var e=t.target.innerText;this.saveFlg=!(!e||!e.match(/\S/g)),this.DeditCtgCtgObj.head=e&&e.match(/\S/g)?this.compileNltoBr(e):"",t.target.innerText=this.compileBrtoNl(this.DeditCtgCtgObj.head)},changeEditCtgBody:function(t){var e=t.target.innerText;this.DeditCtgCtgObj.body=e&&e.match(/\S/g)?this.compileNltoBr(e):"",t.target.innerText=this.compileBrtoNl(this.DeditCtgCtgObj.body)},changeCtgColor:function(t){this.EeditCtgCtgColor=t},selectEditCtgTag:function(t){var e=t.concat(t);e=new Set(e),this.DeditCtgTagArr=Array.from(e)},changeEditCtgDcm:function(t){var e,a=Object(_["a"])(t);try{for(a.s();!(e=a.n()).done;){var n=e.value;this.DeditCtgDcmArr.push(n.did)}}catch(r){a.e(r)}finally{a.f()}},selectEditCtgDcm:function(t){this.DeditCtgDcmArr=t},setRemDcm:function(t){var e=this;return new Promise((function(a){e.db.dcm.where(t).modify({cid:0}).then((function(){a(!0)}))}))},setAddDcm:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e,r={cid:n.DeditCtgCtgObj.cid},a.next=3,n.setRemDcm(r);case 3:return a.abrupt("return",new Promise((function(e){var a,i=Object(_["a"])(t);try{for(i.s();!(a=i.n()).done;){var c=a.value;n.db.dcm.update(c,r)}}catch(s){i.e(s)}finally{i.f()}e(!0)})));case 4:case"end":return a.stop()}}),a)})))()},setAddremDcmPromise:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.setAddDcm(t);case 2:case"end":return a.stop()}}),a)})))()},setSaveData:function(){var t=this,e=this;e.db.ctg.update(e.DeditCtgCtgObj.cid,{tag:e.DeditCtgTagArr,date:e.DeditCtgCtgObj.date,head:e.DeditCtgCtgObj.head,body:e.DeditCtgCtgObj.body,color:e.EeditCtgCtgColor}).then((function(){e.setAddremDcmPromise(t.DeditCtgDcmArr),e.$parent.setSaveTagPromise(e.DeditCtgTagArr),e.$emit("GPcloseEditCtg",e.DeditCtgCtgObj.cid),e.$emit("GPCallswitchLoader")}))}}},rn=nn,cn=Object(u["a"])(rn,Na,ka,!1,null,null,null),sn=cn.exports,ln={name:"EditContainer",props:{db:Object,editFlg:Boolean,editDcmObj:Object},data:function(){return{editDcmFlg:!1,editDcmDcmObj:{},editDcmCtgObj:{},editDcmTagArr:[],editCtgFlg:!1,editCtgDcmArr:{},editCtgCtgObj:{},editCtgTagArr:[]}},components:{EditDocumentContainer:Pa,EditCategoryContainer:sn},methods:{setEditDcmData:function(t){this.editDcmFlg=!0,this.editDcmDcmObj=t.dcm,this.editDcmCtgObj=t.ctg,this.editDcmTagArr=t.tag},setEditCtgData:function(t){this.editCtgFlg=!0,this.editCtgDcmArr=t.dcm,this.editCtgCtgObj=t.ctg,this.editCtgTagArr=t.tag},closeEditDcm:function(t){this.editDcmFlg=!1,this.editDcmDcmObj={},this.editDcmCtgObj={},this.editDcmTagArr=[],this.$emit("ANcloseEditDcm",t)},closeEditCtg:function(t){this.editCtgFlg=!1,this.editCtgDcmArr=[],this.editCtgCtgObj={},this.editCtgTagArr=[],this.$emit("ANcloseEditCtg",t)},setSaveTag:function(t){var e=[],a=[],n=this;return new Promise((function(r){n.db.tag.toArray().then((function(n){var i,c=Object(_["a"])(n);try{for(c.s();!(i=c.n()).done;){var s=i.value;e.push(s.head)}}catch(d){c.e(d)}finally{c.f()}var l,o=Object(_["a"])(t);try{for(o.s();!(l=o.n()).done;){var g=l.value;e.indexOf(g)<0&&a.push(g)}}catch(d){o.e(d)}finally{o.f()}r(a)}))}))},setSaveTagPromise:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.setSaveTag(t);case 2:n=a.sent,r=n.map((function(t){return{head:t}})),r.length&&e.db.tag.bulkPut(r);case 5:case"end":return a.stop()}}),a)})))()}}},on=ln,gn=(a("acef"),Object(u["a"])(on,ia,ca,!1,null,"40f570f7",null)),dn=gn.exports,un=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.anewFlg?a("div",{staticClass:"anew",attrs:{id:"Anew"}},[t.anewDcmFlg?a("anew-document-container",{attrs:{db:t.db,saveFlg:t.saveFlg},on:{GPCallcloseAnew:t.$listeners["ANcloseAnew"],GPCallswitchLoader:t.$listeners["ANswitchLoader"]}}):t._e(),t.anewCtgFlg?a("anew-category-container",{attrs:{db:t.db,saveFlg:t.saveFlg},on:{GPCallcloseAnew:t.$listeners["ANcloseAnew"],GPCallswitchLoader:t.$listeners["ANswitchLoader"]}}):t._e()],1):t._e()},mn=[],hn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dcm"},[a("div",{staticClass:"content"},[a("div",{staticClass:"head"},[a("div",{attrs:{contenteditable:"true","data-placeholder":"新規作成タイトル"},on:{blur:t.changeAnewDcmHead}})]),a("anew-document-ctgname",{attrs:{db:t.db},on:{PTselectAneDcmCtg:t.selectAnewDcmCtg}}),a("anew-document-tags",{attrs:{db:t.db},on:{PTselectAnewDcmTag:t.selectAnewDcmTag}}),a("div",{staticClass:"body"},[a("div",{attrs:{contenteditable:"true","data-placeholder":"新規作成コンテンツ"},on:{blur:t.changeAnewDcmBody}})])],1),a("anew-foot",{attrs:{btnClass:"dcm",AsaveFlg:t.AsaveFlg},on:{PTCallcloseAnew:t.$listeners["GPCallcloseAnew"],PTsaveAnew:t.setSaveData,PTCallswitchLoader:t.$listeners["GPCallswitchLoader"]}})],1)},Cn=[],vn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"series"},[a("button",{class:[Object.keys(t.anewDcmCtgnameObj).length||t.selectCtgnameFlg?"btnIcon":"btnWord","def","ctg"],attrs:{type:"button"},on:{click:t.switchFlg}},[Object.keys(t.anewDcmCtgnameObj).length||t.selectCtgnameFlg?a("span",[a("i")]):a("span",[a("i"),t._v("編集")])]),Object.keys(t.anewDcmCtgnameObj).length&&!t.selectCtgnameFlg?a("p",{attrs:{"data-sid":t.anewDcmCtgnameObj.cid}},[t._v(t._s(t.anewDcmCtgnameObj.head)),a("button",{staticClass:"icn",attrs:{type:"button"},on:{click:t.remCtgName}},[t._v("消")])]):t._e(),t.selectCtgnameFlg?a("div",{staticClass:"field"},[a("p",[a("input",{attrs:{type:"text",placeholder:"シリーズ"},on:{focus:t.suggestCtgname,keydown:t.suggestCtgname}}),a("button",{class:["btnWord","def","nml","widSM",t.inputCtgnameFlg?"":"isNoActive"],attrs:{type:"button"},on:{click:t.selectCtgname}},[a("span",[t._v("追加")])])]),t.suggestCtgnameArr.length?a("ul",t._l(t.suggestCtgnameArr,(function(e,n){return a("li",{key:n},[a("a",{attrs:{"data-cid":e.cid},on:{click:t.selectCtgname}},[t._v(t._s(e.head))])])})),0):t._e()]):t._e()])},fn=[],wn={name:"AnewDocumentCtgname",props:{db:Object},data:function(){return{selectCtgnameFlg:!1,inputCtgnameFlg:!1,anewDcmCtgnameObj:{},suggestCtgnameArr:[]}},methods:{switchFlg:function(){this.selectCtgnameFlg=!this.selectCtgnameFlg},suggestCtgname:function(t){var e=this,a=t.target.value;e.db.ctg.toArray().then((function(t){if(a){e.suggestCtgnameArr=[],e.inputCtgnameFlg=!0;var n,r=Object(_["a"])(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.head.indexOf(a)>-1&&e.suggestCtgnameArr.push(i)}}catch(c){r.e(c)}finally{r.f()}}else e.suggestCtgnameArr=t,e.inputCtgnameFlg=!1,e.ctgLength=e.suggestCtgnameArr.length}))},selectCtgname:function(t){var e=t.target,a=e.dataset.cid,n=a?Number(e.dataset.cid):this.ctgLength+1,r=a?e.innerText:e.previousElementSibling.value;this.anewDcmCtgnameObj.cid=n,this.anewDcmCtgnameObj.head=r;var i,c=Object(_["a"])(this.suggestCtgnameArr);try{for(c.s();!(i=c.n()).done;){var s=i.value;s.head==r&&(this.anewDcmCtgnameObj=s)}}catch(l){c.e(l)}finally{c.f()}this.suggestCtgnameArr=[],this.selectCtgnameFlg=!1,this.$emit("PTselectAneDcmCtg",this.anewDcmCtgnameObj)},remCtgName:function(){this.anewDcmCtgnameObj={},this.$emit("PTselectAneDcmCtg",this.anewDcmCtgnameObj)}}},Dn=wn,pn=Object(u["a"])(Dn,vn,fn,!1,null,null,null),bn=pn.exports,An=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tags"},[a("button",{class:[t.editDcmTagArr.length||t.selectTagFlg?"btnIcon":"btnWord","def","tag"],attrs:{type:"button"},on:{click:t.switchFlg}},[t.editDcmTagArr.length||t.selectTagFlg?a("span",[a("i")]):a("span",[a("i"),t._v("編集")])]),t.selectTagFlg?a("div",{staticClass:"field"},[a("p",[a("input",{attrs:{type:"text",placeholder:"タグ"},on:{focus:t.suggestTags,keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"delete",[8,46],e.key,["Backspace","Delete","Del"])?null:t.suggestTags(e)}}}),a("button",{staticClass:"btnWord def nml widSM",attrs:{type:"button"},on:{click:t.addSelectTag}},[a("span",[t._v("追加")])])]),t.suggestTagArr.length?a("ul",t._l(t.suggestTagArr,(function(e,n){return a("li",{key:n},[a("a",{attrs:{"data-tag":e},on:{click:t.addSelectTag}},[t._v(t._s(e))])])})),0):t._e()]):t._e(),t.editDcmTagArr.length?a("div",{staticClass:"area"},[a("ul",t._l(t.editDcmTagArr,(function(e,n){return a("li",{key:n},[a("a",{attrs:{"data-tag":e},on:{click:t.remSelectTag}},[t._v(t._s(e))])])})),0)]):t._e()])},Tn=[],_n={name:"AnewDocumentTags",props:{db:Object},data:function(){return{editDcmTagArr:[],selectTagFlg:!1,inputTagFlg:!1,suggestTagArr:[]}},methods:{switchFlg:function(){this.selectTagFlg=!this.selectTagFlg,this.selectTagFlg||(this.suggestTagArr=[])},suggestTags:function(t){var e=this,a=t.target.value;e.suggestTagArr=[],e.db.tag.toArray().then((function(t){if(a){e.inputTagFlg=!0;var n,r=Object(_["a"])(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;e.editDcmTagArr.indexOf(i.head)<0&&i.head.indexOf(a)>-1&&e.suggestTagArr.push(i.head)}}catch(o){r.e(o)}finally{r.f()}}else{var c,s=Object(_["a"])(t);try{for(s.s();!(c=s.n()).done;){var l=c.value;e.editDcmTagArr.indexOf(l.head)<0&&e.suggestTagArr.push(l.head)}}catch(o){s.e(o)}finally{s.f()}e.inputTagFlg=!1}}))},addSelectTag:function(t){var e=t.target,a=e.dataset.tag,n=a?e.innerText:e.previousElementSibling.value;!n||this.editDcmTagArr.indexOf(n)>-1||(this.editDcmTagArr.push(n),a||(e.previousElementSibling.value=""),this.suggestTagArr=[],this.$emit("PTselectAnewDcmTag",this.editDcmTagArr))},remSelectTag:function(t){var e=t.target,a=e.innerText;this.editDcmTagArr.splice(this.editDcmTagArr.indexOf(a),1),console.log(a,this.editDcmTagArr.indexOf(a)),this.$emit("PTselectAnewDcmTag",this.editDcmTagArr)}}},yn=_n,On=Object(u["a"])(yn,An,Tn,!1,null,null,null),jn=On.exports,Fn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"foot"},[a("button",{staticClass:"btnText def nml widLG",attrs:{type:"button"},on:{click:t.callcloseAnew}},[t._m(0)]),a("button",{class:["btnText","def",t.btnClass,"widLG",t.AsaveFlg?"":"isNoActive"],attrs:{type:"button"},on:{click:t.clickSave}},[t._m(1)])])},$n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("span",[t._v("キャンセル")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("i"),t._v("保存")])}],Pn={name:"AnewFoot",props:{btnClass:String,AsaveFlg:Boolean},methods:{callcloseAnew:function(){this.$emit("PTCallcloseAnew")},clickSave:function(){this.$emit("PTCallswitchLoader"),this.$emit("PTsaveAnew")}}},Nn=Pn,kn=Object(u["a"])(Nn,Fn,$n,!1,null,null,null),En=kn.exports,xn={name:"AnewDocumentContainer",props:{db:Object,saveFlg:Boolean},components:{AnewDocumentCtgname:bn,AnewDocumentTags:jn,AnewFoot:En},data:function(){return{anewDcmDcmObj:{},anewDcmCtgObj:{},anewDcmTagArr:[],AsaveFlg:this.saveFlg}},methods:{checkSave:function(t){this.AsaveFlg=!(!t||!t.match(/\S/g))},changeAnewDcmHead:function(t){var e=t.target.innerText;this.checkSave(e),this.anewDcmDcmObj.head=e&&e.match(/\S/g)?this.$parent.compileNltoBr(e):"",t.target.innerText=this.$parent.compileBrtoNl(this.anewDcmDcmObj.head)},changeAnewDcmBody:function(t){var e=t.target.innerText;this.anewDcmDcmObj.body=e&&e.match(/\S/g)?this.$parent.compileNltoBr(e):"",t.target.innerText=this.$parent.compileBrtoNl(this.anewDcmDcmObj.body)},selectAnewDcmCtg:function(t){this.anewDcmCtgObj=t},selectAnewDcmTag:function(t){var e=t.concat(t);e=new Set(e),this.anewDcmTagArr=Array.from(e)},setSaveData:function(){var t=this,e=new Date,a=e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate(),n={date:a,color:"",body:""};t.anewDcmCtgObj.date&&(t.anewDcmCtgObj=Object.assign(t.anewDcmCtgObj,n)),t.db.dcm.add({cid:t.anewDcmCtgObj.cid?t.anewDcmCtgObj.cid:0,tag:t.anewDcmTagArr,date:a,last:a,head:t.anewDcmDcmObj.head,body:t.anewDcmDcmObj.body}).then((function(){t.anewDcmCtgObj.cid&&t.db.ctg.put(t.anewDcmCtgObj),t.$parent.setSaveTagPromise(t.anewDcmTagArr),t.checkSave(),t.$emit("GPCallcloseAnew"),t.$emit("GPCallswitchLoader")})),t.$emit("GPCallswitchLoader")}}},Mn=xn,Ln=Object(u["a"])(Mn,hn,Cn,!1,null,null,null),Sn=Ln.exports,Bn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ctg"},[a("div",{staticClass:"content"},[a("div",{staticClass:"head"},[a("div",{attrs:{contenteditable:"true","data-placeholder":"新規作成カテゴリ"},on:{blur:t.changeAnewCtgHead}})]),a("anew-category-color",{on:{PTchangeCtgColor:t.changeCtgColor}}),a("anew-category-tags",{attrs:{db:t.db},on:{PTselectAnewCtgTag:t.selectAnewCtgTag}}),a("div",{staticClass:"body"},[a("div",{attrs:{contenteditable:"true","data-placeholder":"新規作成コンテンツ"},on:{blur:t.changeAnewCtgBody}})]),a("anew-category-list",{ref:"list",attrs:{db:t.db,ctgColor:t.anewCtgCtgObj.color},on:{PTselectAnewCtgDcm:t.selectAnewCtgDcm,PTCallswitchLoader:t.$listeners["GPCallswitchLoader"]}})],1),a("anew-foot",{attrs:{btnClass:"ctg",AsaveFlg:t.AsaveFlg},on:{PTCallcloseAnew:t.$listeners["GPCallcloseAnew"],PTsaveAnew:t.setSaveData,PTCallswitchLoader:t.$listeners["GPCallswitchLoader"]}})],1)},Gn=[],Vn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"color"},[a("button",{class:[t.selectCtgColorFlg||t.selectCtgColor?"btnIcon":"btnWord","def","cpr"],attrs:{type:"button"},on:{click:t.switchCtgPalette}},[t.selectCtgColorFlg||t.selectCtgColor?a("span",[a("i")]):a("span",[a("i"),t._v("選択")])]),a("p",{staticClass:"code"},[a("i",{directives:[{name:"show",rawName:"v-show",value:t.selectCtgColor,expression:"selectCtgColor"}],style:{background:t.selectCtgColor}}),t._v(t._s(t.selectCtgColor))]),a("color-picker",{directives:[{name:"show",rawName:"v-show",value:t.selectCtgColorFlg,expression:"selectCtgColorFlg"}],ref:"picker",on:{EXchangeSwatch:t.changeCtgSwatch}})],1)},Yn=[],Rn={name:"AnewCategoryColor",components:{ColorPicker:Va},data:function(){return{selectCtgColorFlg:!1,selectCtgColor:"",selectCtgPalette:""}},methods:{switchCtgPalette:function(){this.selectCtgColorFlg=!this.selectCtgColorFlg,this.selectCtgColorFlg&&this.$refs.picker.getPaletteSwatch(this.selectCtgPalette)},changeCtgSwatch:function(t){this.selectCtgColor=t,this.switchCtgPalette(),this.$emit("PTchangeCtgColor",this.selectCtgColor)}}},In=Rn,Hn=Object(u["a"])(In,Vn,Yn,!1,null,null,null),Wn=Hn.exports,zn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tags"},[a("button",{class:[t.anewCtgTagArr.length||t.selectTagFlg?"btnIcon":"btnWord","def","tag"],attrs:{type:"button"},on:{click:t.switchFlg}},[t.anewCtgTagArr.length||t.selectTagFlg?a("span",[a("i")]):a("span",[a("i"),t._v("編集")])]),t.selectTagFlg?a("div",{staticClass:"field"},[a("p",[a("input",{attrs:{type:"text",placeholder:"タグ"},on:{focus:t.suggestTags,keydown:t.suggestTags}}),a("button",{class:["btnWord","def","nml","widSM",t.inputTagFlg?"isNoActive":""],attrs:{type:"button"},on:{click:t.addSelectTag}},[a("span",[t._v("追加")])])]),t.suggestTagArr.length?a("ul",t._l(t.suggestTagArr,(function(e,n){return a("li",{key:n},[a("a",{attrs:{"data-tag":e},on:{click:t.addSelectTag}},[t._v(t._s(e))])])})),0):t._e()]):t._e(),t.anewCtgTagArr.length?a("div",{staticClass:"area"},[a("ul",t._l(t.anewCtgTagArr,(function(e,n){return a("li",{key:n},[a("a",{attrs:{"data-tag":e},on:{click:t.remSelectTag}},[t._v(t._s(e))])])})),0)]):t._e()])},Xn=[],Jn={name:"AnewCategoryTags",props:{db:Object},data:function(){return{anewCtgTagArr:[],selectTagFlg:!1,inputTagFlg:!1,suggestTagArr:[],tagLength:0}},methods:{switchFlg:function(){this.selectTagFlg=!this.selectTagFlg,this.selectTagFlg||(this.suggestTagArr=[])},suggestTags:function(t){var e=this,a=t.target.value;e.suggestTagArr=[],e.db.tag.toArray().then((function(t){if(a){e.inputTagFlg=!0;var n,r=Object(_["a"])(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;e.anewCtgTagArr.indexOf(i.head)<0&&i.head.indexOf(a)>-1&&e.suggestTagArr.push(i.head)}}catch(o){r.e(o)}finally{r.f()}}else{var c,s=Object(_["a"])(t);try{for(s.s();!(c=s.n()).done;){var l=c.value;e.anewCtgTagArr.indexOf(l.head)<0&&e.suggestTagArr.push(l.head)}}catch(o){s.e(o)}finally{s.f()}e.inputTagFlg=!1,e.tagLength=e.suggestTagArr.length}}))},addSelectTag:function(t){var e=t.target,a=e.dataset.tag,n=a?e.innerText:e.previousElementSibling.value;!n||this.anewCtgTagArr.indexOf(n)>-1||(this.anewCtgTagArr.push(n),a||(e.previousElementSibling.value=""),this.suggestTagArr=[],this.$emit("PTselectAnewCtgTag",this.anewCtgTagArr))},remSelectTag:function(t){var e=t.target,a=e.innerText;this.anewCtgTagArr.splice(this.anewCtgTagArr.indexOf(a),1),this.$emit("PTselectAnewCtgTag",this.anewCtgTagArr)}}},qn=Jn,Kn=Object(u["a"])(qn,zn,Xn,!1,null,null,null),Qn=Kn.exports,Un=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"list"},[a("ul",t._l(t.addremCtgDcmArr,(function(e,n){return a("li",{directives:[{name:"show",rawName:"v-show",value:!e.cid,expression:"!art.cid"}],key:n},[a("div",{staticClass:"cardItem"},[e.color?a("i",{style:{color:e.color}}):t._e(),a("h2",[t._v(t._s(e.head))]),a("time",{staticClass:"date"},[t._v(t._s(new Date(e.date).getFullYear())+"年"+t._s(new Date(e.date).getMonth()+1)+"月"+t._s(new Date(e.date).getDate())+"日")]),a("time",{staticClass:"last"},[t._v(t._s(new Date(e.last).getFullYear())+"年"+t._s(new Date(e.last).getMonth()+1)+"月"+t._s(new Date(e.last).getDate())+"日")]),a("p",{attrs:{"data-did":e.did}},[a("button",{class:["btnIcon","def","nml","pls",t.defaultDcmArr.indexOf(e.did)>-1?"isNoActive":""],attrs:{type:"button"},on:{click:t.addDcmArr}},[a("span",[t._v("増加")])]),a("button",{class:["btnIcon","def","nml","mns",t.defaultDcmArr.indexOf(e.did)<0?"isNoActive":""],attrs:{type:"button"},on:{click:t.remDcmArr}},[a("span",[t._v("削減")])])])])])})),0)])},Zn=[],tr={name:"AnewCategoryList",props:{db:Object},data:function(){return{ctgColor:"",anewCtgDcmArr:[],defaultDcmArr:[],addremCtgDcmArr:[]}},created:function(){this.$emit("PTCallswitchLoader"),this.getDataDcmPromise()},methods:{setctgColor:function(t){this.ctgColor=t},getDataDcm:function(){var t=this;return new Promise((function(e){t.db.dcm.toArray().then((function(a){t.addremCtgDcmArr=a,e(a)}))}))},getDataDcmPromise:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var a,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t,e.next=3,a.getDataDcm();case 3:for(r in n=function(t){var e=a.addremCtgDcmArr[t].cid;e&&a.db.ctg.get({cid:e}).then((function(e){a.$set(a.addremCtgDcmArr[t],"color",e.color)}))},a.addremCtgDcmArr)n(r);t.$emit("PTCallswitchLoader");case 6:case"end":return e.stop()}}),e)})))()},addDcmArr:function(t){var e=this,a=t.target,n=Number(a.parentNode.dataset.did);for(var r in e.db.dcm.get(n).then((function(t){e.anewCtgDcmArr.push(t)})),e.addremCtgDcmArr){var i=e.addremCtgDcmArr[r].did;i==n&&(e.defaultDcmArr.push(i),e.$set(e.addremCtgDcmArr[r],"color",e.ctgColor))}e.$emit("PTselectAnewCtgDcm",e.defaultDcmArr)},remDcmArr:function(t){var e=t.target,a=Number(e.parentNode.dataset.did);for(var n in this.anewCtgDcmArr){var r=this.anewCtgDcmArr[n].did;r==a&&this.anewCtgDcmArr.splice(n,1)}for(var i in this.addremCtgDcmArr){var c=this.addremCtgDcmArr[i].did;c==a&&this.$set(this.addremCtgDcmArr[i],"color","")}this.defaultDcmArr.splice(this.defaultDcmArr.indexOf(a),1),this.$emit("PTselectAnewCtgDcm",this.defaultDcmArr)}}},er=tr,ar=Object(u["a"])(er,Un,Zn,!1,null,null,null),nr=ar.exports,rr={name:"AnewCategoryContainer",props:{db:Object,saveFlg:Boolean},components:{AnewCategoryColor:Wn,AnewCategoryTags:Qn,AnewCategoryList:nr,AnewFoot:En},data:function(){return{anewCtgDcmArr:[],anewCtgCtgObj:{},anewCtgTagArr:[],AsaveFlg:this.saveFlg}},methods:{checkSave:function(t){this.AsaveFlg=!(!t||!t.match(/\S/g))},changeAnewCtgHead:function(t){var e=t.target.innerText;this.checkSave(e),this.anewCtgCtgObj.head=e&&e.match(/\S/g)?"":this.$parent.compileNltoBr(e),t.target.innerText=this.$parent.compileBrtoNl(this.anewCtgCtgObj.head)},changeAnewCtgBody:function(t){var e=t.target.innerText;this.anewCtgCtgObj.body=e&&e.match(/\S/g)?"":this.$parent.compileNltoBr(e),t.target.innerText=this.$parent.compileBrtoNl(this.anewCtgCtgObj.body)},changeCtgColor:function(t){console.log(t,this.anewCtgCtgObj),this.$set(this.anewCtgCtgObj,"color",t),this.$refs.list.setctgColor(t)},selectAnewCtgTag:function(t){var e=t.concat(t);e=new Set(e),this.anewCtgTagArr=Array.from(e)},selectAnewCtgDcm:function(t){this.anewCtgDcmArr=t},setCngetCtgid:function(){var t=this,e={head:t.anewCtgCtgObj.head};return new Promise((function(a){t.db.ctg.get(e).then((function(t){a(Number(t.cid))}))}))},setAddDcm:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var n,r,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e,a.next=3,n.setCngetCtgid();case 3:return r=a.sent,i={cid:r},a.abrupt("return",new Promise((function(e){var a,r=Object(_["a"])(t);try{for(r.s();!(a=r.n()).done;){var c=a.value;n.db.dcm.update(c,i)}}catch(s){r.e(s)}finally{r.f()}e(!0)})));case 6:case"end":return a.stop()}}),a)})))()},setAddremDcmPromise:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.setAddDcm(t);case 2:case"end":return a.stop()}}),a)})))()},setSaveData:function(){var t=this,e=new Date,a=e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate();t.db.ctg.add({tag:t.anewCtgTagArr,date:a,head:t.anewCtgCtgObj.head,body:t.anewCtgCtgObj.body,color:t.anewCtgCtgObj.color}).then((function(){t.setAddremDcmPromise(t.anewCtgDcmArr),t.$parent.setSaveTagPromise(t.anewCtgTagArr),t.checkSave(),t.$emit("GPCallcloseAnew"),t.$emit("GPCallswitchLoader")}))}}},ir=rr,cr=Object(u["a"])(ir,Bn,Gn,!1,null,null,null),sr=cr.exports,lr={name:"AnewContainer",props:{db:Object,anewFlg:Boolean},data:function(){return{anewDcmFlg:!1,anewCtgFlg:!1,saveFlg:!1}},components:{AnewDocumentContainer:Sn,AnewCategoryContainer:sr},methods:{compileNltoBr:function(t){var e=String(t);return e.replace(/<div>/,"\r\n").replace(/<\/div>/,"")},compileBrtoNl:function(t){var e=String(t);return e.replace(/<br>/,"\r\n")},setAnew:function(t){this.anewDcmFlg="dcm"==t,this.anewCtgFlg="ctg"==t,this.saveFlg=!1},setSaveTag:function(t){var e=[],a=[],n=this;return new Promise((function(r){n.db.tag.toArray().then((function(n){var i,c=Object(_["a"])(n);try{for(c.s();!(i=c.n()).done;){var s=i.value;e.push(s.head)}}catch(d){c.e(d)}finally{c.f()}var l,o=Object(_["a"])(t);try{for(o.s();!(l=o.n()).done;){var g=l.value;e.indexOf(g)<0&&a.push(g)}}catch(d){o.e(d)}finally{o.f()}r(a)}))}))},setSaveTagPromise:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.setSaveTag(t);case 2:n=a.sent,r=n.map((function(t){return{head:t}})),r.length&&e.db.tag.bulkPut(r);case 5:case"end":return a.stop()}}),a)})))()}}},or=lr,gr=(a("bfc0"),Object(u["a"])(or,un,mn,!1,null,"652cc0a9",null)),dr=gr.exports,ur=n["a"].extend({name:"App",data:function(){return{loaderFlg:!0,dialogFlg:!1,dialogBtnClass:"",dbName:"netamemoDB",db:"",dbData:[],now:"",nowTime:0,current:"",currentYear:0,currentMonth:0,currentDates:[],changeMonthList:{},changeMonthBtnFlg:!1,changeMonthFlg:!1,menuListBtnFlg:!0,menuListFlg:!1,markDate:0,postsFlg:!1,viewFlg:!1,editFlg:!1,currentField:"",anewFlg:!1}},components:{LoaderContainer:h,DialogContainer:p,CalendarContainer:U,MenuContainer:Ft,PostsContainer:Ut,ViewContainer:ra,EditContainer:dn,AnewContainer:dr},created:function(){this.checkDevice(),this.setToday(),this.createDB(),this.createTable(),this.markDate=this.now.getDate(),this.switchLoader()},methods:{checkDevice:function(){var t=navigator.userAgent.toLowerCase();t.indexOf("iphone")>0||t.indexOf("ipod")>0||t.indexOf("android")>0&&t.indexOf("mobile")>0||t.indexOf("ipad")>0||t.indexOf("android")>0?this.deviceType="isTD":this.deviceType="isMD"},compileArrtoArr:function(t){var e=new Set(t);return Array.from(e)},compileNltoBr:function(t){var e=String(t);return e.replace(/<div>/,"\r\n").replace(/<\/div>/,"")},compileBrtoNl:function(t){var e=String(t);return e.replace(/<br>/,"\r\n")},zeroPad:function(t,e){return("0000"+t).slice(-e)},getCurrentDates:function(t,e){return new Date(parseInt(t,10),parseInt(e+1,10),0).getDate()},sortASC:function(t){return function(e,a){return e[t]<a[t]?-1:e[t]>a[t]?1:0}},sortDESC:function(t){return function(e,a){return e[t]>a[t]?-1:e[t]<a[t]?1:0}},createDB:function(){this.db=new s["a"](this.dbName)},createTable:function(){this.db.version(1).stores({dcm:"++did, cid, tag, date, last, head, body",ctg:"++cid, tag, date, color, head, body",tag:"++gid, head"})},addDataDcm:function(){this.db.dcm.put({cid:0,tag:["日暮らし"],date:"2020/10/10",last:"2020/10/25",head:"徒然なるまゝに",body:"つれづれなるまゝに、日暮らし、硯にむかひて、心にうつりゆくよしなし事を、そこはかとなく書きつくれば、あやしうこそものぐるほしけれ。つれづれなるまゝに、日暮らし、硯にむかひて、心にうつりゆくよしなし事を、そこはかとなく書きつくれば、あやしうこそものぐるほしけれ。"}),this.db.dcm.put({cid:1,tag:["徒然","日暮らし"],date:"2020/10/20",last:"2020/10/21",head:"日暮らし",body:"いでや、この世に生れては、願はしかるべき事こそ多かンめれ。<br>御門(みかど)の御位は、いともかしこし。竹の園生(そのふ)の、末葉(すゑば)まで人間の種ならぬぞ、やんごとなき。一(いち)の人の御有様はさらなり、たゞ人(びと)も、舎人(とねり)など給はるきはは、ゆゝしと見ゆ。その子・孫(むまご)までは、はふれにたれど、なほなまめかし。それより下(しも)つかたは、ほどにつけつゝ、時にあひ、したり顔なるも、みづからはいみじと思ふらめど、いとくちをし。"}),this.db.dcm.put({cid:2,tag:[],date:"2020/10/30",last:"2020/10/30",head:"硯にむかひて",body:"因幡国(いなばのくに)に、何の入道とかやいふ者の娘、かたちよしと聞きて、人あまた言ひわたりけれども、この娘、たゞ、栗をのみ食ひて、更に、米(よね)の類を食はざりれば、「かゝる異様(ことやう)の者、人に見ゆべきにあらず」とて、親許さざりけり。"}),this.db.dcm.put({cid:2,tag:["硯"],date:"2020/10/31",last:"2020/10/31",head:"因幡国",body:"因幡国(いなばのくに)に、何の入道とかやいふ者の娘、かたちよしと聞きて、人あまた言ひわたりけれども、この娘、たゞ、栗をのみ食ひて、更に、米(よね)の類を食はざりれば、「かゝる異様(ことやう)の者、人に見ゆべきにあらず」とて、親許さざりけり。"})},addDataCtg:function(){this.db.ctg.put({tag:["徒然","日暮らし"],date:"2020/10/22",color:"#fdcfdb",head:"心にうつりゆく",body:"公世(きんよ)の二位にゐのせうとに、良覚僧正(りやうがくそうじやう)と聞えしは、極(きは)めて腹あしき人なりけり。"}),this.db.ctg.put({tag:["硯"],date:"2020/10/20",color:"#145c8a",head:"よしなし事を",body:"能(のう)をつかんとする人、「よくせざらんほどは、なまじひに人に知(し)られじ。うちうちよく習ひ得(え)て、さし出(い)でたらんこそ、いと心にくからめ」と常に言ふめれど、かく言ふ人、一芸も習(なら)ひ得(う)ることなし。"})},addDataTag:function(){this.db.tag.put({head:"日暮らし"}),this.db.tag.put({head:"徒然"}),this.db.tag.put({head:"硯"})},switchLoader:function(){this.loaderFlg=!this.loaderFlg,console.log(this.loaderFlg)},setToday:function(){this.now=new Date,this.now=new Date(this.now.getFullYear(),this.now.getMonth(),this.now.getDate()),this.nowTime=this.now.getTime(),this.setCurrent({year:this.now.getFullYear(),month:this.now.getMonth()})},setCurrent:function(t){this.current=new Date(t.year,t.month),this.currentYear=this.current.getFullYear(),this.currentMonth=this.current.getMonth()},setCalendarData:function(t){this.currentDates=t},setChangeMonth:function(t){this.changeMonthList=Object.assign(t),this.changeMonthBtnFlg=!!Object.keys(this.changeMonthList).length},switchChangeMonth:function(){this.menuListBtnFlg=!!this.changeMonthFlg,this.changeMonthFlg=!this.changeMonthFlg},switchMenuList:function(){this.changeMonthBtnFlg=!(!this.menuListFlg||!Object.keys(this.changeMonthList).length),this.menuListFlg=!this.menuListFlg},openPosts:function(t){this.markDate=t.date,this.$refs.posts.setPostsData(this.markDate),this.postsFlg=!0,this.switchLoader()},closePosts:function(){this.postsFlg=!1},openViewDcm:function(t){this.$refs.view.setDcmData(Number(t),!0),this.viewFlg=!0,this.switchLoader()},openViewCtg:function(t){this.$refs.view.setCtgData(Number(t),!0),this.viewFlg=!0,this.switchLoader()},closeView:function(){this.viewFlg=!this.viewFlg},openEditDcm:function(t){console.log(t),this.$refs.edit.setEditDcmData(t),this.editFlg=!0,this.switchLoader()},openEditCtg:function(t){this.$refs.edit.setEditCtgData(t),this.editFlg=!0,this.switchLoader()},closeEditDcm:function(t){this.editFlg=!1,this.postsFlg&&this.$refs.posts.setPostsData(this.markDate),t&&this.viewFlg&&this.$refs.view.setDcmData(Number(t),!0),this.$refs.calendar.setCalendar(),this.$refs.menu.setMenuData()},closeEditCtg:function(t){this.editFlg=!1,this.postsFlg&&this.$refs.posts.setPostsData(this.markDate),t&&this.viewFlg&&this.$refs.view.setCtgData(Number(t),!0),this.$refs.calendar.setCalendar(),this.$refs.menu.setMenuData()},openAnewDcm:function(){this.$refs.anew.setAnew("dcm"),this.anewFlg=!0},openAnewCtg:function(){this.$refs.anew.setAnew("ctg"),this.anewFlg=!0},closeAnew:function(){this.anewFlg=!1,this.$refs.calendar.setCalendar(),this.$refs.menu.setMenuData()},switchDialog:function(){this.dialogFlg=!this.dialogFlg},closeDialog:function(){var t=document.getElementsByClassName("isRemove")[0];t.classList.remove("isRemove"),this.dialogBtnClass="",this.switchDialog()},confirmRem:function(t){this.switchDialog(),this.dialogBtnClass=t},removeItem:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=document.getElementsByClassName("isRemove")[0],n=a.dataset.did?"dcm":"ctg","dcm"!=n){e.next=6;break}return e.next=4,t.removeDcm(Number(a.dataset.did));case 4:e.next=8;break;case 6:return e.next=8,t.setRemoveCtg(Number(a.dataset.cid));case 8:t.postsFlg&&t.$refs.posts.setPostsData(t.markDate),t.viewFlg&&t.closeView(),t.switchDialog(),t.$refs.calendar.setCalendar(),t.$refs.menu.setMenuData(),t.switchLoader();case 14:case"end":return e.stop()}}),e)})))()},removeDcm:function(t){var e=this;return new Promise((function(a){e.db.dcm.delete(t).then((function(){a(!0)}))}))},removeCtg:function(t){var e=this;return new Promise((function(a){e.db.dcm.where(t).modify({cid:0}).then((function(){a(!0)}))}))},setRemoveCtg:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e,a.next=3,n.removeCtg({cid:t});case 3:return a.abrupt("return",new Promise((function(e){n.db.ctg.delete(t).then((function(){e(!0)}))})));case 4:case"end":return a.stop()}}),a)})))()}},computed:{}}),mr=ur,hr=(a("034f"),Object(u["a"])(mr,r,i,!1,null,null,null)),Cr=hr.exports;n["a"].config.productionTip=!1,new n["a"]({render:function(t){return t(Cr)}}).$mount("#app")},"59db":function(t,e,a){},6181:function(t,e,a){},"63a5":function(t,e,a){},"791f":function(t,e,a){},"7def":function(t,e,a){"use strict";var n=a("63a5"),r=a.n(n);r.a},"85ec":function(t,e,a){},"908f":function(t,e,a){"use strict";var n=a("6181"),r=a.n(n);r.a},a0d9:function(t,e,a){},acef:function(t,e,a){"use strict";var n=a("59db"),r=a.n(n);r.a},bfc0:function(t,e,a){"use strict";var n=a("0e9a"),r=a.n(n);r.a},dd40:function(t,e,a){"use strict";var n=a("791f"),r=a.n(n);r.a}});
//# sourceMappingURL=app.6b10b408.js.map