(function(t){function e(e){for(var a,s,c=e[0],o=e[1],l=e[2],d=0,u=[];d<c.length;d++)s=c[d],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&u.push(r[s][0]),r[s]=0;for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(t[a]=o[a]);g&&g(e);while(u.length)u.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],a=!0,c=1;c<n.length;c++){var o=n[c];0!==r[o]&&(a=!1)}a&&(i.splice(e--,1),t=s(s.s=n[0]))}return t}var a={},r={app:0},i=[];function s(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=a,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(n,a,function(e){return t[e]}.bind(null,a));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],o=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var g=o;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var a=n("85ec"),r=n.n(a);r.a},"04e7":function(t,e,n){"use strict";var a=n("374c"),r=n.n(a);r.a},"0e9a":function(t,e,n){},"131e":function(t,e,n){},"374c":function(t,e,n){},"40e1":function(t,e,n){},"46e3":function(t,e,n){"use strict";var a=n("a0d9"),r=n.n(a);r.a},"4a8f":function(t,e,n){"use strict";var a=n("131e"),r=n.n(a);r.a},"530f":function(t,e,n){"use strict";var a=n("40e1"),r=n.n(a);r.a},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:[t.deviceType],attrs:{id:"App"}},[n("calendar-container",{ref:"calendar",attrs:{db:t.db,currentYYMM:{year:t.currentYear,month:t.currentMonth},changeMonthBtnFlg:t.changeMonthBtnFlg,changeMonthFlg:t.changeMonthFlg},on:{ANsetCalendarData:t.setCalendarData,ANsetChangeMonth:t.setChangeMonth,ANsetCurrent:t.setCurrent,ANswitchChangeMonth:t.switchChangeMonth,ANopenPosts:t.openPosts,ANopenAnewDcm:t.openAnewDcm,ANopenAnewCtg:t.openAnewCtg,ANswitchLoader:t.switchLoader}}),n("menu-container",{ref:"menu",attrs:{menuListBtnFlg:t.menuListBtnFlg,menuListFlg:t.menuListFlg,dcmNewArr:t.dcmNewArr,dcmEdtArr:t.dcmEdtArr},on:{ANaccordionNext:t.accordionNext,ANopenViewDcm:t.openViewDcm,ANopenPostsDcmAllData:t.openPostsDcmAllData,ANopenPostsCtgAllData:t.openPostsCtgAllData,ANopenSearchTags:t.openSearchTags,ANswitchMenuList:t.switchMenuList,ANshownLoader:t.shownLoader}}),n("posts-container",{ref:"posts",attrs:{db:t.db,currentYYMM:{year:t.currentYear,month:t.currentMonth},postsFlg:t.postsFlg,postsHead:t.postsHead},on:{ANclosePosts:t.closePosts,ANopenEditDcm:t.openEditDcm,ANopenEditCtg:t.openEditCtg,ANopenViewDcm:t.openViewDcm,ANopenViewCtg:t.openViewCtg,ANconfirmRem:t.confirmRem,ANswitchLoader:t.switchLoader}}),n("view-container",{ref:"view",attrs:{db:t.db,viewFlg:t.viewFlg},on:{ANopenViewDcm:t.openViewDcm,ANopenEditDcm:t.openEditDcm,ANopenEditCtg:t.openEditCtg,ANconfirmRem:t.confirmRem,ANcloseView:t.closeView,ANswitchLoader:t.switchLoader}}),n("edit-container",{ref:"edit",attrs:{db:t.db,editFlg:t.editFlg},on:{ANcloseEditDcm:t.closeEditDcm,ANcloseEditCtg:t.closeEditCtg,ANswitchLoader:t.switchLoader}}),n("anew-container",{ref:"anew",attrs:{db:t.db,anewFlg:t.anewFlg},on:{ANcloseAnew:t.closeAnew,ANswitchLoader:t.switchLoader}}),n("search-container",{attrs:{db:t.db},on:{ANopenPosts:t.openPosts}}),t.dialogFlg?n("dialog-container",{attrs:{btnClass:t.dialogBtnClass},on:{ANcloseDialog:t.closeDialog,ANremoveItem:t.removeItem,ANswitchLoader:t.switchLoader}}):t._e(),t.loaderFlg?n("loader-container"):t._e()],1)},i=[],s=(n("a630"),n("c975"),n("d81d"),n("fb6a"),n("a9e3"),n("b64b"),n("d3b7"),n("ac1f"),n("6062"),n("3ca3"),n("5319"),n("ddb0"),n("96cf"),n("1da1")),c=n("b85c"),o=n("4dec"),l=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},g=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"loader",attrs:{id:"Loader"}},[n("div",[n("div"),n("div"),n("div"),n("div")])])}],d={name:"LoaderContainer"},u=d,m=(n("dd40"),n("2877")),h=Object(m["a"])(u,l,g,!1,null,"571dbb7c",null),C=h.exports,f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"dialog",attrs:{id:"Dialog"}},[n("div",{staticClass:"content"},[n("p",[t._v("選択したデータを削除しますか？")]),n("p",[n("button",{class:["btnText","def",t.btnClass,"rem","widMD"],attrs:{type:"button"},on:{click:t.removeItem}},[t._m(0)]),n("button",{staticClass:"btnText def nml widMD",attrs:{type:"button"},on:{click:t.closeDialog}},[t._m(1)])])])])},v=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[n("i"),t._v("削除")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[n("span",[t._v("キャンセル")])])}],w={name:"DialogContainer",props:{btnClass:String},methods:{closeDialog:function(){this.$emit("ANcloseDialog")},removeItem:function(){this.$emit("ANswitchLoader"),this.$emit("ANremoveItem")}}},D=w,b=(n("908f"),Object(m["a"])(D,f,v,!1,null,null,null)),p=b.exports,A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"calendar",attrs:{id:"Calendar"}},[n("calendar-head",{attrs:{currentYYMM:t.currentYYMM,changeMonthBtnFlg:t.changeMonthBtnFlg},on:{GPCallswitchChangeMonth:t.$listeners["ANswitchChangeMonth"]}}),n("calendar-change",{attrs:{currentYYMM:t.currentYYMM,changeMonthFlg:t.changeMonthFlg,changeMonthObj:t.changeMonthObj},on:{GPCallsetCurrent:t.$listeners["ANsetCurrent"]}}),n("calendar-body",{attrs:{currentDates:t.currentDates,currentFirstDay:t.currentFirstDay},on:{GPsetPostsData:t.setPostsData,GPCallswitchLoader:t.$listeners["ANswitchLoader"]}}),n("footer",{staticClass:"footer"},[n("calendar-foot-button",{attrs:{btnStr:"新規作成",btnCls:"dcm"},on:{GPCallopenAnewDcm:t.$listeners["ANopenAnewDcm"]}}),n("calendar-foot-button",{attrs:{btnStr:"新規作成",btnCls:"ctg"},on:{GPCallopenAnewCtg:t.$listeners["ANopenAnewCtg"]}})],1)],1)},T=[],y=(n("99af"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",{staticClass:"head"},[n("button",{class:["btnIcon","def","nml","cng",t.changeMonthBtnFlg?"":"isNoActive"],attrs:{type:"button"},on:{click:function(e){return t.onClick()}}},[n("span",[t._v("替")])]),n("h1",[t._v(t._s(t.currentYYMM.year)+"年"+t._s(t.currentYYMM.month+1)+"月")])])}),O=[],_={name:"CalendarHead",props:{currentYYMM:Object,changeMonthBtnFlg:Boolean},methods:{onClick:function(){this.$emit("GPCallswitchChangeMonth")}}},j=_,F=Object(m["a"])(j,y,O,!1,null,null,null),P=F.exports,$=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["change",t.changeMonthFlg?"isShown":""]},[n("ul",t._l(t.changeMonthObj,(function(e,a,r){return n("li",{key:r},[n("a",{class:t.currentYYMM.year==a.slice(0,4)&&t.currentYYMM.month+1==a.slice(5)?"isCurrent":"",attrs:{"data-year":a.slice(0,4),"data-month":a.slice(5)},on:{click:t.callsetCurrent}},[n("i",[t._v("右")]),n("strong",[t._v(t._s(a.slice(0,4))+"年"+t._s(a.slice(5))+"月")]),n("span",{staticClass:"dcm"},[t._v(t._s(e.did.length))]),n("span",{staticClass:"ctg"},[t._v(t._s(e.cid.length))])])])})),0)])},N=[],x={name:"CalendarChange",props:{currentYYMM:Object,changeMonthFlg:Boolean,changeMonthObj:Object},methods:{callsetCurrent:function(t){var e=t.target,n=Number(e.dataset.year),a=Number(e.dataset.month)-1;this.$emit("GPCallsetCurrent",{year:n,month:a})}}},E=x,S=Object(m["a"])(E,$,N,!1,null,null,null),k=S.exports,M=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"body"},[n("div",{staticClass:"month"},t._l(t.currentDates,(function(e,a){return n("div",{key:a,staticClass:"day"},[e.dcm.length||e.ctg.length?n("a",{staticClass:"content",attrs:{"data-date":e.date},on:{click:t.setPostsData}},[e.dcm.length?n("p",{staticClass:"dcm"},[t._v("記")]):t._e(),e.ctg.length?n("p",{staticClass:"ctg"},[t._v("類")]):t._e()]):t._e(),e.date?n("div",{staticClass:"index"},[t._v(t._s(e.number))]):t._e()])})),0)])},L=[],B={name:"CalendarBody",props:{currentDates:Array,currentFirstDay:Number},methods:{setPostsData:function(t){var e=t.target,n=Number(e.dataset.date);this.$emit("GPCallswitchLoader"),this.$emit("GPsetPostsData",n)}}},G=B,R=Object(m["a"])(G,M,L,!1,null,null,null),V=R.exports,Y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{class:["btnText","def",t.btnCls,"widLG"],attrs:{type:"button"},on:{click:t.checkClick}},[n("span",[n("i"),t._v(t._s(t.btnStr))])])},I=[],H={name:"CalendarFootButton",props:{btnStr:String,btnCls:String},methods:{callopenAnewDcm:function(){this.$emit("GPCallopenAnewDcm")},callopenAnewCtg:function(){this.$emit("GPCallopenAnewCtg")},checkClick:function(){switch(this.btnCls){case"dcm":this.$emit("GPCallopenAnewDcm");break;case"ctg":this.$emit("GPCallopenAnewCtg");break}}}},W=H,z=Object(m["a"])(W,Y,I,!1,null,null,null),X=z.exports,J={name:"CalendarContainer",props:{db:Object,currentYYMM:Object,changeMonthBtnFlg:Boolean,changeMonthFlg:Boolean},data:function(){return{weekLen:7,currentFirstDay:0,currentDatesCnt:0,currentWeeks:0,currentDates:[],changeMonthObj:{},setpostsArr:[]}},components:{CalendarHead:P,CalendarChange:k,CalendarBody:V,CalendarFootButton:X},created:function(){this.setCalendar(this.currentYYMM)},methods:{setCalendar:function(t){this.changeMonthObj={},this.currentFirstDay=new Date(t.year,t.month).getDay(),this.currentDatesCnt=this.$parent.getCurrentDates(t.year,t.month),this.currentWeeks=Math.ceil((this.currentFirstDay+this.currentDatesCnt)/7),this.currentDates=this.setCalendarArr(t),this.setDataCtg(t)},setCalendarArr:function(t){for(var e=[],n=0;n<this.currentWeeks;n++)for(var a=0;a<this.weekLen;a++){var r=void 0,i=!n&&a<this.currentFirstDay?null:n*this.weekLen+(a+1)-this.currentFirstDay,s=new Date(t.year,t.month,i).getTime();i=i&&this.currentDatesCnt<i?null:i,r={date:i,number:i?this.$parent.zeroPad(i,2):null,time:s,dcm:[],ctg:[],ddid:[]},e.push(r)}return e},setDataDcm:function(t,e){var n=this;return new Promise((function(a){n.db.dcm.toArray().then((function(r){var i,s=Object(c["a"])(r);try{for(s.s();!(i=s.n()).done;){var o=i.value,l=o.date,g=new Date(l).getFullYear(),d=new Date(l).getMonth()+1,u=g+"-"+d;if(t<=l&&l<e){var m=new Date(l).getDate()+n.currentFirstDay-1;n.currentDates[m].dcm.push(o.did),n.currentDates[m].dcm=n.$parent.compileArrtoArr(n.currentDates[m].dcm),n.currentDates[m].ddid.push(o.did),n.currentDates[m].ddid=n.$parent.compileArrtoArr(n.currentDates[m].ddid)}n.changeMonthObj[u]||n.$set(n.changeMonthObj,u,{did:[],cid:[]}),n.changeMonthObj[u].did.push(o.did),n.changeMonthObj[u].did=n.$parent.compileArrtoArr(n.changeMonthObj[u].did)}}catch(h){s.e(h)}finally{s.f()}a(!0)}))}))},setDataCtg:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var a,r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e,r=new Date(t.year,t.month).getTime(),i=new Date(t.year,t.month+1).getTime(),n.next=3,e.setDataDcm(r,i);case 3:a.db.ctg.toArray().then((function(t){var e,n=Object(c["a"])(t);try{for(n.s();!(e=n.n()).done;){var s=e.value,o=s.date,l=new Date(o).getFullYear(),g=new Date(o).getMonth()+1,d=l+"-"+g;if(r<=o&&o<i){var u=new Date(o).getDate()+a.currentFirstDay-1;a.currentDates[u].ctg.indexOf(s.cid)<0&&a.currentDates[u].ctg.push(s.cid)}a.changeMonthObj[d]||a.$set(a.changeMonthObj,d,{did:[],cid:[]}),a.changeMonthObj[d].cid.push(s.cid),a.changeMonthObj[d].cid=a.$parent.compileArrtoArr(a.changeMonthObj[d].cid)}}catch(m){n.e(m)}finally{n.f()}a.$emit("ANsetCalendarData",a.currentDates),a.$emit("ANsetChangeMonth",a.changeMonthObj)}));case 4:case"end":return n.stop()}}),n)})))()},getCtgData:function(t){var e=[],n={},a=this;return new Promise((function(r){a.db.ctg.toArray().then((function(i){var s,o=Object(c["a"])(i);try{for(o.s();!(s=o.n()).done;){var l=s.value;l.date==t&&e.push(l),a.$set(n,l.cid,l)}}catch(g){o.e(g)}finally{o.f()}r({one:e,all:n})}))}))},setPostsData:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var a,r,i,s,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=[],r=e,i="".concat(e.currentYYMM.year,"年").concat(e.currentYYMM.month+1,"月").concat(t,"日"),s=new Date(e.currentYYMM.year,e.currentYYMM.month,t).getTime(),n.next=6,e.getCtgData(s);case 6:o=n.sent,r.db.dcm.where({date:s}).toArray().then((function(e){var n,s=Object(c["a"])(e);try{for(s.s();!(n=s.n()).done;){var l=n.value,g=l.cid&&o["all"][l.cid].color?o["all"][l.cid].color:"";r.$set(l,"color",g),a.push(l)}}catch(d){s.e(d)}finally{s.f()}r.setpostsArr=a.concat(o.one),r.setpostsArr=r.$parent.compileArrtoArr(r.setpostsArr),r.$emit("ANopenPosts",r.setpostsArr,i,t)}));case 8:case"end":return n.stop()}}),n)})))()}}},q=J,K=(n("04e7"),Object(m["a"])(q,A,T,!1,null,null,null)),Q=K.exports,U=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"menu",attrs:{id:"Menu"}},[n("ul",{class:["list",t.menuListFlg?"isShown":""]},[n("menu-button",{attrs:{btnStr:t.dcmStr,btnCls:"dcm"},on:{GPCallopenPostsDcmAllData:t.$listeners["ANopenPostsDcmAllData"],GPCallswitchMenuList:t.$listeners["ANswitchMenuList"],GPCallshownLoader:t.$listeners["ANshownLoader"]}}),n("menu-button",{attrs:{btnStr:t.ctgStr,btnCls:"ctg"},on:{GPCallopenPostsCtgAllData:t.$listeners["ANopenPostsCtgAllData"],GPCallswitchMenuList:t.$listeners["ANswitchMenuList"],GPCallshownLoader:t.$listeners["ANshownLoader"]}}),t._e(),n("menu-button",{attrs:{btnStr:t.tagStr,btnCls:"tag"},on:{GPCallopenSearchTags:t.$listeners["ANopenSearchTags"],GPCallswitchMenuList:t.$listeners["ANswitchMenuList"],GPCallshownLoader:t.$listeners["ANshownLoader"]}}),n("menu-accordion",{attrs:{listArr:t.dcmNewArr,listStr:"最近新規作成したテキスト",listCls:"hst"},on:{GPCallaccordionNext:t.$listeners["ANaccordionNext"],GPCallopenView:t.$listeners["ANopenViewDcm"],GPCallswitchMenuList:t.$listeners["ANswitchMenuList"],GPCallshownLoader:t.$listeners["ANshownLoader"]}}),n("menu-accordion",{attrs:{listArr:t.dcmEdtArr,listStr:"最近編集したテキスト",listCls:"edt"},on:{GPCallaccordionNext:t.$listeners["ANaccordionNext"],GPCallopenView:t.$listeners["ANopenViewDcm"],GPCallswitchMenuList:t.$listeners["ANswitchMenuList"],GPCallshownLoader:t.$listeners["ANshownLoader"]}})],1),n("menu-switch",{attrs:{menuStr:"メニュー",menuListBtnFlg:t.menuListBtnFlg},on:{GPCallswitchMenuList:t.$listeners["ANswitchMenuList"]}})],1)},Z=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a",{staticClass:"listItem sch trs"},[n("span",[t._v("フリーワード検索")])])}],tt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",[n("a",{class:["listItem",t.btnCls,"trs"],on:{click:t.checkClick}},[n("span",[t._v(t._s(t.btnStr))])])])},et=[],nt={name:"MenuButton",props:{btnStr:String,btnCls:String},methods:{checkClick:function(){switch(this.$emit("GPCallshownLoader"),this.$emit("GPCallswitchMenuList"),this.btnCls){case"dcm":this.$emit("GPCallopenPostsDcmAllData",this.btnStr);break;case"ctg":this.$emit("GPCallopenPostsCtgAllData",this.btnStr);break;case"tag":this.$emit("GPCallopenSearchTags",this.btnStr);break}}}},at=nt,rt=Object(m["a"])(at,tt,et,!1,null,null,null),it=rt.exports,st=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",[n("a",{class:["listItem",t.listCls,"acc",t.listArr.length?"":"isNoActive"],on:{click:t.callaccordionNext}},[n("span",[t._v(t._s(t.listStr))])]),t.listArr.length?n("ul",{staticClass:"child"},t._l(t.listArr,(function(e,a){return n("li",{key:a},[n("a",{staticClass:"listItem trs",attrs:{"data-did":e.did},on:{click:t.callopenView}},[n("p",[t._v(t._s(e.head))])])])})),0):t._e()])},ct=[],ot={name:"MenuAccordion",props:{listArr:Array,listStr:String,listCls:String},methods:{callaccordionNext:function(t){this.$emit("GPCallaccordionNext",t)},callopenView:function(t){var e=t.target,n=Number(e.dataset.did);this.$emit("GPCallshownLoader"),this.$emit("GPCallopenView",n),this.$emit("GPCallswitchMenuList")}}},lt=ot,gt=Object(m["a"])(lt,st,ct,!1,null,null,null),dt=gt.exports,ut=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{class:["btnIcon","def","nml","menuList",t.menuListBtnFlg?"":"isNoActive"],attrs:{type:"button"},on:{click:t.switchMenuList}},[n("span",[t._v(t._s(t.menuStr))])])},mt=[],ht={name:"MenuSwitch",props:{menuStr:String,menuListBtnFlg:Boolean},methods:{switchMenuList:function(){this.$emit("GPCallswitchMenuList")}}},Ct=ht,ft=Object(m["a"])(Ct,ut,mt,!1,null,null,null),vt=ft.exports,wt={name:"MenuContainer",props:{menuListBtnFlg:Boolean,menuListFlg:Boolean,dcmNewArr:Array,dcmEdtArr:Array},data:function(){return{dcmStr:"テキスト一覧",ctgStr:"カテゴリ一覧",tagStr:"タグ検索"}},components:{MenuButton:it,MenuAccordion:dt,MenuSwitch:vt}},Dt=wt,bt=(n("4a8f"),Object(m["a"])(Dt,U,Z,!1,null,null,null)),pt=bt.exports,At=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.postsFlg?n("div",{staticClass:"posts",attrs:{id:"Posts"}},[n("div",{staticClass:"content"},[t.sortPostsArr.length?n("ul",{staticClass:"list"},t._l(t.sortPostsArr,(function(e,a){return n("li",{key:a},[n("div",{staticClass:"cardItem"},[e.cid?n("i",{style:{color:e.color}}):t._e(),n("h2",[t._v(t._s(e.head))]),n("time",{staticClass:"date"},[t._v(t._s(new Date(e.date).getFullYear())+"年"+t._s(new Date(e.date).getMonth()+1)+"月"+t._s(new Date(e.date).getDate())+"日")]),e.did?n("time",{staticClass:"last"},[t._v(t._s(new Date(e.last).getFullYear())+"年"+t._s(new Date(e.last).getMonth()+1)+"月"+t._s(new Date(e.last).getDate())+"日")]):t._e(),n("p",{attrs:{"data-did":e.did?e.did:0,"data-cid":e.did?0:e.cid}},[n("button",{class:["btnIcon","def",e.did?"dcm":"ctg","edt"],attrs:{type:"button"},on:{click:t.openEdit}},[n("span",[t._v("編集")])]),n("button",{class:["btnIcon","def",e.did?"dcm":"ctg","viw"],attrs:{type:"button"},on:{click:t.openView}},[n("span",[t._v("確認")])]),n("button",{class:["btnIcon","def",e.did?"dcm":"ctg","rem"],attrs:{type:"button"},on:{click:t.confirmRem}},[n("span",[t._v("削除")])])])])])})),0):n("p",{staticClass:"note"},[t._v("登録されていません。")])]),n("div",{staticClass:"head"},[n("h1",[t._v(t._s(t.postsHead))])]),n("button",{staticClass:"icn",attrs:{type:"button"},on:{click:t.callclosePosts}},[t._v("消")])]):t._e()},Tt=[],yt={name:"PostsContainer",props:{db:Object,postsFlg:Boolean,postsHead:String,currentYYMM:Object},data:function(){return{sortPostsArr:[]}},methods:{compileBrtoNl:function(t){var e=String(t);return e.replace(/<br>/,"\r\n")},setPosts:function(t){this.sortPostsArr=t||this.sortPostsArr},callclosePosts:function(){this.$emit("ANclosePosts")},openEdit:function(t){var e=t.target,n=Number(e.parentNode.dataset.did)?"dcm":"ctg",a="dcm"==n?e.parentNode.dataset.did:e.parentNode.dataset.cid;this.$emit("GPCallswitchLoader"),"dcm"==n?this.openEditDcm(a):this.openEditCtg(a)},getDataCtg:function(t){var e=this;return new Promise((function(n){e.db.ctg.get(t).then((function(t){n(t)}))}))},openEditDcm:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var a,r,i,s,o,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:a=e,r=Number(t),i={dcm:{},ctg:{},tag:[]},s=Object(c["a"])(a.sortPostsArr),n.prev=3,s.s();case 5:if((o=s.n()).done){n.next=20;break}if(l=o.value,l.did!=r){n.next=18;break}if(i.dcm=l,i.dcm.body=a.compileBrtoNl(l.body),i.tag=l.tag,l.cid){n.next=14;break}return a.$emit("ANopenEditDcm",i),n.abrupt("return");case 14:return n.next=16,a.getDataCtg(l.cid);case 16:i.ctg=n.sent,a.$emit("ANopenEditDcm",i);case 18:n.next=5;break;case 20:n.next=25;break;case 22:n.prev=22,n.t0=n["catch"](3),s.e(n.t0);case 25:return n.prev=25,s.f(),n.finish(25);case 28:case"end":return n.stop()}}),n,null,[[3,22,25,28]])})))()},getDataDcm:function(t){var e=this;return new Promise((function(n){e.db.dcm.where({cid:t}).toArray().then((function(t){n(t)}))}))},openEditCtg:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var a,r,i,s,o,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:a=e,r=Number(t),i={dcm:[],ctg:{},tag:[]},s=Object(c["a"])(a.sortPostsArr),n.prev=3,s.s();case 5:if((o=s.n()).done){n.next=17;break}if(l=o.value,l.cid!=r){n.next=15;break}return i.ctg=l,i.ctg.body=a.compileBrtoNl(l.body),i.tag=l.tag,n.next=13,a.getDataDcm(l.cid);case 13:i.dcm=n.sent,a.$emit("ANopenEditCtg",i);case 15:n.next=5;break;case 17:n.next=22;break;case 19:n.prev=19,n.t0=n["catch"](3),s.e(n.t0);case 22:return n.prev=22,s.f(),n.finish(22);case 25:case"end":return n.stop()}}),n,null,[[3,19,22,25]])})))()},openView:function(t){var e=t.target,n=Number(e.parentNode.dataset.did)?"dcm":"ctg",a=Number("dcm"==n?e.parentNode.dataset.did:e.parentNode.dataset.cid);this.$emit("GPCallswitchLoader"),"dcm"==n?this.$emit("ANopenViewDcm",a):this.$emit("ANopenViewCtg",a)},confirmRem:function(t){var e=t.target,n=Number(e.parentNode.dataset.did)?"dcm":"ctg";e.parentNode.classList.add("isRemove"),this.$emit("ANconfirmRem",n)}}},Ot=yt,_t=(n("46e3"),Object(m["a"])(Ot,At,Tt,!1,null,null,null)),jt=_t.exports,Ft=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.viewFlg?n("div",{staticClass:"view",attrs:{id:"View"}},[t.viewDcmFlg?n("view-document-container",{attrs:{viewClass:"dcm"==t.frontFlg&&t.viewCtgFlg?"front":"",viewDcmDcmObj:t.viewDcmDcmObj,viewDcmCtgObj:t.viewDcmCtgObj,viewDcmTagArr:t.viewDcmTagArr,viewDcmBody:t.viewDcmBody},on:{GPCallopenEditDcm:t.$listeners["ANopenEditDcm"],GPCallconfirmRem:t.$listeners["ANconfirmRem"],GPcloseViewDcm:t.closeViewDcm,GPCallswitchLoader:t.$listeners["ANswitchLoader"]}}):t._e(),t.viewCtgFlg?n("view-category-container",{attrs:{viewClass:"ctg"==t.frontFlg&&t.viewDcmFlg?"front":"",viewCtgCtgObj:t.viewCtgCtgObj,viewCtgDcmArr:t.viewCtgDcmArr,viewCtgTagArr:t.viewCtgTagArr,viewCtgBody:t.viewCtgBody},on:{GPCallopenViewDcm:t.$listeners["ANopenViewDcm"],GPCallopenEditCtg:t.$listeners["ANopenEditCtg"],GPCallconfirmRem:t.$listeners["ANconfirmRem"],GPcloseViewCtg:t.closeViewCtg,GPCallswitchLoader:t.$listeners["ANswitchLoader"]}}):t._e()],1):t._e()},Pt=[],$t=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["dcm",t.viewClass]},[n("view-document-content",{attrs:{viewDcmHead:t.viewDcmDcmObj.head,viewDcmBody:t.viewDcmBody}}),t.viewDcmDcmObj.cid?n("view-document-ctgname",{attrs:{viewDcmCtgId:t.viewDcmCtgObj.cid,viewDcmCtgName:t.viewDcmCtgObj.head,viewDcmCtgColor:t.viewDcmCtgObj.color}}):t._e(),t.viewDcmDcmObj.tag.length?n("view-document-tags",{attrs:{viewDcmTagArr:t.viewDcmTagArr}}):t._e(),n("view-foot",{attrs:{btnClass:"dcm",id:t.viewDcmDcmObj.did},on:{PTcallopenEdit:t.callopenEditDcm,PTCallconfirmRem:t.$listeners["GPCallconfirmRem"],PTCallswitchLoader:t.$listeners["GPCallswitchLoader"]}}),n("button",{staticClass:"icn",attrs:{type:"button"},on:{click:t.closeViewDcm}},[t._v("消")])],1)},Nt=[],xt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content"},[n("div",{staticClass:"head"},[n("div",[t._v(t._s(t.viewDcmHead))])]),n("div",{staticClass:"body"},[n("div",[t._v(t._s(t.viewDcmBody))])])])},Et=[],St={name:"ViewDocumentContent",props:{viewDcmHead:String,viewDcmBody:String}},kt=St,Mt=Object(m["a"])(kt,xt,Et,!1,null,null,null),Lt=Mt.exports,Bt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"series",attrs:{"data-cid":t.viewDcmCtgId}},[n("i",{style:{color:t.viewDcmCtgColor}}),n("p",[t._v(t._s(t.viewDcmCtgName))])])},Gt=[],Rt={name:"ViewDocumentCtgname",props:{viewDcmCtgId:Number,viewDcmCtgName:String,viewDcmCtgColor:String}},Vt=Rt,Yt=Object(m["a"])(Vt,Bt,Gt,!1,null,null,null),It=Yt.exports,Ht=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tag"},[n("p",{class:t.tagFlg?"isShown":""},t._l(t.viewDcmTagArr,(function(e,a){return n("span",{key:a,attrs:{"data-tag":e}},[t._v(t._s(e))])})),0),n("button",{staticClass:"icn tag",attrs:{type:"button"},on:{click:t.switchTag}},[t._v("箋")])])},Wt=[],zt={name:"ViewDocumentTags",props:{viewDcmTagArr:Array},data:function(){return{tagFlg:!1}},methods:{switchTag:function(){this.tagFlg=!this.tagFlg}}},Xt=zt,Jt=Object(m["a"])(Xt,Ht,Wt,!1,null,null,null),qt=Jt.exports,Kt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"foot",attrs:{"data-did":"dcm"==t.btnClass?t.id:0,"data-cid":"ctg"==t.btnClass?t.id:0}},[n("button",{class:["btnText","def",t.btnClass,"edt","widLG"],attrs:{type:"button"},on:{click:t.callopenEdit}},[t._m(0)]),n("button",{staticClass:"btnText def nml rem widLG",attrs:{type:"button"},on:{click:t.callconfirmRem}},[t._m(1)])])},Qt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[n("i"),t._v("編集")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[n("i"),t._v("削除")])}],Ut={name:"ViewFoot",props:{btnClass:String,id:Number},methods:{callopenEdit:function(){this.$emit("PTCallswitchLoader"),this.$emit("PTcallopenEdit")},callconfirmRem:function(t){var e=t.target;e.parentNode.classList.add("isRemove"),this.$emit("PTCallconfirmRem",this.btnClass)}}},Zt=Ut,te=Object(m["a"])(Zt,Kt,Qt,!1,null,null,null),ee=te.exports,ne={name:"ViewDocumentContainer",props:{viewClass:String,viewDcmDcmObj:Object,viewDcmCtgObj:Object,viewDcmTagArr:Array,viewDcmBody:String},components:{ViewDocumentContent:Lt,ViewDocumentCtgname:It,ViewDocumentTags:qt,ViewFoot:ee},methods:{callopenEditDcm:function(){this.viewDcmDcmObj.body=this.viewDcmBody;var t={dcm:this.viewDcmDcmObj,ctg:this.viewDcmCtgObj,tag:this.viewDcmTagArr};this.$emit("GPCallopenEditDcm",t)},closeViewDcm:function(){this.$emit("GPcloseViewDcm")}}},ae=ne,re=Object(m["a"])(ae,$t,Nt,!1,null,null,null),ie=re.exports,se=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["ctg",t.viewClass]},[n("view-category-content",{attrs:{viewCtgHead:t.viewCtgCtgObj.head,viewCtgBody:t.viewCtgBody,viewCtgDcmArr:t.viewCtgDcmArr,viewCtgColor:t.viewCtgCtgObj.color},on:{PTCallopenViewDcm:t.$listeners["GPCallopenViewDcm"]}}),n("view-category-ctgname",{attrs:{viewCtgCtgId:t.viewCtgCtgObj.cid,viewCtgCtgName:t.viewCtgCtgObj.head,viewCtgCtgColor:t.viewCtgCtgObj.color}}),t.viewCtgCtgObj.tag?n("view-category-tags",{attrs:{viewCtgTagArr:t.viewCtgTagArr}}):t._e(),n("view-foot",{attrs:{btnClass:"ctg",id:t.viewCtgCtgObj.cid},on:{PTcallopenEdit:t.callopenEditCtg,PTCallconfirmRem:t.$listeners["GPCallconfirmRem"],PTCallswitchLoader:t.$listeners["GPCallswitchLoader"]}}),n("button",{staticClass:"icn",attrs:{type:"button"},on:{click:t.closeViewCtg}},[t._v("消")])],1)},ce=[],oe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content"},[n("div",{staticClass:"head"},[n("div",[t._v(t._s(t.viewCtgHead))])]),n("div",{staticClass:"body"},[n("div",[t._v(t._s(t.viewCtgBody))])]),n("div",{staticClass:"list"},[t.viewCtgDcmArr.length?n("ul",t._l(t.viewCtgDcmArr,(function(e,a){return n("li",{key:a},[n("div",{staticClass:"cardItem"},[n("i",{style:{color:t.viewCtgColor}}),n("h2",[t._v(t._s(e.head))]),n("time",{staticClass:"date"},[t._v(t._s(new Date(e.date).getFullYear())+"年"+t._s(new Date(e.date).getMonth()+1)+"月"+t._s(new Date(e.date).getDate())+"日")]),n("time",{staticClass:"last"},[t._v(t._s(new Date(e.last).getFullYear())+"年"+t._s(new Date(e.last).getMonth()+1)+"月"+t._s(new Date(e.last).getDate())+"日")]),n("p",{attrs:{"data-did":e.did}},[n("button",{staticClass:"btnIcon def dcm viw",attrs:{type:"button"},on:{click:t.callopenViewDcm}},[n("span",[t._v("確認")])])])])])})),0):n("p",[t._v("登録されていません。")])])])},le=[],ge={name:"ViewCategoryContent",props:{viewCtgHead:String,viewCtgBody:String,viewCtgDcmArr:Array,viewCtgColor:String},methods:{callopenViewDcm:function(t){var e=t.target,n=Number(e.parentNode.dataset.did);this.$emit("PTCallopenViewDcm",n)}}},de=ge,ue=Object(m["a"])(de,oe,le,!1,null,null,null),me=ue.exports,he=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"series",attrs:{"data-cid":t.viewCtgCtgId}},[n("i",{style:{color:t.viewCtgCtgColor}}),n("p",[t._v(t._s(t.viewCtgCtgName))])])},Ce=[],fe={name:"ViewCategoryCtgname",props:{viewCtgCtgId:Number,viewCtgCtgName:String,viewCtgCtgColor:String}},ve=fe,we=Object(m["a"])(ve,he,Ce,!1,null,null,null),De=we.exports,be=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tag"},[n("p",{class:t.tagFlg?"isShown":""},t._l(t.viewCtgTagArr,(function(e,a){return n("span",{key:a,attrs:{"data-tag":e}},[t._v(t._s(e))])})),0),n("button",{staticClass:"icn tag",attrs:{type:"button"},on:{click:t.switchTag}},[t._v("箋")])])},pe=[],Ae={name:"ViewCategoryTags",props:{viewCtgTagArr:Array},data:function(){return{tagFlg:!1}},methods:{switchTag:function(){this.tagFlg=!this.tagFlg}}},Te=Ae,ye=Object(m["a"])(Te,be,pe,!1,null,null,null),Oe=ye.exports,_e={name:"ViewCategoryContainer",props:{viewClass:String,viewCtgCtgObj:Object,viewCtgDcmArr:Array,viewCtgTagArr:Array,viewCtgBody:String},components:{ViewCategoryContent:me,ViewCategoryCtgname:De,ViewCategoryTags:Oe,ViewFoot:ee},methods:{callopenEditCtg:function(){var t={ctg:this.viewCtgCtgObj,dcm:this.viewCtgDcmArr,tag:this.viewCtgTagArr};this.$emit("GPCallopenEditCtg",t)},closeViewCtg:function(){this.$emit("GPcloseViewCtg")}}},je=_e,Fe=Object(m["a"])(je,se,ce,!1,null,null,null),Pe=Fe.exports,$e={name:"ViewContainer",props:{db:Object,viewFlg:Boolean},data:function(){return{frontFlg:"",viewDcmFlg:!1,viewDcmDcmObj:{},viewDcmCtgObj:{},viewDcmTagArr:[],viewDcmBody:"",viewCtgFlg:!1,viewCtgCtgObj:{},viewCtgDcmArr:[],viewCtgTagArr:[],viewCtgBody:""}},components:{ViewDocumentContainer:ie,ViewCategoryContainer:Pe},methods:{compileBrtoNl:function(t){var e=String(t);return e.replace(/<br>/,"\r\n")},getDcmData:function(t){var e=this;return new Promise((function(n){e.db.dcm.get(t).then((function(t){n(t)}))}))},setDcmData:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e,n.next=3,a.getDcmData(t);case 3:r=n.sent,r.cid&&a.db.ctg.get(r.cid).then((function(t){a.viewDcmCtgObj=t})),a.viewDcmDcmObj=r,a.viewDcmBody=a.compileBrtoNl(r.body),a.viewDcmTagArr=r.tag,a.viewDcmFlg=!0,a.frontFlg="dcm";case 10:case"end":return n.stop()}}),n)})))()},getCtgDataDcm:function(t){var e=this;return new Promise((function(n){e.db.dcm.where(t).toArray().then((function(t){n(t)}))}))},setCtgData:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e,r={cid:t},n.next=3,a.getCtgDataDcm(r);case 3:a.viewCtgDcmArr=n.sent,a.db.ctg.get(r).then((function(t){a.viewCtgCtgObj=t,a.viewCtgBody=a.compileBrtoNl(t.body),a.viewCtgTagArr=t.tag,a.viewCtgFlg=!0,a.frontFlg="ctg"}));case 5:case"end":return n.stop()}}),n)})))()},checkCloseView:function(){this.viewDcmFlg||this.viewCtgFlg||(this.frontFlg="",this.$emit("ANcloseView"))},closeViewDcm:function(){this.viewDcmDcmObj={},this.viewDcmFlg=!1,this.frontFlg="ctg",this.checkCloseView()},closeViewCtg:function(){this.viewCtgCtgObj={},this.viewCtgFlg=!1,this.frontFlg="dcm",this.checkCloseView()}}},Ne=$e,xe=(n("f9fa"),Object(m["a"])(Ne,Ft,Pt,!1,null,"756586df",null)),Ee=xe.exports,Se=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.editFlg?n("div",{staticClass:"edit",attrs:{id:"Edit"}},[t.editDcmFlg?n("edit-document-container",{attrs:{db:t.db,editDcmDcmObj:t.editDcmDcmObj,editDcmCtgObj:t.editDcmCtgObj,editDcmTagArr:t.editDcmTagArr},on:{GPcloseEditDcm:t.closeEditDcm,GPCallswitchLoader:t.$listeners["ANswitchLoader"]}}):t._e(),t.editCtgFlg?n("edit-category-container",{attrs:{db:t.db,editCtgDcmArr:t.editCtgDcmArr,editCtgCtgObj:t.editCtgCtgObj,editCtgTagArr:t.editCtgTagArr},on:{GPcloseEditCtg:t.closeEditCtg,GPCallswitchLoader:t.$listeners["ANswitchLoader"]}}):t._e()],1):t._e()},ke=[],Me=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"dcm",attrs:{"data-did":t.editDcmDcmObj.did}},[n("div",{staticClass:"content"},[n("div",{staticClass:"head"},[n("div",{attrs:{contenteditable:"true"},on:{blur:t.changeEditDcmHead}},[t._v(t._s(t.editDcmDcmObj.head))])]),n("edit-document-ctgname",{attrs:{db:t.db,editDcmCtgObj:t.editDcmCtgObj},on:{PTselectEditDcmCtg:t.selectEditDcmCtg}}),n("edit-document-tags",{attrs:{db:t.db,editDcmTagArr:t.editDcmTagArr},on:{PTselectEditDcmTag:t.selectEditDcmTag}}),n("div",{staticClass:"body"},[n("div",{attrs:{contenteditable:"true"},on:{blur:t.changeEditDcmBody}},[t._v(t._s(t.editDcmDcmObj.body))])])],1),n("edit-foot",{attrs:{btnClass:"dcm",saveFlg:t.saveFlg},on:{PTcloseEdit:t.$listeners["GPcloseEditDcm"],PTsaveEdit:t.setSaveData,PTCallswitchLoader:t.$listeners["GPCallswitchLoader"]}})],1)},Le=[],Be=(n("466d"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"series"},[n("button",{class:[Object.keys(t.DeditDcmCtgObj).length||t.selectCtgnameFlg?"btnIcon":"btnWord","def","ctg"],attrs:{type:"button"},on:{click:t.switchFlg}},[Object.keys(t.DeditDcmCtgObj).length||t.selectCtgnameFlg?n("span",[n("i")]):n("span",[n("i"),t._v("編集")])]),Object.keys(t.DeditDcmCtgObj).length&&!t.selectCtgnameFlg?n("p",{attrs:{"data-cid":t.DeditDcmCtgObj.cid}},[t._v(" "+t._s(t.DeditDcmCtgObj.head)+" "),n("button",{staticClass:"icn",attrs:{type:"button"},on:{click:t.remCtgName}},[t._v("消")])]):t._e(),t.selectCtgnameFlg?n("div",{staticClass:"field"},[n("p",[n("input",{attrs:{type:"text",placeholder:"シリーズ"},on:{focus:t.suggestCtgName,keydown:t.suggestCtgName,paste:t.pasteCtgname}}),n("button",{class:["btnWord","def","nml","widSM",t.inputCtgnameFlg?"":"isNoActive"],attrs:{type:"button"},on:{click:t.selectCtgName}},[n("span",[t._v("追加")])])]),t.suggestCtgnameArr.length?n("ul",t._l(t.suggestCtgnameArr,(function(e,a){return n("li",{key:a},[n("a",{attrs:{"data-cid":e.cid},on:{click:t.selectCtgName}},[t._v(t._s(e.head))])])})),0):t._e()]):t._e()])}),Ge=[],Re={name:"EditDocumentCtgname",props:{db:Object,editDcmCtgObj:Object},data:function(){return{DeditDcmCtgObj:this.editDcmCtgObj,selectCtgnameFlg:!1,inputCtgnameFlg:!1,suggestCtgnameArr:[],ctgLength:0}},methods:{switchFlg:function(){this.selectCtgnameFlg=!this.selectCtgnameFlg},pasteCtgname:function(){this.inputCtgnameFlg=!0},suggestCtgName:function(t){var e=this,n=t.target.value;e.db.ctg.toArray().then((function(t){if(n){e.suggestCtgnameArr=[],e.inputCtgnameFlg=!0;var a,r=Object(c["a"])(t);try{for(r.s();!(a=r.n()).done;){var i=a.value;i.head.indexOf(n)>-1&&e.suggestCtgnameArr.push(i)}}catch(s){r.e(s)}finally{r.f()}}else e.suggestCtgnameArr=t,e.inputCtgnameFlg=!1,e.ctgLength=e.suggestCtgnameArr.length}))},selectCtgName:function(t){var e=t.target,n=e.dataset.cid,a=n?Number(e.dataset.cid):this.ctgLength+1,r=n?e.innerText:e.previousElementSibling.value;this.DeditDcmCtgObj.cid=a,this.DeditDcmCtgObj.head=r;var i,s=Object(c["a"])(this.suggestCtgnameArr);try{for(s.s();!(i=s.n()).done;){var o=i.value;o.head==r&&(this.DeditDcmCtgObj=o)}}catch(l){s.e(l)}finally{s.f()}this.suggestCtgnameArr=[],this.selectCtgnameFlg=!1,this.$emit("PTselectEditDcmCtg",this.DeditDcmCtgObj)},remCtgName:function(){this.DeditDcmCtgObj={},this.$emit("PTselectEditDcmCtg",this.DeditDcmCtgObj)}}},Ve=Re,Ye=Object(m["a"])(Ve,Be,Ge,!1,null,null,null),Ie=Ye.exports,He=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tags"},[n("button",{class:[t.DeditDcmTagArr.length||t.selectTagFlg?"btnIcon":"btnWord","def","tag"],attrs:{type:"button"},on:{click:t.switchFlg}},[t.DeditDcmTagArr.length||t.selectTagFlg?n("span",[n("i")]):n("span",[n("i"),t._v("編集")])]),t.selectTagFlg?n("div",{staticClass:"field"},[n("p",[n("input",{attrs:{type:"text",placeholder:"タグ"},on:{focus:t.suggestTags,keydown:t.suggestTags}}),n("button",{staticClass:"btnWord def nml widSM",attrs:{type:"button"},on:{click:t.addSelectTag}},[n("span",[t._v("追加")])])]),t.suggestTagArr.length?n("ul",t._l(t.suggestTagArr,(function(e,a){return n("li",{key:a},[n("a",{attrs:{"data-tag":e},on:{click:t.addSelectTag}},[t._v(t._s(e))])])})),0):t._e()]):t._e(),t.DeditDcmTagArr.length?n("div",{staticClass:"area"},[n("ul",t._l(t.DeditDcmTagArr,(function(e,a){return n("li",{key:a},[n("a",{attrs:{"data-tag":e},on:{click:t.remSelectTag}},[t._v(t._s(e))])])})),0)]):t._e()])},We=[],ze=(n("a434"),{name:"EditDocumentTags",props:{db:Object,editDcmTagArr:Array},data:function(){return{DeditDcmTagArr:this.editDcmTagArr,selectTagFlg:!1,inputTagFlg:!1,suggestTagArr:[]}},methods:{switchFlg:function(){this.selectTagFlg=!this.selectTagFlg,this.selectTagFlg||(this.suggestTagArr=[])},suggestTags:function(t){var e=this,n=t.target.value;e.suggestTagArr=[],e.db.tag.toArray().then((function(t){if(n){e.inputTagFlg=!0;var a,r=Object(c["a"])(t);try{for(r.s();!(a=r.n()).done;){var i=a.value;e.editDcmTagArr.indexOf(i.head)<0&&i.head.indexOf(n)>-1&&e.suggestTagArr.push(i.head)}}catch(g){r.e(g)}finally{r.f()}}else{var s,o=Object(c["a"])(t);try{for(o.s();!(s=o.n()).done;){var l=s.value;e.editDcmTagArr.indexOf(l.head)<0&&e.suggestTagArr.push(l.head)}}catch(g){o.e(g)}finally{o.f()}e.inputTagFlg=!1}}))},addSelectTag:function(t){var e=t.target,n=e.dataset.tag,a=n?e.innerText:e.previousElementSibling.value;!a||this.DeditDcmTagArr.indexOf(a)>-1||(this.DeditDcmTagArr.push(a),n||(e.previousElementSibling.value=""),this.suggestTagArr=[],this.$emit("PTselectEditDcmTag",this.DeditDcmTagArr))},remSelectTag:function(t){var e=t.target,n=e.innerText;this.DeditDcmTagArr.splice(this.DeditDcmTagArr.indexOf(n),1),this.$emit("PTselectEditDcmTag",this.DeditDcmTagArr)}}}),Xe=ze,Je=Object(m["a"])(Xe,He,We,!1,null,null,null),qe=Je.exports,Ke=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"foot"},[n("button",{staticClass:"btnText def nml widLG",attrs:{type:"button"},on:{click:t.closeEdit}},[t._m(0)]),n("button",{class:["btnText","def",t.btnClass,"widLG",t.saveFlg?"":"isNoActive"],attrs:{type:"button"},on:{click:t.clickSave}},[t._m(1)])])},Qe=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[n("span",[t._v("キャンセル")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[n("i"),t._v("保存")])}],Ue={name:"EditFoot",props:{btnClass:String,saveFlg:Boolean},methods:{closeEdit:function(){this.$emit("PTcloseEdit")},clickSave:function(){this.$emit("PTCallswitchLoader"),this.$emit("PTsaveEdit")}}},Ze=Ue,tn=Object(m["a"])(Ze,Ke,Qe,!1,null,null,null),en=tn.exports,nn={name:"EditDocumentContainer",props:{db:Object,editDcmDcmObj:Object,editDcmCtgObj:Object,editDcmTagArr:Array},components:{EditDocumentCtgname:Ie,EditDocumentTags:qe,EditFoot:en},data:function(){return{DeditDcmDcmObj:this.editDcmDcmObj,DeditDcmCtgObj:this.editDcmCtgObj,DeditDcmTagArr:this.editDcmTagArr,saveFlg:!0}},methods:{compileNltoBr:function(t){var e=String(t);return e.replace(/<div>/,"\r\n").replace(/<\/div>/,"")},compileBrtoNl:function(t){var e=String(t);return e.replace(/<br>/,"\r\n")},changeEditDcmHead:function(t){var e=t.target.innerText;this.saveFlg=!(!e||!e.match(/\S/g)),this.DeditDcmDcmObj.head=e&&e.match(/\S/g)?this.compileNltoBr(e):"",t.target.innerText=this.compileBrtoNl(this.DeditDcmDcmObj.head)},changeEditDcmBody:function(t){var e=t.target.innerText;this.DeditDcmDcmObj.body=e&&e.match(/\S/g)?this.compileNltoBr(e):"",t.target.innerText=this.compileBrtoNl(this.DeditDcmDcmObj.body)},selectEditDcmCtg:function(t){this.DeditDcmCtgObj=t},selectEditDcmTag:function(t){var e=t.concat(t);e=new Set(e),this.DeditDcmTagArr=Array.from(e)},setSaveData:function(){var t=this,e=new Date,n=new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime(),a={date:n,color:"",body:""};t.DeditDcmCtgObj.date&&(t.DeditDcmCtgObj=Object.assign(t.DeditDcmCtgObj,a)),t.db.dcm.update(t.DeditDcmDcmObj.did,{cid:t.DeditDcmCtgObj.cid?t.DeditDcmCtgObj.cid:0,tag:t.DeditDcmTagArr,date:t.DeditDcmDcmObj.date,last:n,head:t.DeditDcmDcmObj.head,body:t.DeditDcmDcmObj.body}).then((function(){t.DeditDcmCtgObj.cid&&t.db.ctg.put(t.DeditDcmCtgObj),t.$parent.setSaveTagPromise(t.DeditDcmTagArr),t.$emit("GPcloseEditDcm",t.DeditDcmDcmObj.did),t.$emit("GPCallswitchLoader")}))}}},an=nn,rn=Object(m["a"])(an,Me,Le,!1,null,null,null),sn=rn.exports,cn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ctg",attrs:{"data-did":t.editCtgCtgObj.cid}},[n("div",{staticClass:"content"},[n("div",{staticClass:"head"},[n("div",{attrs:{contenteditable:"true"},on:{blur:t.changeEditCtgHead}},[t._v(t._s(t.editCtgCtgObj.head))])]),n("edit-category-color",{attrs:{ctgColor:t.editCtgCtgObj.color},on:{PTchangeCtgColor:t.changeCtgColor}}),n("edit-category-tags",{attrs:{db:t.db,editCtgTagArr:t.editCtgTagArr},on:{PTselectEditCtgTag:t.selectEditCtgTag}}),n("div",{staticClass:"body"},[n("div",{attrs:{contenteditable:"true"},on:{blur:t.changeEditCtgBody}},[t._v(t._s(t.editCtgCtgObj.body))])]),n("edit-category-list",{attrs:{db:t.db,ctgid:t.editCtgCtgObj.cid,ctgColor:t.editCtgCtgObj.color,editCtgDcmArr:t.editCtgDcmArr},on:{PTSelectEditCtgDcm:t.selectEditCtgDcm,PTCallswitchLoader:t.$listeners["GPCallswitchLoader"]}})],1),n("edit-foot",{attrs:{btnClass:"ctg",saveFlg:t.saveFlg},on:{PTcloseEdit:t.$listeners["GPcloseEditCtg"],PTsaveEdit:t.setSaveData,PTCallswitchLoader:t.$listeners["GPCallswitchLoader"]}})],1)},on=[],ln=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"color"},[n("button",{class:[t.selectCtgColorFlg||t.selectCtgColor?"btnIcon":"btnWord","def","cpr"],attrs:{type:"button"},on:{click:t.switchCtgPalette}},[t.selectCtgColorFlg||t.selectCtgColor?n("span",[n("i")]):n("span",[n("i"),t._v("選択")])]),n("p",{staticClass:"code"},[n("i",{directives:[{name:"show",rawName:"v-show",value:t.selectCtgColor,expression:"selectCtgColor"}],style:{background:t.selectCtgColor}}),t._v(t._s(t.selectCtgColor))]),n("color-picker",{directives:[{name:"show",rawName:"v-show",value:t.selectCtgColorFlg,expression:"selectCtgColorFlg"}],ref:"picker",on:{EXchangeSwatch:t.changeCtgSwatch}})],1)},gn=[],dn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"palette"},[n("div",{staticClass:"swatch"},t._l(t.paletteSwatchArr,(function(e,a){return n("a",{key:a,style:{background:t.paletteSwatchArr[a]["color"]},attrs:{"data-pid":a},on:{click:t.selectSwatch}})})),0),n("div",{staticClass:"bar"},t._l(t.paletteBarArr,(function(e,a){return n("a",{key:a,style:{background:t.paletteBarArr[a]["color"]},attrs:{"data-pid":a},on:{click:t.switchPaletteSwatch}})})),0)])},un=[],mn=(n("25f0"),n("1276"),{name:"ColorPicker",data:function(){return{paletteBarArr:[{color:"#f50f4b"},{color:"#ef15bc"},{color:"#ce37ff"},{color:"#623ae8"},{color:"#095eef"},{color:"#2099e5"},{color:"#11e0c8"},{color:"#10e051"},{color:"#d5ef12"},{color:"#f5da0e"},{color:"#f5810c"},{color:"#f4430d"}],paletteSwatchArr:[]}},methods:{zeroPad:function(t,e){return("0000"+t).slice(-e)},changeHexRgb:function(t){var e=t.slice(1),n=parseInt(e.slice(0,2),16),a=parseInt(e.slice(2,4),16),r=parseInt(e.slice(4,6),16);return[n,a,r]},changeRgbHex:function(t){var e=t.indexOf("rgb")<0?t:t.slice(4,-1).split(","),n=Number(e[0]),a=n>255?255:n<0?0:n,r=this.zeroPad(a.toString(16),2),i=Number(e[1]),s=i>255?255:i<0?0:i,c=this.zeroPad(s.toString(16),2),o=Number(e[2]),l=o>255?255:o<0?0:o,g=this.zeroPad(l.toString(16),2);return"#"+r+c+g},getPaletteSwatch:function(t){this.paletteSwatchArr=[];for(var e=this.changeHexRgb(t||this.paletteBarArr[0].color),n=.1,a=0;a<10;a++)for(var r=255*(10-a)*n,i=e[0]*a*n,s=e[1]*a*n,c=e[2]*a*n,o=0;o<10;o++){var l=255*o*n,g=this.changeRgbHex([Math.ceil(i+r-l),Math.ceil(s+r-l),Math.ceil(c+r-l)]);a&&o<6&&this.paletteSwatchArr.push({color:g})}},switchPaletteSwatch:function(t){var e=t.target,n=Number(e.dataset.pid);this.getPaletteSwatch(this.paletteBarArr[n].color)},selectSwatch:function(t){var e=t.target,n=Number(e.dataset.pid);this.$emit("EXchangeSwatch",this.paletteSwatchArr[n].color)}}}),hn=mn,Cn=(n("7def"),Object(m["a"])(hn,dn,un,!1,null,"0d88fc40",null)),fn=Cn.exports,vn={name:"EditCategoryColor",props:{ctgColor:String},components:{ColorPicker:fn},data:function(){return{selectCtgColorFlg:!1,selectCtgColor:this.ctgColor,selectCtgPalette:""}},methods:{switchCtgPalette:function(){this.selectCtgColorFlg=!this.selectCtgColorFlg,this.selectCtgColorFlg&&this.$refs.picker.getPaletteSwatch(this.selectCtgPalette)},changeCtgSwatch:function(t){this.selectCtgColor=t,this.switchCtgPalette(),this.$emit("PTchangeCtgColor",this.selectCtgColor)}}},wn=vn,Dn=Object(m["a"])(wn,ln,gn,!1,null,null,null),bn=Dn.exports,pn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tags"},[n("button",{class:[t.DeditCtgTagArr.length||t.selectTagFlg?"btnIcon":"btnWord","def","tag"],attrs:{type:"button"},on:{click:t.switchFlg}},[t.DeditCtgTagArr.length||t.selectTagFlg?n("span",[n("i")]):n("span",[n("i"),t._v("編集")])]),t.selectTagFlg?n("div",{staticClass:"field"},[n("p",[n("input",{attrs:{type:"text",placeholder:"タグ"},on:{focus:t.suggestTags,keydown:t.suggestTags}}),n("button",{class:["btnWord","def","nml","widSM",t.inputTagFlg?"isNoActive":""],attrs:{type:"button"},on:{click:t.addSelectTag}},[n("span",[t._v("追加")])])]),t.suggestTagArr.length?n("ul",t._l(t.suggestTagArr,(function(e,a){return n("li",{key:a},[n("a",{attrs:{"data-tag":e},on:{click:t.addSelectTag}},[t._v(t._s(e))])])})),0):t._e()]):t._e(),t.DeditCtgTagArr.length?n("div",{staticClass:"area"},[n("ul",t._l(t.DeditCtgTagArr,(function(e,a){return n("li",{key:a},[n("a",{attrs:{"data-tag":e},on:{click:t.remSelectTag}},[t._v(t._s(e))])])})),0)]):t._e()])},An=[],Tn={name:"EditCategoryTags",props:{db:Object,editCtgTagArr:Array},data:function(){return{DeditCtgTagArr:this.editCtgTagArr,selectTagFlg:!1,inputTagFlg:!1,suggestTagArr:[],tagLength:0}},methods:{switchFlg:function(){this.selectTagFlg=!this.selectTagFlg,this.selectTagFlg||(this.suggestTagArr=[])},suggestTags:function(t){var e=this,n=t.target.value;e.suggestTagArr=[],e.db.tag.toArray().then((function(t){if(n){e.inputTagFlg=!0;var a,r=Object(c["a"])(t);try{for(r.s();!(a=r.n()).done;){var i=a.value;e.editCtgTagArr.indexOf(i.head)<0&&i.head.indexOf(n)>-1&&e.suggestTagArr.push(i.head)}}catch(g){r.e(g)}finally{r.f()}}else{var s,o=Object(c["a"])(t);try{for(o.s();!(s=o.n()).done;){var l=s.value;e.editCtgTagArr.indexOf(l.head)<0&&e.suggestTagArr.push(l.head)}}catch(g){o.e(g)}finally{o.f()}e.inputTagFlg=!1,e.tagLength=e.suggestTagArr.length}}))},addSelectTag:function(t){var e=t.target,n=e.dataset.tag,a=n?e.innerText:e.previousElementSibling.value;!a||this.DeditCtgTagArr.indexOf(a)>-1||(this.DeditCtgTagArr.push(a),n||(e.previousElementSibling.value=""),this.suggestTagArr=[],this.$emit("PTselectEditCtgTag",this.DeditCtgTagArr))},remSelectTag:function(t){var e=t.target,n=e.innerText;this.DeditCtgTagArr.splice(this.DeditCtgTagArr.indexOf(n),1),this.$emit("PTselectEditCtgTag",this.DeditCtgTagArr)}}},yn=Tn,On=Object(m["a"])(yn,pn,An,!1,null,null,null),_n=On.exports,jn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"list"},[n("ul",t._l(t.addremCtgDcmArr,(function(e,a){return n("li",{directives:[{name:"show",rawName:"v-show",value:!(e.cid&&e.cid!=t.ctgid),expression:"!(art.cid&&art.cid!=ctgid)"}],key:a},[n("div",{staticClass:"cardItem"},[e.color?n("i",{style:{color:e.color}}):t._e(),n("h2",[t._v(t._s(e.head))]),n("time",{staticClass:"date"},[t._v(t._s(new Date(e.date).getFullYear())+"年"+t._s(new Date(e.date).getMonth()+1)+"月"+t._s(new Date(e.date).getDate())+"日")]),n("time",{staticClass:"last"},[t._v(t._s(new Date(e.last).getFullYear())+"年"+t._s(new Date(e.last).getMonth()+1)+"月"+t._s(new Date(e.last).getDate())+"日")]),n("p",{attrs:{"data-did":e.did}},[n("button",{class:["btnIcon","def","nml","pls",t.defaultDcmArr.indexOf(e.did)>-1?"isNoActive":""],attrs:{type:"button"},on:{click:t.addDcmArr}},[n("span",[t._v("増加")])]),n("button",{class:["btnIcon","def","nml","mns",t.defaultDcmArr.indexOf(e.did)<0?"isNoActive":""],attrs:{type:"button"},on:{click:t.remDcmArr}},[n("span",[t._v("削減")])])])])])})),0)])},Fn=[],Pn={name:"EditCategoryList",props:{db:Object,ctgid:Number,ctgColor:String,editCtgDcmArr:Array},data:function(){return{DeditCtgDcmArr:this.editCtgDcmArr,defaultDcmArr:[],addremCtgDcmArr:[]}},created:function(){this.$emit("PTCallswitchLoader"),this.setDcmArr(),this.getDataDcmPromise()},methods:{setDcmArr:function(){var t,e=Object(c["a"])(this.editCtgDcmArr);try{for(e.s();!(t=e.n()).done;){var n=t.value;this.defaultDcmArr.push(n.did)}}catch(a){e.e(a)}finally{e.f()}},getDataDcm:function(){var t=this;return new Promise((function(e){t.db.dcm.toArray().then((function(n){t.addremCtgDcmArr=n,e(n)}))}))},getDataDcmPromise:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t,e.next=3,n.getDataDcm();case 3:for(r in a=function(t){var e=n.addremCtgDcmArr[t].cid;e&&n.db.ctg.get({cid:e}).then((function(e){n.$set(n.addremCtgDcmArr[t],"color",e.color)}))},n.addremCtgDcmArr)a(r);t.$emit("PTCallswitchLoader");case 6:case"end":return e.stop()}}),e)})))()},addDcmArr:function(t){var e=this,n=t.target,a=Number(n.parentNode.dataset.did);for(var r in e.db.dcm.get(a).then((function(t){e.DeditCtgDcmArr.push(t)})),e.addremCtgDcmArr){var i=e.addremCtgDcmArr[r].did;i==a&&(e.defaultDcmArr.push(i),e.$set(e.addremCtgDcmArr[r],"color",e.ctgColor))}e.$emit("PTSelectEditCtgDcm",e.defaultDcmArr)},remDcmArr:function(t){var e=t.target,n=Number(e.parentNode.dataset.did);for(var a in this.DeditCtgDcmArr){var r=this.DeditCtgDcmArr[a].did;r==n&&this.DeditCtgDcmArr.splice(a,1)}for(var i in this.addremCtgDcmArr){var s=this.addremCtgDcmArr[i].did;s==n&&this.$set(this.addremCtgDcmArr[i],"color","")}this.defaultDcmArr.splice(this.defaultDcmArr.indexOf(n),1),this.$emit("PTSelectEditCtgDcm",this.defaultDcmArr)}}},$n=Pn,Nn=Object(m["a"])($n,jn,Fn,!1,null,null,null),xn=Nn.exports,En={name:"EditCategoryContainer",props:{db:Object,editCtgDcmArr:Array,editCtgCtgObj:Object,editCtgTagArr:Array},components:{EditCategoryColor:bn,EditCategoryTags:_n,EditCategoryList:xn,EditFoot:en},data:function(){return{DeditCtgDcmArr:[],DeditCtgCtgObj:this.editCtgCtgObj,DeditCtgTagArr:this.editCtgTagArr,EeditCtgCtgColor:this.editCtgCtgObj.color,saveFlg:!0}},created:function(){this.changeEditCtgDcm(this.editCtgDcmArr)},methods:{compileNltoBr:function(t){var e=String(t);return e.replace(/<div>/,"\r\n").replace(/<\/div>/,"")},compileBrtoNl:function(t){var e=String(t);return e.replace(/<br>/,"\r\n")},changeEditCtgHead:function(t){var e=t.target.innerText;this.saveFlg=!(!e||!e.match(/\S/g)),this.DeditCtgCtgObj.head=e&&e.match(/\S/g)?this.compileNltoBr(e):"",t.target.innerText=this.compileBrtoNl(this.DeditCtgCtgObj.head)},changeEditCtgBody:function(t){var e=t.target.innerText;this.DeditCtgCtgObj.body=e&&e.match(/\S/g)?this.compileNltoBr(e):"",t.target.innerText=this.compileBrtoNl(this.DeditCtgCtgObj.body)},changeCtgColor:function(t){this.EeditCtgCtgColor=t},selectEditCtgTag:function(t){var e=t.concat(t);e=new Set(e),this.DeditCtgTagArr=Array.from(e)},changeEditCtgDcm:function(t){var e,n=Object(c["a"])(t);try{for(n.s();!(e=n.n()).done;){var a=e.value;this.DeditCtgDcmArr.push(a.did)}}catch(r){n.e(r)}finally{n.f()}},selectEditCtgDcm:function(t){this.DeditCtgDcmArr=t},setRemDcm:function(t){var e=this;return new Promise((function(n){e.db.dcm.where(t).modify({cid:0}).then((function(){n(!0)}))}))},setAddDcm:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e,r={cid:a.DeditCtgCtgObj.cid},n.next=3,a.setRemDcm(r);case 3:return n.abrupt("return",new Promise((function(e){var n,i=Object(c["a"])(t);try{for(i.s();!(n=i.n()).done;){var s=n.value;a.db.dcm.update(s,r)}}catch(o){i.e(o)}finally{i.f()}e(!0)})));case 4:case"end":return n.stop()}}),n)})))()},setAddremDcmPromise:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.setAddDcm(t);case 2:case"end":return n.stop()}}),n)})))()},setSaveData:function(){var t=this,e=this;e.db.ctg.update(e.DeditCtgCtgObj.cid,{tag:e.DeditCtgTagArr,date:e.DeditCtgCtgObj.date,head:e.DeditCtgCtgObj.head,body:e.DeditCtgCtgObj.body,color:e.EeditCtgCtgColor}).then((function(){e.setAddremDcmPromise(t.DeditCtgDcmArr),e.$parent.setSaveTagPromise(e.DeditCtgTagArr),e.$emit("GPcloseEditCtg",e.DeditCtgCtgObj.cid),e.$emit("GPCallswitchLoader")}))}}},Sn=En,kn=Object(m["a"])(Sn,cn,on,!1,null,null,null),Mn=kn.exports,Ln={name:"EditContainer",props:{db:Object,editFlg:Boolean,editDcmObj:Object},data:function(){return{editDcmFlg:!1,editDcmDcmObj:{},editDcmCtgObj:{},editDcmTagArr:[],editCtgFlg:!1,editCtgDcmArr:{},editCtgCtgObj:{},editCtgTagArr:[]}},components:{EditDocumentContainer:sn,EditCategoryContainer:Mn},methods:{setEditDcmData:function(t){this.editDcmFlg=!0,this.editDcmDcmObj=t.dcm,this.editDcmCtgObj=t.ctg,this.editDcmTagArr=t.tag},setEditCtgData:function(t){this.editCtgFlg=!0,this.editCtgDcmArr=t.dcm,this.editCtgCtgObj=t.ctg,this.editCtgTagArr=t.tag},closeEditDcm:function(t){this.editDcmFlg=!1,this.editDcmDcmObj={},this.editDcmCtgObj={},this.editDcmTagArr=[],this.$emit("ANcloseEditDcm",t)},closeEditCtg:function(t){this.editCtgFlg=!1,this.editCtgDcmArr=[],this.editCtgCtgObj={},this.editCtgTagArr=[],this.$emit("ANcloseEditCtg",t)},setSaveTag:function(t){var e=[],n=[],a=this;return new Promise((function(r){a.db.tag.toArray().then((function(a){var i,s=Object(c["a"])(a);try{for(s.s();!(i=s.n()).done;){var o=i.value;e.push(o.head)}}catch(u){s.e(u)}finally{s.f()}var l,g=Object(c["a"])(t);try{for(g.s();!(l=g.n()).done;){var d=l.value;e.indexOf(d)<0&&n.push(d)}}catch(u){g.e(u)}finally{g.f()}r(n)}))}))},setSaveTagPromise:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.setSaveTag(t);case 2:a=n.sent,r=a.map((function(t){return{head:t}})),r.length&&e.db.tag.bulkPut(r);case 5:case"end":return n.stop()}}),n)})))()}}},Bn=Ln,Gn=(n("acef"),Object(m["a"])(Bn,Se,ke,!1,null,"40f570f7",null)),Rn=Gn.exports,Vn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.anewFlg?n("div",{staticClass:"anew",attrs:{id:"Anew"}},[t.anewDcmFlg?n("anew-document-container",{attrs:{db:t.db,saveFlg:t.saveFlg},on:{GPCallcloseAnew:t.$listeners["ANcloseAnew"],GPCallswitchLoader:t.$listeners["ANswitchLoader"]}}):t._e(),t.anewCtgFlg?n("anew-category-container",{attrs:{db:t.db,saveFlg:t.saveFlg},on:{GPCallcloseAnew:t.$listeners["ANcloseAnew"],GPCallswitchLoader:t.$listeners["ANswitchLoader"]}}):t._e()],1):t._e()},Yn=[],In=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"dcm"},[n("div",{staticClass:"content"},[n("div",{staticClass:"head"},[n("div",{attrs:{contenteditable:"true","data-placeholder":"新規作成タイトル"},on:{blur:t.changeAnewDcmHead}})]),n("anew-document-ctgname",{attrs:{db:t.db},on:{PTselectAneDcmCtg:t.selectAnewDcmCtg}}),n("anew-document-tags",{attrs:{db:t.db},on:{PTselectAnewDcmTag:t.selectAnewDcmTag}}),n("div",{staticClass:"body"},[n("div",{attrs:{contenteditable:"true","data-placeholder":"新規作成コンテンツ"},on:{blur:t.changeAnewDcmBody}})])],1),n("anew-foot",{attrs:{btnClass:"dcm",AsaveFlg:t.AsaveFlg},on:{PTCallcloseAnew:t.$listeners["GPCallcloseAnew"],PTsaveAnew:t.setSaveData,PTCallswitchLoader:t.$listeners["GPCallswitchLoader"]}})],1)},Hn=[],Wn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"series"},[n("button",{class:[Object.keys(t.anewDcmCtgnameObj).length||t.selectCtgnameFlg?"btnIcon":"btnWord","def","ctg"],attrs:{type:"button"},on:{click:t.switchFlg}},[Object.keys(t.anewDcmCtgnameObj).length||t.selectCtgnameFlg?n("span",[n("i")]):n("span",[n("i"),t._v("編集")])]),Object.keys(t.anewDcmCtgnameObj).length&&!t.selectCtgnameFlg?n("p",{attrs:{"data-sid":t.anewDcmCtgnameObj.cid}},[t._v(t._s(t.anewDcmCtgnameObj.head)),n("button",{staticClass:"icn",attrs:{type:"button"},on:{click:t.remCtgName}},[t._v("消")])]):t._e(),t.selectCtgnameFlg?n("div",{staticClass:"field"},[n("p",[n("input",{attrs:{type:"text",placeholder:"シリーズ"},on:{focus:t.suggestCtgname,keydown:t.suggestCtgname,paste:t.pasteCtgname}}),n("button",{class:["btnWord","def","nml","widSM",t.inputCtgnameFlg?"":"isNoActive"],attrs:{type:"button"},on:{click:t.selectCtgname}},[n("span",[t._v("追加")])])]),t.suggestCtgnameArr.length?n("ul",t._l(t.suggestCtgnameArr,(function(e,a){return n("li",{key:a},[n("a",{attrs:{"data-cid":e.cid},on:{click:t.selectCtgname}},[t._v(t._s(e.head))])])})),0):t._e()]):t._e()])},zn=[],Xn={name:"AnewDocumentCtgname",props:{db:Object},data:function(){return{selectCtgnameFlg:!1,inputCtgnameFlg:!1,anewDcmCtgnameObj:{},suggestCtgnameArr:[]}},methods:{switchFlg:function(){this.selectCtgnameFlg=!this.selectCtgnameFlg},pasteCtgname:function(){this.inputCtgnameFlg=!0},suggestCtgname:function(t){var e=this,n=t.target.value;e.db.ctg.toArray().then((function(t){if(n){e.suggestCtgnameArr=[],e.inputCtgnameFlg=!0;var a,r=Object(c["a"])(t);try{for(r.s();!(a=r.n()).done;){var i=a.value;i.head.indexOf(n)>-1&&e.suggestCtgnameArr.push(i)}}catch(s){r.e(s)}finally{r.f()}}else e.suggestCtgnameArr=t,e.inputCtgnameFlg=!1,e.ctgLength=e.suggestCtgnameArr.length}))},selectCtgname:function(t){var e=t.target,n=e.dataset.cid,a=n?Number(e.dataset.cid):this.ctgLength+1,r=n?e.innerText:e.previousElementSibling.value;this.anewDcmCtgnameObj.cid=a,this.anewDcmCtgnameObj.head=r;var i,s=Object(c["a"])(this.suggestCtgnameArr);try{for(s.s();!(i=s.n()).done;){var o=i.value;o.head==r&&(this.anewDcmCtgnameObj=o)}}catch(l){s.e(l)}finally{s.f()}this.suggestCtgnameArr=[],this.selectCtgnameFlg=!1,this.$emit("PTselectAneDcmCtg",this.anewDcmCtgnameObj)},remCtgName:function(){this.anewDcmCtgnameObj={},this.$emit("PTselectAneDcmCtg",this.anewDcmCtgnameObj)}}},Jn=Xn,qn=Object(m["a"])(Jn,Wn,zn,!1,null,null,null),Kn=qn.exports,Qn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tags"},[n("button",{class:[t.editDcmTagArr.length||t.selectTagFlg?"btnIcon":"btnWord","def","tag"],attrs:{type:"button"},on:{click:t.switchFlg}},[t.editDcmTagArr.length||t.selectTagFlg?n("span",[n("i")]):n("span",[n("i"),t._v("編集")])]),t.selectTagFlg?n("div",{staticClass:"field"},[n("p",[n("input",{attrs:{type:"text",placeholder:"タグ"},on:{focus:t.suggestTags,keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"delete",[8,46],e.key,["Backspace","Delete","Del"])?null:t.suggestTags(e)}}}),n("button",{staticClass:"btnWord def nml widSM",attrs:{type:"button"},on:{click:t.addSelectTag}},[n("span",[t._v("追加")])])]),t.suggestTagArr.length?n("ul",t._l(t.suggestTagArr,(function(e,a){return n("li",{key:a},[n("a",{attrs:{"data-tag":e},on:{click:t.addSelectTag}},[t._v(t._s(e))])])})),0):t._e()]):t._e(),t.editDcmTagArr.length?n("div",{staticClass:"area"},[n("ul",t._l(t.editDcmTagArr,(function(e,a){return n("li",{key:a},[n("a",{attrs:{"data-tag":e},on:{click:t.remSelectTag}},[t._v(t._s(e))])])})),0)]):t._e()])},Un=[],Zn={name:"AnewDocumentTags",props:{db:Object},data:function(){return{editDcmTagArr:[],selectTagFlg:!1,inputTagFlg:!1,suggestTagArr:[]}},methods:{switchFlg:function(){this.selectTagFlg=!this.selectTagFlg,this.selectTagFlg||(this.suggestTagArr=[])},suggestTags:function(t){var e=this,n=t.target.value;e.suggestTagArr=[],e.db.tag.toArray().then((function(t){if(n){e.inputTagFlg=!0;var a,r=Object(c["a"])(t);try{for(r.s();!(a=r.n()).done;){var i=a.value;e.editDcmTagArr.indexOf(i.head)<0&&i.head.indexOf(n)>-1&&e.suggestTagArr.push(i.head)}}catch(g){r.e(g)}finally{r.f()}}else{var s,o=Object(c["a"])(t);try{for(o.s();!(s=o.n()).done;){var l=s.value;e.editDcmTagArr.indexOf(l.head)<0&&e.suggestTagArr.push(l.head)}}catch(g){o.e(g)}finally{o.f()}e.inputTagFlg=!1}}))},addSelectTag:function(t){var e=t.target,n=e.dataset.tag,a=n?e.innerText:e.previousElementSibling.value;!a||this.editDcmTagArr.indexOf(a)>-1||(this.editDcmTagArr.push(a),n||(e.previousElementSibling.value=""),this.suggestTagArr=[],this.$emit("PTselectAnewDcmTag",this.editDcmTagArr))},remSelectTag:function(t){var e=t.target,n=e.innerText;this.editDcmTagArr.splice(this.editDcmTagArr.indexOf(n),1),this.$emit("PTselectAnewDcmTag",this.editDcmTagArr)}}},ta=Zn,ea=Object(m["a"])(ta,Qn,Un,!1,null,null,null),na=ea.exports,aa=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"foot"},[n("button",{staticClass:"btnText def nml widLG",attrs:{type:"button"},on:{click:t.callcloseAnew}},[t._m(0)]),n("button",{class:["btnText","def",t.btnClass,"widLG",t.AsaveFlg?"":"isNoActive"],attrs:{type:"button"},on:{click:t.clickSave}},[t._m(1)])])},ra=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[n("span",[t._v("キャンセル")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[n("i"),t._v("保存")])}],ia={name:"AnewFoot",props:{btnClass:String,AsaveFlg:Boolean},methods:{callcloseAnew:function(){this.$emit("PTCallcloseAnew")},clickSave:function(){this.$emit("PTCallswitchLoader"),this.$emit("PTsaveAnew")}}},sa=ia,ca=Object(m["a"])(sa,aa,ra,!1,null,null,null),oa=ca.exports,la={name:"AnewDocumentContainer",props:{db:Object,saveFlg:Boolean},components:{AnewDocumentCtgname:Kn,AnewDocumentTags:na,AnewFoot:oa},data:function(){return{anewDcmDcmObj:{},anewDcmCtgObj:{},anewDcmTagArr:[],AsaveFlg:this.saveFlg}},methods:{checkSave:function(t){this.AsaveFlg=!(!t||!t.match(/\S/g))},changeAnewDcmHead:function(t){var e=t.target.innerText;this.checkSave(e),this.anewDcmDcmObj.head=e&&e.match(/\S/g)?this.$parent.compileNltoBr(e):"",t.target.innerText=this.$parent.compileBrtoNl(this.anewDcmDcmObj.head)},changeAnewDcmBody:function(t){var e=t.target.innerText;this.anewDcmDcmObj.body=e&&e.match(/\S/g)?this.$parent.compileNltoBr(e):"",t.target.innerText=this.$parent.compileBrtoNl(this.anewDcmDcmObj.body)},selectAnewDcmCtg:function(t){this.anewDcmCtgObj=t},selectAnewDcmTag:function(t){var e=t.concat(t);e=new Set(e),this.anewDcmTagArr=Array.from(e)},setSaveData:function(){var t=this,e=new Date,n=new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime(),a={date:n,color:"",body:""};t.anewDcmCtgObj.date||(t.anewDcmCtgObj=Object.assign(t.anewDcmCtgObj,a)),t.db.dcm.add({cid:t.anewDcmCtgObj.cid?t.anewDcmCtgObj.cid:0,tag:t.anewDcmTagArr,date:n,last:n,head:t.anewDcmDcmObj.head,body:t.anewDcmDcmObj.body}).then((function(){t.anewDcmCtgObj.cid&&t.db.ctg.put(t.anewDcmCtgObj),t.$parent.setSaveTagPromise(t.anewDcmTagArr),t.checkSave(),t.$emit("GPCallcloseAnew"),t.$emit("GPCallswitchLoader")})),t.$emit("GPCallswitchLoader")}}},ga=la,da=Object(m["a"])(ga,In,Hn,!1,null,null,null),ua=da.exports,ma=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ctg"},[n("div",{staticClass:"content"},[n("div",{staticClass:"head"},[n("div",{attrs:{contenteditable:"true","data-placeholder":"新規作成カテゴリ"},on:{blur:t.changeAnewCtgHead}})]),n("anew-category-color",{on:{PTchangeCtgColor:t.changeCtgColor}}),n("anew-category-tags",{attrs:{db:t.db},on:{PTselectAnewCtgTag:t.selectAnewCtgTag}}),n("div",{staticClass:"body"},[n("div",{attrs:{contenteditable:"true","data-placeholder":"新規作成コンテンツ"},on:{blur:t.changeAnewCtgBody}})]),n("anew-category-list",{ref:"list",attrs:{db:t.db,ctgColor:t.anewCtgCtgObj.color},on:{PTselectAnewCtgDcm:t.selectAnewCtgDcm,PTCallswitchLoader:t.$listeners["GPCallswitchLoader"]}})],1),n("anew-foot",{attrs:{btnClass:"ctg",AsaveFlg:t.AsaveFlg},on:{PTCallcloseAnew:t.$listeners["GPCallcloseAnew"],PTsaveAnew:t.setSaveData,PTCallswitchLoader:t.$listeners["GPCallswitchLoader"]}})],1)},ha=[],Ca=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"color"},[n("button",{class:[t.selectCtgColorFlg||t.selectCtgColor?"btnIcon":"btnWord","def","cpr"],attrs:{type:"button"},on:{click:t.switchCtgPalette}},[t.selectCtgColorFlg||t.selectCtgColor?n("span",[n("i")]):n("span",[n("i"),t._v("選択")])]),n("p",{staticClass:"code"},[n("i",{directives:[{name:"show",rawName:"v-show",value:t.selectCtgColor,expression:"selectCtgColor"}],style:{background:t.selectCtgColor}}),t._v(t._s(t.selectCtgColor))]),n("color-picker",{directives:[{name:"show",rawName:"v-show",value:t.selectCtgColorFlg,expression:"selectCtgColorFlg"}],ref:"picker",on:{EXchangeSwatch:t.changeCtgSwatch}})],1)},fa=[],va={name:"AnewCategoryColor",components:{ColorPicker:fn},data:function(){return{selectCtgColorFlg:!1,selectCtgColor:"",selectCtgPalette:""}},methods:{switchCtgPalette:function(){this.selectCtgColorFlg=!this.selectCtgColorFlg,this.selectCtgColorFlg&&this.$refs.picker.getPaletteSwatch(this.selectCtgPalette)},changeCtgSwatch:function(t){this.selectCtgColor=t,this.switchCtgPalette(),this.$emit("PTchangeCtgColor",this.selectCtgColor)}}},wa=va,Da=Object(m["a"])(wa,Ca,fa,!1,null,null,null),ba=Da.exports,pa=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tags"},[n("button",{class:[t.anewCtgTagArr.length||t.selectTagFlg?"btnIcon":"btnWord","def","tag"],attrs:{type:"button"},on:{click:t.switchFlg}},[t.anewCtgTagArr.length||t.selectTagFlg?n("span",[n("i")]):n("span",[n("i"),t._v("編集")])]),t.selectTagFlg?n("div",{staticClass:"field"},[n("p",[n("input",{attrs:{type:"text",placeholder:"タグ"},on:{focus:t.suggestTags,keydown:t.suggestTags}}),n("button",{class:["btnWord","def","nml","widSM",t.inputTagFlg?"isNoActive":""],attrs:{type:"button"},on:{click:t.addSelectTag}},[n("span",[t._v("追加")])])]),t.suggestTagArr.length?n("ul",t._l(t.suggestTagArr,(function(e,a){return n("li",{key:a},[n("a",{attrs:{"data-tag":e},on:{click:t.addSelectTag}},[t._v(t._s(e))])])})),0):t._e()]):t._e(),t.anewCtgTagArr.length?n("div",{staticClass:"area"},[n("ul",t._l(t.anewCtgTagArr,(function(e,a){return n("li",{key:a},[n("a",{attrs:{"data-tag":e},on:{click:t.remSelectTag}},[t._v(t._s(e))])])})),0)]):t._e()])},Aa=[],Ta={name:"AnewCategoryTags",props:{db:Object},data:function(){return{anewCtgTagArr:[],selectTagFlg:!1,inputTagFlg:!1,suggestTagArr:[],tagLength:0}},methods:{switchFlg:function(){this.selectTagFlg=!this.selectTagFlg,this.selectTagFlg||(this.suggestTagArr=[])},suggestTags:function(t){var e=this,n=t.target.value;e.suggestTagArr=[],e.db.tag.toArray().then((function(t){if(n){e.inputTagFlg=!0;var a,r=Object(c["a"])(t);try{for(r.s();!(a=r.n()).done;){var i=a.value;e.anewCtgTagArr.indexOf(i.head)<0&&i.head.indexOf(n)>-1&&e.suggestTagArr.push(i.head)}}catch(g){r.e(g)}finally{r.f()}}else{var s,o=Object(c["a"])(t);try{for(o.s();!(s=o.n()).done;){var l=s.value;e.anewCtgTagArr.indexOf(l.head)<0&&e.suggestTagArr.push(l.head)}}catch(g){o.e(g)}finally{o.f()}e.inputTagFlg=!1,e.tagLength=e.suggestTagArr.length}}))},addSelectTag:function(t){var e=t.target,n=e.dataset.tag,a=n?e.innerText:e.previousElementSibling.value;!a||this.anewCtgTagArr.indexOf(a)>-1||(this.anewCtgTagArr.push(a),n||(e.previousElementSibling.value=""),this.suggestTagArr=[],this.$emit("PTselectAnewCtgTag",this.anewCtgTagArr))},remSelectTag:function(t){var e=t.target,n=e.innerText;this.anewCtgTagArr.splice(this.anewCtgTagArr.indexOf(n),1),this.$emit("PTselectAnewCtgTag",this.anewCtgTagArr)}}},ya=Ta,Oa=Object(m["a"])(ya,pa,Aa,!1,null,null,null),_a=Oa.exports,ja=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"list"},[n("ul",t._l(t.addremCtgDcmArr,(function(e,a){return n("li",{directives:[{name:"show",rawName:"v-show",value:!e.cid,expression:"!art.cid"}],key:a},[n("div",{staticClass:"cardItem"},[e.color?n("i",{style:{color:e.color}}):t._e(),n("h2",[t._v(t._s(e.head))]),n("time",{staticClass:"date"},[t._v(t._s(new Date(e.date).getFullYear())+"年"+t._s(new Date(e.date).getMonth()+1)+"月"+t._s(new Date(e.date).getDate())+"日")]),n("time",{staticClass:"last"},[t._v(t._s(new Date(e.last).getFullYear())+"年"+t._s(new Date(e.last).getMonth()+1)+"月"+t._s(new Date(e.last).getDate())+"日")]),n("p",{attrs:{"data-did":e.did}},[n("button",{class:["btnIcon","def","nml","pls",t.defaultDcmArr.indexOf(e.did)>-1?"isNoActive":""],attrs:{type:"button"},on:{click:t.addDcmArr}},[n("span",[t._v("増加")])]),n("button",{class:["btnIcon","def","nml","mns",t.defaultDcmArr.indexOf(e.did)<0?"isNoActive":""],attrs:{type:"button"},on:{click:t.remDcmArr}},[n("span",[t._v("削減")])])])])])})),0)])},Fa=[],Pa={name:"AnewCategoryList",props:{db:Object},data:function(){return{ctgColor:"",anewCtgDcmArr:[],defaultDcmArr:[],addremCtgDcmArr:[]}},created:function(){this.$emit("PTCallswitchLoader"),this.getDataDcmPromise()},methods:{setctgColor:function(t){this.ctgColor=t},getDataDcm:function(){var t=this;return new Promise((function(e){t.db.dcm.toArray().then((function(n){t.addremCtgDcmArr=n,e(n)}))}))},getDataDcmPromise:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t,e.next=3,n.getDataDcm();case 3:for(r in a=function(t){var e=n.addremCtgDcmArr[t].cid;e&&n.db.ctg.get({cid:e}).then((function(e){n.$set(n.addremCtgDcmArr[t],"color",e.color)}))},n.addremCtgDcmArr)a(r);t.$emit("PTCallswitchLoader");case 6:case"end":return e.stop()}}),e)})))()},addDcmArr:function(t){var e=this,n=t.target,a=Number(n.parentNode.dataset.did);for(var r in e.db.dcm.get(a).then((function(t){e.anewCtgDcmArr.push(t)})),e.addremCtgDcmArr){var i=e.addremCtgDcmArr[r].did;i==a&&(e.defaultDcmArr.push(i),e.$set(e.addremCtgDcmArr[r],"color",e.ctgColor))}e.$emit("PTselectAnewCtgDcm",e.defaultDcmArr)},remDcmArr:function(t){var e=t.target,n=Number(e.parentNode.dataset.did);for(var a in this.anewCtgDcmArr){var r=this.anewCtgDcmArr[a].did;r==n&&this.anewCtgDcmArr.splice(a,1)}for(var i in this.addremCtgDcmArr){var s=this.addremCtgDcmArr[i].did;s==n&&this.$set(this.addremCtgDcmArr[i],"color","")}this.defaultDcmArr.splice(this.defaultDcmArr.indexOf(n),1),this.$emit("PTselectAnewCtgDcm",this.defaultDcmArr)}}},$a=Pa,Na=Object(m["a"])($a,ja,Fa,!1,null,null,null),xa=Na.exports,Ea={name:"AnewCategoryContainer",props:{db:Object,saveFlg:Boolean},components:{AnewCategoryColor:ba,AnewCategoryTags:_a,AnewCategoryList:xa,AnewFoot:oa},data:function(){return{anewCtgDcmArr:[],anewCtgCtgObj:{},anewCtgTagArr:[],AsaveFlg:this.saveFlg}},methods:{checkSave:function(t){this.AsaveFlg=!(!t||!t.match(/\S/g))},changeAnewCtgHead:function(t){var e=t.target.innerText;this.checkSave(e),this.anewCtgCtgObj.head=e&&e.match(/\S/g)?this.$parent.compileNltoBr(e):"",t.target.innerText=this.$parent.compileBrtoNl(this.anewCtgCtgObj.head)},changeAnewCtgBody:function(t){var e=t.target.innerText;this.anewCtgCtgObj.body=e&&e.match(/\S/g)?this.$parent.compileNltoBr(e):"",t.target.innerText=this.$parent.compileBrtoNl(this.anewCtgCtgObj.body)},changeCtgColor:function(t){this.$set(this.anewCtgCtgObj,"color",t),this.$refs.list.setctgColor(t)},selectAnewCtgTag:function(t){var e=t.concat(t);e=new Set(e),this.anewCtgTagArr=Array.from(e)},selectAnewCtgDcm:function(t){this.anewCtgDcmArr=t},setCngetCtgid:function(){var t=this,e={head:t.anewCtgCtgObj.head};return new Promise((function(n){t.db.ctg.get(e).then((function(t){n(Number(t.cid))}))}))},setAddDcm:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var a,r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e,n.next=3,a.setCngetCtgid();case 3:return r=n.sent,i={cid:r},n.abrupt("return",new Promise((function(e){var n,r=Object(c["a"])(t);try{for(r.s();!(n=r.n()).done;){var s=n.value;a.db.dcm.update(s,i)}}catch(o){r.e(o)}finally{r.f()}e(!0)})));case 6:case"end":return n.stop()}}),n)})))()},setAddremDcmPromise:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.setAddDcm(t);case 2:case"end":return n.stop()}}),n)})))()},setSaveData:function(){var t=this,e=new Date,n=new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime();t.db.ctg.add({tag:t.anewCtgTagArr,date:n,head:t.anewCtgCtgObj.head,body:t.anewCtgCtgObj.body,color:t.anewCtgCtgObj.color}).then((function(){t.setAddremDcmPromise(t.anewCtgDcmArr),t.$parent.setSaveTagPromise(t.anewCtgTagArr),t.checkSave(),t.$emit("GPCallcloseAnew"),t.$emit("GPCallswitchLoader")}))}}},Sa=Ea,ka=Object(m["a"])(Sa,ma,ha,!1,null,null,null),Ma=ka.exports,La={name:"AnewContainer",props:{db:Object,anewFlg:Boolean},data:function(){return{anewDcmFlg:!1,anewCtgFlg:!1,saveFlg:!1}},components:{AnewDocumentContainer:ua,AnewCategoryContainer:Ma},methods:{compileNltoBr:function(t){var e=String(t);return e.replace(/<div>/,"\r\n").replace(/<\/div>/,"")},compileBrtoNl:function(t){var e=String(t);return e.replace(/<br>/,"\r\n")},setAnew:function(t){this.anewDcmFlg="dcm"==t,this.anewCtgFlg="ctg"==t,this.saveFlg=!1},setSaveTag:function(t){var e=[],n=[],a=this;return new Promise((function(r){a.db.tag.toArray().then((function(a){var i,s=Object(c["a"])(a);try{for(s.s();!(i=s.n()).done;){var o=i.value;e.push(o.head)}}catch(u){s.e(u)}finally{s.f()}var l,g=Object(c["a"])(t);try{for(g.s();!(l=g.n()).done;){var d=l.value;e.indexOf(d)<0&&n.push(d)}}catch(u){g.e(u)}finally{g.f()}r(n)}))}))},setSaveTagPromise:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.setSaveTag(t);case 2:a=n.sent,r=a.map((function(t){return{head:t}})),r.length&&e.db.tag.bulkPut(r);case 5:case"end":return n.stop()}}),n)})))()}}},Ba=La,Ga=(n("bfc0"),Object(m["a"])(Ba,Vn,Yn,!1,null,"652cc0a9",null)),Ra=Ga.exports,Va=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"search",attrs:{id:"Search"}},[n("search-tags")],1)},Ya=[],Ia=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tags"})},Ha=[],Wa={name:"SearchTags",props:{saveFlg:Array},methods:{}},za=Wa,Xa=Object(m["a"])(za,Ia,Ha,!1,null,null,null),Ja=Xa.exports,qa={name:"SearchContainer",props:{db:Object},data:function(){return{}},components:{SearchTags:Ja},methods:{}},Ka=qa,Qa=(n("530f"),Object(m["a"])(Ka,Va,Ya,!1,null,null,null)),Ua=Qa.exports,Za=a["a"].extend({name:"App",data:function(){return{loaderFlg:!0,dialogFlg:!1,dialogBtnClass:"",dbName:"netamemoDB",db:"",dbData:[],now:"",nowTime:0,current:"",currentYear:0,currentMonth:0,currentDates:[],changeMonthList:{},changeMonthBtnFlg:!1,changeMonthFlg:!1,menuListBtnFlg:!0,menuListFlg:!1,dcmNewArr:[],dcmEdtArr:[],markDate:0,postsFlg:!1,postsDate:0,postsHead:"",viewFlg:!1,editFlg:!1,currentField:"",anewFlg:!1,archiveFlg:!1,archiveHead:"",archiveArr:[]}},components:{LoaderContainer:C,DialogContainer:p,CalendarContainer:Q,MenuContainer:pt,PostsContainer:jt,ViewContainer:Ee,EditContainer:Rn,AnewContainer:Ra,SearchContainer:Ua},created:function(){this.checkDevice(),this.setToday(),this.createDB(),this.createTable(),this.setMenuData(),this.markDate=this.now.getDate(),this.hiddenLoader()},methods:{checkDevice:function(){var t=navigator.userAgent.toLowerCase();t.indexOf("iphone")>0||t.indexOf("ipod")>0||t.indexOf("android")>0&&t.indexOf("mobile")>0||t.indexOf("ipad")>0||t.indexOf("android")>0?this.deviceType="isTD":this.deviceType="isMD"},compileArrtoArr:function(t){var e=new Set(t);return Array.from(e)},compileNltoBr:function(t){var e=String(t);return e.replace(/<div>/,"\r\n").replace(/<\/div>/,"")},compileBrtoNl:function(t){var e=String(t);return e.replace(/<br>/,"\r\n")},zeroPad:function(t,e){return("0000"+t).slice(-e)},getCurrentDates:function(t,e){return new Date(parseInt(t,10),parseInt(e+1,10),0).getDate()},sortASC:function(t){return function(e,n){return e[t]<n[t]?-1:e[t]>n[t]?1:0}},sortDESC:function(t){return function(e,n){return e[t]>n[t]?-1:e[t]<n[t]?1:0}},accordionNext:function(t){var e=t.target,n=e.nextElementSibling;if(e.classList.contains("isOpen"))n.removeAttribute("style"),e.classList.remove("isOpen");else{var a=n.children.length*e.clientHeight;n.style.height=a+"px",e.classList.add("isOpen")}},createDB:function(){this.db=new o["a"](this.dbName)},createTable:function(){this.db.version(1).stores({dcm:"++did, cid, tag, date, last, head, body",ctg:"++cid, tag, date, color, head, body",tag:"++gid, head"})},addDataDcm:function(){this.db.dcm.put({cid:2,tag:["硯"],date:new Date(2020,8,25).getTime(),last:new Date(2020,8,30).getTime(),head:"徒然なるまゝに",body:"つれづれなるまゝに、日暮らし、硯にむかひて、心にうつりゆくよしなし事を、そこはかとなく書きつくれば、あやしうこそものぐるほしけれ。つれづれなるまゝに、日暮らし、硯にむかひて、心にうつりゆくよしなし事を、そこはかとなく書きつくれば、あやしうこそものぐるほしけれ。"}),this.db.dcm.put({cid:0,tag:["日暮らし"],date:new Date(2020,9,10).getTime(),last:new Date(2020,9,25).getTime(),head:"徒然なるまゝに",body:"つれづれなるまゝに、日暮らし、硯にむかひて、心にうつりゆくよしなし事を、そこはかとなく書きつくれば、あやしうこそものぐるほしけれ。つれづれなるまゝに、日暮らし、硯にむかひて、心にうつりゆくよしなし事を、そこはかとなく書きつくれば、あやしうこそものぐるほしけれ。"}),this.db.dcm.put({cid:1,tag:["徒然","日暮らし"],date:new Date(2020,9,20).getTime(),last:new Date(2020,9,22).getTime(),head:"日暮らし",body:"いでや、この世に生れては、願はしかるべき事こそ多かンめれ。<br>御門(みかど)の御位は、いともかしこし。竹の園生(そのふ)の、末葉(すゑば)まで人間の種ならぬぞ、やんごとなき。一(いち)の人の御有様はさらなり、たゞ人(びと)も、舎人(とねり)など給はるきはは、ゆゝしと見ゆ。その子・孫(むまご)までは、はふれにたれど、なほなまめかし。それより下(しも)つかたは、ほどにつけつゝ、時にあひ、したり顔なるも、みづからはいみじと思ふらめど、いとくちをし。"}),this.db.dcm.put({cid:2,tag:[],date:new Date(2020,9,30).getTime(),last:new Date(2020,9,30).getTime(),head:"硯にむかひて",body:"因幡国(いなばのくに)に、何の入道とかやいふ者の娘、かたちよしと聞きて、人あまた言ひわたりけれども、この娘、たゞ、栗をのみ食ひて、更に、米(よね)の類を食はざりれば、「かゝる異様(ことやう)の者、人に見ゆべきにあらず」とて、親許さざりけり。"}),this.db.dcm.put({cid:2,tag:["硯"],date:new Date(2020,9,1).getTime(),last:new Date(2020,9,11).getTime(),head:"因幡国",body:"因幡国(いなばのくに)に、何の入道とかやいふ者の娘、かたちよしと聞きて、人あまた言ひわたりけれども、この娘、たゞ、栗をのみ食ひて、更に、米(よね)の類を食はざりれば、「かゝる異様(ことやう)の者、人に見ゆべきにあらず」とて、親許さざりけり。"})},addDataCtg:function(){this.db.ctg.put({tag:["徒然","日暮らし"],date:new Date(2020,9,22).getTime(),color:"#fdcfdb",head:"心にうつりゆく",body:"公世(きんよ)の二位にゐのせうとに、良覚僧正(りやうがくそうじやう)と聞えしは、極(きは)めて腹あしき人なりけり。"}),this.db.ctg.put({tag:["硯"],date:new Date(2020,9,10).getTime(),color:"#145c8a",head:"よしなし事を",body:"能(のう)をつかんとする人、「よくせざらんほどは、なまじひに人に知(し)られじ。うちうちよく習ひ得(え)て、さし出(い)でたらんこそ、いと心にくからめ」と常に言ふめれど、かく言ふ人、一芸も習(なら)ひ得(う)ることなし。"})},addDataTag:function(){this.db.tag.put({head:"日暮らし"}),this.db.tag.put({head:"徒然"}),this.db.tag.put({head:"硯"})},getDcmAllData:function(){var t=this;return new Promise((function(e){t.db.dcm.toArray().then((function(t){e(t)}))}))},getCtgAllData:function(){var t=this;return new Promise((function(e){t.db.ctg.toArray().then((function(t){e(t)}))}))},getTagAllData:function(){var t=this;return new Promise((function(e){t.db.tag.toArray().then((function(t){e(t)}))}))},switchLoader:function(){this.loaderFlg=!this.loaderFlg,console.log("s",this.loaderFlg)},shownLoader:function(){this.loaderFlg=!0,console.log(this.loaderFlg)},hiddenLoader:function(){this.loaderFlg=!1,console.log(this.loaderFlg)},setToday:function(){this.now=new Date,this.now=new Date(this.now.getFullYear(),this.now.getMonth(),this.now.getDate()),this.nowTime=this.now.getTime(),this.current=new Date(this.now.getFullYear(),this.now.getMonth()),this.setCurrent({year:this.now.getFullYear(),month:this.now.getMonth()})},setCurrent:function(t){var e=this.current.getTime(),n=new Date(t.year,t.month).getTime(),a=Boolean(e==n);this.current=new Date(t.year,t.month),this.currentYear=this.current.getFullYear(),this.currentMonth=this.current.getMonth(),a||(this.$refs.calendar.setCalendar(t),this.switchChangeMonth())},setCalendarData:function(t){this.currentDates=t},setChangeMonth:function(t){this.changeMonthList=Object.assign(t),this.changeMonthBtnFlg=!!Object.keys(this.changeMonthList).length},setMenuData:function(){var t=this;t.dcmNewArr=[],t.dcmEdtArr=[],t.db.dcm.toArray().then((function(e){var n,a=Object(c["a"])(e);try{for(a.s();!(n=a.n()).done;){var r=n.value,i=r;i.date=r.date,i.last=r.last,t.dcmNewArr.push(i),t.dcmNewArr.sort(t.sortDESC("date")),t.dcmEdtArr.push(i),t.dcmEdtArr.sort(t.sortDESC("last"))}}catch(s){a.e(s)}finally{a.f()}t.dcmNewArr.slice(0,4),t.dcmEdtArr.slice(0,4)}))},switchChangeMonth:function(){this.menuListBtnFlg=!!this.changeMonthFlg,this.changeMonthFlg=!this.changeMonthFlg},switchMenuList:function(){this.changeMonthBtnFlg=!(!this.menuListFlg||!Object.keys(this.changeMonthList).length),this.menuListFlg=!this.menuListFlg},openPostsDcmAllData:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var a,r,i,s,o,l,g,d;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.getCtgAllData();case 2:return a=n.sent,n.next=5,e.getDcmAllData();case 5:r=n.sent,i=a.map((function(t){return t.cid})),s=Object(c["a"])(r);try{for(s.s();!(o=s.n()).done;)l=o.value,g=!!l.cid&&l.cid,d=g?a[i.indexOf(g)].color:"",e.$set(l,"color",d)}catch(u){s.e(u)}finally{s.f()}e.openPosts(r,t);case 10:case"end":return n.stop()}}),n)})))()},openPostsCtgAllData:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.getCtgAllData();case 2:a=n.sent,e.openPosts(a,t);case 4:case"end":return n.stop()}}),n)})))()},openPosts:function(t,e,n){this.postsDate=n||this.postsDate,this.postsHead=e,this.$refs.posts.setPosts(t),this.postsFlg=!0,this.hiddenLoader()},closePosts:function(){this.postsFlg=!1},openSearchTags:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.getTagAllData();case 2:a=n.sent,e.openSearch(a,t);case 4:case"end":return n.stop()}}),n)})))()},openSearch:function(t,e){console.log(t,e),this.hiddenLoader()},openViewDcm:function(t){this.$refs.view.setDcmData(t),this.viewFlg=!0,this.hiddenLoader()},openViewCtg:function(t){this.$refs.view.setCtgData(t),this.viewFlg=!0,this.hiddenLoader()},closeView:function(){this.viewFlg=!this.viewFlg},openEditDcm:function(t){this.$refs.edit.setEditDcmData(t),this.editFlg=!0},openEditCtg:function(t){this.$refs.edit.setEditCtgData(t),this.editFlg=!0},closeEditDcm:function(t){this.editFlg=!1,this.postsFlg&&this.$refs.calendar.setPostsData(this.postsDate),t&&this.viewFlg&&this.$refs.view.setDcmData(Number(t)),this.$refs.calendar.setCalendar({year:this.currentYear,month:this.currentMonth}),this.setMenuData(),this.hiddenLoader()},closeEditCtg:function(t){this.editFlg=!1,this.postsFlg&&this.$refs.calendar.setPostsData(this.postsDate),t&&this.viewFlg&&this.$refs.view.setCtgData(Number(t),!0),this.$refs.calendar.setCalendar({year:this.currentYear,month:this.currentMonth}),this.setMenuData(),this.hiddenLoader()},openAnewDcm:function(){this.$refs.anew.setAnew("dcm"),this.anewFlg=!0},openAnewCtg:function(){this.$refs.anew.setAnew("ctg"),this.anewFlg=!0},closeAnew:function(){this.anewFlg=!1,this.$refs.calendar.setCalendar({year:this.currentYear,month:this.currentMonth}),this.setMenuData()},switchDialog:function(){this.dialogFlg=!this.dialogFlg},closeDialog:function(){var t=document.getElementsByClassName("isRemove")[0];t.classList.remove("isRemove"),this.dialogBtnClass="",this.switchDialog()},confirmRem:function(t){this.switchDialog(),this.dialogBtnClass=t},removeItem:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=document.getElementsByClassName("isRemove")[0],a=n.dataset.did?"dcm":"ctg","dcm"!=a){e.next=6;break}return e.next=4,t.removeDcm(Number(n.dataset.did));case 4:e.next=8;break;case 6:return e.next=8,t.setRemoveCtg(Number(n.dataset.cid));case 8:t.postsFlg&&t.$refs.calendar.setPostsData(t.postsDate),t.viewFlg&&t.closeView(),t.switchDialog(),t.$refs.calendar.setCalendar({year:t.currentYear,month:t.currentMonth}),t.setMenuData(),t.hiddenLoader();case 14:case"end":return e.stop()}}),e)})))()},removeDcm:function(t){var e=this;return new Promise((function(n){e.db.dcm.delete(t).then((function(){n(!0)}))}))},removeCtg:function(t){var e=this;return new Promise((function(n){e.db.dcm.where(t).modify({cid:0}).then((function(){n(!0)}))}))},setRemoveCtg:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e,n.next=3,a.removeCtg({cid:t});case 3:return n.abrupt("return",new Promise((function(e){a.db.ctg.delete(t).then((function(){e(!0)}))})));case 4:case"end":return n.stop()}}),n)})))()}}}),tr=Za,er=(n("034f"),Object(m["a"])(tr,r,i,!1,null,null,null)),nr=er.exports;a["a"].config.productionTip=!1,new a["a"]({render:function(t){return t(nr)}}).$mount("#app")},"59db":function(t,e,n){},6181:function(t,e,n){},"63a5":function(t,e,n){},"6ff3":function(t,e,n){},"791f":function(t,e,n){},"7def":function(t,e,n){"use strict";var a=n("63a5"),r=n.n(a);r.a},"85ec":function(t,e,n){},"908f":function(t,e,n){"use strict";var a=n("6181"),r=n.n(a);r.a},a0d9:function(t,e,n){},acef:function(t,e,n){"use strict";var a=n("59db"),r=n.n(a);r.a},bfc0:function(t,e,n){"use strict";var a=n("0e9a"),r=n.n(a);r.a},dd40:function(t,e,n){"use strict";var a=n("791f"),r=n.n(a);r.a},f9fa:function(t,e,n){"use strict";var a=n("6ff3"),r=n.n(a);r.a}});
//# sourceMappingURL=app.97e20da4.js.map